var oC=Object.defineProperty,lC=Object.defineProperties;var cC=Object.getOwnPropertyDescriptors;var Nl=Object.getOwnPropertySymbols,uC=Object.getPrototypeOf,_v=Object.prototype.hasOwnProperty,jv=Object.prototype.propertyIsEnumerable,dC=Reflect.get;var tf=(Me,Oe,Le)=>Oe in Me?oC(Me,Oe,{enumerable:!0,configurable:!0,writable:!0,value:Le}):Me[Oe]=Le,X=(Me,Oe)=>{for(var Le in Oe||(Oe={}))_v.call(Oe,Le)&&tf(Me,Le,Oe[Le]);if(Nl)for(var Le of Nl(Oe))jv.call(Oe,Le)&&tf(Me,Le,Oe[Le]);return Me},de=(Me,Oe)=>lC(Me,cC(Oe));var Lr=(Me,Oe)=>{var Le={};for(var It in Me)_v.call(Me,It)&&Oe.indexOf(It)<0&&(Le[It]=Me[It]);if(Me!=null&&Nl)for(var It of Nl(Me))Oe.indexOf(It)<0&&jv.call(Me,It)&&(Le[It]=Me[It]);return Le};var Nv=(Me,Oe,Le)=>tf(Me,typeof Oe!="symbol"?Oe+"":Oe,Le);var zt=(Me,Oe,Le)=>dC(uC(Me),Le,Oe);var P=(Me,Oe,Le)=>new Promise((It,Rn)=>{var xi=Dr=>{try{Ir(Le.next(Dr))}catch(ss){Rn(ss)}},Ee=Dr=>{try{Ir(Le.throw(Dr))}catch(ss){Rn(ss)}},Ir=Dr=>Dr.done?It(Dr.value):Promise.resolve(Dr.value).then(xi,Ee);Ir((Le=Le.apply(Me,Oe)).next())});(function(){"use strict";function Me(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Oe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Le(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var It={exports:{}},Rn={},xi={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ir=Symbol.for("react.element"),Dr=Symbol.for("react.portal"),ss=Symbol.for("react.fragment"),Ev=Symbol.for("react.strict_mode"),kv=Symbol.for("react.profiler"),Ov=Symbol.for("react.provider"),Tv=Symbol.for("react.context"),Av=Symbol.for("react.forward_ref"),Cv=Symbol.for("react.suspense"),Pv=Symbol.for("react.memo"),Rv=Symbol.for("react.lazy"),rf=Symbol.iterator;function Lv(e){return e===null||typeof e!="object"?null:(e=rf&&e[rf]||e["@@iterator"],typeof e=="function"?e:null)}var nf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},af=Object.assign,sf={};function oa(e,t,r){this.props=e,this.context=t,this.refs=sf,this.updater=r||nf}oa.prototype.isReactComponent={},oa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},oa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function of(){}of.prototype=oa.prototype;function Sl(e,t,r){this.props=e,this.context=t,this.refs=sf,this.updater=r||nf}var El=Sl.prototype=new of;El.constructor=Sl,af(El,oa.prototype),El.isPureReactComponent=!0;var lf=Array.isArray,cf=Object.prototype.hasOwnProperty,kl={current:null},uf={key:!0,ref:!0,__self:!0,__source:!0};function df(e,t,r){var n,a={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)cf.call(t,n)&&!uf.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Ir,type:e,key:s,ref:o,props:a,_owner:kl.current}}function Iv(e,t){return{$$typeof:Ir,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ol(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ir}function Dv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ff=/\/+/g;function Tl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Dv(""+e.key):t.toString(36)}function bi(e,t,r,n,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ir:case Dr:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Tl(o,0):n,lf(a)?(r="",e!=null&&(r=e.replace(ff,"$&/")+"/"),bi(a,t,r,"",function(h){return h})):a!=null&&(Ol(a)&&(a=Iv(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(ff,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",lf(e))for(var l=0;l<e.length;l++){s=e[l];var c=n+Tl(s,l);o+=bi(s,t,r,c,a)}else if(c=Lv(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=n+Tl(s,l++),o+=bi(s,t,r,c,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function wi(e,t,r){if(e==null)return e;var n=[],a=0;return bi(e,n,"","",function(s){return t.call(r,s,a++)}),n}function Mv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ot={current:null},_i={transition:null},$v={ReactCurrentDispatcher:Ot,ReactCurrentBatchConfig:_i,ReactCurrentOwner:kl};function hf(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:wi,forEach:function(e,t,r){wi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return wi(e,function(){t++}),t},toArray:function(e){return wi(e,function(t){return t})||[]},only:function(e){if(!Ol(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},Ee.Component=oa,Ee.Fragment=ss,Ee.Profiler=kv,Ee.PureComponent=Sl,Ee.StrictMode=Ev,Ee.Suspense=Cv,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$v,Ee.act=hf,Ee.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=af({},e.props),a=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=kl.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)cf.call(t,c)&&!uf.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];n.children=l}return{$$typeof:Ir,type:e.type,key:a,ref:s,props:n,_owner:o}},Ee.createContext=function(e){return e={$$typeof:Tv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ov,_context:e},e.Consumer=e},Ee.createElement=df,Ee.createFactory=function(e){var t=df.bind(null,e);return t.type=e,t},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(e){return{$$typeof:Av,render:e}},Ee.isValidElement=Ol,Ee.lazy=function(e){return{$$typeof:Rv,_payload:{_status:-1,_result:e},_init:Mv}},Ee.memo=function(e,t){return{$$typeof:Pv,type:e,compare:t===void 0?null:t}},Ee.startTransition=function(e){var t=_i.transition;_i.transition={};try{e()}finally{_i.transition=t}},Ee.unstable_act=hf,Ee.useCallback=function(e,t){return Ot.current.useCallback(e,t)},Ee.useContext=function(e){return Ot.current.useContext(e)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(e){return Ot.current.useDeferredValue(e)},Ee.useEffect=function(e,t){return Ot.current.useEffect(e,t)},Ee.useId=function(){return Ot.current.useId()},Ee.useImperativeHandle=function(e,t,r){return Ot.current.useImperativeHandle(e,t,r)},Ee.useInsertionEffect=function(e,t){return Ot.current.useInsertionEffect(e,t)},Ee.useLayoutEffect=function(e,t){return Ot.current.useLayoutEffect(e,t)},Ee.useMemo=function(e,t){return Ot.current.useMemo(e,t)},Ee.useReducer=function(e,t,r){return Ot.current.useReducer(e,t,r)},Ee.useRef=function(e){return Ot.current.useRef(e)},Ee.useState=function(e){return Ot.current.useState(e)},Ee.useSyncExternalStore=function(e,t,r){return Ot.current.useSyncExternalStore(e,t,r)},Ee.useTransition=function(){return Ot.current.useTransition()},Ee.version="18.3.1",xi.exports=Ee;var B=xi.exports;const pt=Le(B),Uv=Me({__proto__:null,default:pt},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv=B,Bv=Symbol.for("react.element"),Fv=Symbol.for("react.fragment"),zv=Object.prototype.hasOwnProperty,Vv=qv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hv={key:!0,ref:!0,__self:!0,__source:!0};function pf(e,t,r){var n,a={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)zv.call(t,n)&&!Hv.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Bv,type:e,key:s,ref:o,props:a,_owner:Vv.current}}Rn.Fragment=Fv,Rn.jsx=pf,Rn.jsxs=pf,It.exports=Rn;var i=It.exports,Al={},mf={exports:{}},Vt={},gf={exports:{}},yf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(G,U){var M=G.length;G.push(U);e:for(;0<M;){var R=M-1>>>1,L=G[R];if(0<a(L,U))G[R]=U,G[M]=L,M=R;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var U=G[0],M=G.pop();if(M!==U){G[0]=M;e:for(var R=0,L=G.length,$=L>>>1;R<$;){var Q=2*(R+1)-1,Y=G[Q],q=Q+1,K=G[q];if(0>a(Y,M))q<L&&0>a(K,Y)?(G[R]=K,G[q]=M,R=q):(G[R]=Y,G[Q]=M,R=Q);else if(q<L&&0>a(K,M))G[R]=K,G[q]=M,R=q;else break e}}return U}function a(G,U){var M=G.sortIndex-U.sortIndex;return M!==0?M:G.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,d=null,u=3,f=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(G){for(var U=r(h);U!==null;){if(U.callback===null)n(h);else if(U.startTime<=G)n(h),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(h)}}function v(G){if(b=!1,y(G),!x)if(r(c)!==null)x=!0,z(_);else{var U=r(h);U!==null&&V(v,U.startTime-G)}}function _(G,U){x=!1,b&&(b=!1,g(j),j=-1),f=!0;var M=u;try{for(y(U),d=r(c);d!==null&&(!(d.expirationTime>U)||G&&!N());){var R=d.callback;if(typeof R=="function"){d.callback=null,u=d.priorityLevel;var L=R(d.expirationTime<=U);U=e.unstable_now(),typeof L=="function"?d.callback=L:d===r(c)&&n(c),y(U)}else n(c);d=r(c)}if(d!==null)var $=!0;else{var Q=r(h);Q!==null&&V(v,Q.startTime-U),$=!1}return $}finally{d=null,u=M,f=!1}}var O=!1,A=null,j=-1,k=5,S=-1;function N(){return!(e.unstable_now()-S<k)}function E(){if(A!==null){var G=e.unstable_now();S=G;var U=!0;try{U=A(!0,G)}finally{U?T():(O=!1,A=null)}}else O=!1}var T;if(typeof m=="function")T=function(){m(E)};else if(typeof MessageChannel!="undefined"){var C=new MessageChannel,D=C.port2;C.port1.onmessage=E,T=function(){D.postMessage(null)}}else T=function(){w(E,0)};function z(G){A=G,O||(O=!0,T())}function V(G,U){j=w(function(){G(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){x||f||(x=!0,z(_))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(G){switch(u){case 1:case 2:case 3:var U=3;break;default:U=u}var M=u;u=U;try{return G()}finally{u=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,U){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var M=u;u=G;try{return U()}finally{u=M}},e.unstable_scheduleCallback=function(G,U,M){var R=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?R+M:R):M=R,G){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=M+L,G={id:p++,callback:U,priorityLevel:G,startTime:M,expirationTime:L,sortIndex:-1},M>R?(G.sortIndex=M,t(h,G),r(c)===null&&G===r(h)&&(b?(g(j),j=-1):b=!0,V(v,M-R))):(G.sortIndex=L,t(c,G),x||f||(x=!0,z(_))),G},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(G){var U=u;return function(){var M=u;u=U;try{return G.apply(this,arguments)}finally{u=M}}}})(yf),gf.exports=yf;var Wv=gf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv=B,Ht=Wv;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vf=new Set,is={};function Ln(e,t){la(e,t),la(e+"Capture",t)}function la(e,t){for(is[e]=t,e=0;e<t.length;e++)vf.add(t[e])}var Mr=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Cl=Object.prototype.hasOwnProperty,Gv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xf={},bf={};function Jv(e){return Cl.call(bf,e)?!0:Cl.call(xf,e)?!1:Gv.test(e)?bf[e]=!0:(xf[e]=!0,!1)}function Yv(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Qv(e,t,r,n){if(t===null||typeof t=="undefined"||Yv(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Tt(e,t,r,n,a,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mt[e]=new Tt(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mt[t]=new Tt(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){mt[e]=new Tt(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mt[e]=new Tt(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mt[e]=new Tt(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){mt[e]=new Tt(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){mt[e]=new Tt(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){mt[e]=new Tt(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){mt[e]=new Tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pl=/[\-:]([a-z])/g;function Rl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pl,Rl);mt[t]=new Tt(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pl,Rl);mt[t]=new Tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pl,Rl);mt[t]=new Tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){mt[e]=new Tt(e,1,!1,e.toLowerCase(),null,!1,!1)}),mt.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){mt[e]=new Tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ll(e,t,r,n){var a=mt.hasOwnProperty(t)?mt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Qv(t,r,a,n)&&(r=null),n||a===null?Jv(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var $r=Kv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ji=Symbol.for("react.element"),ca=Symbol.for("react.portal"),ua=Symbol.for("react.fragment"),Il=Symbol.for("react.strict_mode"),Dl=Symbol.for("react.profiler"),wf=Symbol.for("react.provider"),_f=Symbol.for("react.context"),Ml=Symbol.for("react.forward_ref"),$l=Symbol.for("react.suspense"),Ul=Symbol.for("react.suspense_list"),ql=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),jf=Symbol.for("react.offscreen"),Nf=Symbol.iterator;function os(e){return e===null||typeof e!="object"?null:(e=Nf&&e[Nf]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,Bl;function ls(e){if(Bl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Bl=t&&t[1]||""}return`
`+Bl+e}var Fl=!1;function zl(e,t){if(!e||Fl)return"";Fl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),s=n.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Fl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ls(e):""}function Xv(e){switch(e.tag){case 5:return ls(e.type);case 16:return ls("Lazy");case 13:return ls("Suspense");case 19:return ls("SuspenseList");case 0:case 2:case 15:return e=zl(e.type,!1),e;case 11:return e=zl(e.type.render,!1),e;case 1:return e=zl(e.type,!0),e;default:return""}}function Vl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ua:return"Fragment";case ca:return"Portal";case Dl:return"Profiler";case Il:return"StrictMode";case $l:return"Suspense";case Ul:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _f:return(e.displayName||"Context")+".Consumer";case wf:return(e._context.displayName||"Context")+".Provider";case Ml:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ql:return t=e.displayName||null,t!==null?t:Vl(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return Vl(e(t))}catch(r){}}return null}function Zv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vl(t);case 8:return t===Il?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function an(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function e0(e){var t=Sf(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ni(e){e._valueTracker||(e._valueTracker=e0(e))}function Ef(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Sf(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Si(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Hl(e,t){var r=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function kf(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=an(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Of(e,t){t=t.checked,t!=null&&Ll(e,"checked",t,!1)}function Wl(e,t){Of(e,t);var r=an(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Kl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Kl(e,t.type,an(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Tf(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Kl(e,t,r){(t!=="number"||Si(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var cs=Array.isArray;function da(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+an(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Gl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Af(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ce(92));if(cs(r)){if(1<r.length)throw Error(ce(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:an(r)}}function Cf(e,t){var r=an(t.value),n=an(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Pf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Rf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Rf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ei,Lf=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ei=Ei||document.createElement("div"),Ei.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ei.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function us(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t0=["Webkit","ms","Moz","O"];Object.keys(ds).forEach(function(e){t0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ds[t]=ds[e]})});function If(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ds.hasOwnProperty(e)&&ds[e]?(""+t).trim():t+"px"}function Df(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=If(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var r0=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yl(e,t){if(t){if(r0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function Ql(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xl=null;function Zl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ec=null,fa=null,ha=null;function Mf(e){if(e=Rs(e)){if(typeof ec!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=Ji(t),ec(e.stateNode,e.type,t))}}function $f(e){fa?ha?ha.push(e):ha=[e]:fa=e}function Uf(){if(fa){var e=fa,t=ha;if(ha=fa=null,Mf(e),t)for(e=0;e<t.length;e++)Mf(t[e])}}function qf(e,t){return e(t)}function Bf(){}var tc=!1;function Ff(e,t,r){if(tc)return e(t,r);tc=!0;try{return qf(e,t,r)}finally{tc=!1,(fa!==null||ha!==null)&&(Bf(),Uf())}}function fs(e,t){var r=e.stateNode;if(r===null)return null;var n=Ji(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ce(231,t,typeof r));return r}var rc=!1;if(Mr)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){rc=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch(e){rc=!1}function n0(e,t,r,n,a,s,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(p){this.onError(p)}}var ps=!1,ki=null,Oi=!1,nc=null,a0={onError:function(e){ps=!0,ki=e}};function s0(e,t,r,n,a,s,o,l,c){ps=!1,ki=null,n0.apply(a0,arguments)}function i0(e,t,r,n,a,s,o,l,c){if(s0.apply(this,arguments),ps){if(ps){var h=ki;ps=!1,ki=null}else throw Error(ce(198));Oi||(Oi=!0,nc=h)}}function In(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function zf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vf(e){if(In(e)!==e)throw Error(ce(188))}function o0(e){var t=e.alternate;if(!t){if(t=In(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return Vf(a),e;if(s===n)return Vf(a),t;s=s.sibling}throw Error(ce(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(r.tag!==3)throw Error(ce(188));return r.stateNode.current===r?e:t}function Hf(e){return e=o0(e),e!==null?Wf(e):null}function Wf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Wf(e);if(t!==null)return t;e=e.sibling}return null}var Kf=Ht.unstable_scheduleCallback,Gf=Ht.unstable_cancelCallback,l0=Ht.unstable_shouldYield,c0=Ht.unstable_requestPaint,et=Ht.unstable_now,u0=Ht.unstable_getCurrentPriorityLevel,ac=Ht.unstable_ImmediatePriority,Jf=Ht.unstable_UserBlockingPriority,Ti=Ht.unstable_NormalPriority,d0=Ht.unstable_LowPriority,Yf=Ht.unstable_IdlePriority,Ai=null,_r=null;function f0(e){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(Ai,e,void 0,(e.current.flags&128)===128)}catch(t){}}var or=Math.clz32?Math.clz32:m0,h0=Math.log,p0=Math.LN2;function m0(e){return e>>>=0,e===0?32:31-(h0(e)/p0|0)|0}var Ci=64,Pi=4194304;function ms(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ri(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=ms(l):(s&=o,s!==0&&(n=ms(s)))}else o=r&~a,o!==0?n=ms(o):s!==0&&(n=ms(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-or(t),a=1<<r,n|=e[r],t&=~a;return n}function g0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y0(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-or(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=g0(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function sc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qf(){var e=Ci;return Ci<<=1,!(Ci&4194240)&&(Ci=64),e}function ic(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-or(t),e[t]=r}function v0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-or(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}function oc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-or(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Pe=0;function Xf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Zf,lc,eh,th,rh,cc=!1,Li=[],sn=null,on=null,ln=null,ys=new Map,vs=new Map,cn=[],x0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nh(e,t){switch(e){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vs.delete(t.pointerId)}}function xs(e,t,r,n,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},t!==null&&(t=Rs(t),t!==null&&lc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function b0(e,t,r,n,a){switch(t){case"focusin":return sn=xs(sn,e,t,r,n,a),!0;case"dragenter":return on=xs(on,e,t,r,n,a),!0;case"mouseover":return ln=xs(ln,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return ys.set(s,xs(ys.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,vs.set(s,xs(vs.get(s)||null,e,t,r,n,a)),!0}return!1}function ah(e){var t=Dn(e.target);if(t!==null){var r=In(t);if(r!==null){if(t=r.tag,t===13){if(t=zf(r),t!==null){e.blockedOn=t,rh(e.priority,function(){eh(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ii(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=dc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Xl=n,r.target.dispatchEvent(n),Xl=null}else return t=Rs(r),t!==null&&lc(t),e.blockedOn=r,!1;t.shift()}return!0}function sh(e,t,r){Ii(e)&&r.delete(t)}function w0(){cc=!1,sn!==null&&Ii(sn)&&(sn=null),on!==null&&Ii(on)&&(on=null),ln!==null&&Ii(ln)&&(ln=null),ys.forEach(sh),vs.forEach(sh)}function bs(e,t){e.blockedOn===t&&(e.blockedOn=null,cc||(cc=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,w0)))}function ws(e){function t(a){return bs(a,e)}if(0<Li.length){bs(Li[0],e);for(var r=1;r<Li.length;r++){var n=Li[r];n.blockedOn===e&&(n.blockedOn=null)}}for(sn!==null&&bs(sn,e),on!==null&&bs(on,e),ln!==null&&bs(ln,e),ys.forEach(t),vs.forEach(t),r=0;r<cn.length;r++)n=cn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<cn.length&&(r=cn[0],r.blockedOn===null);)ah(r),r.blockedOn===null&&cn.shift()}var pa=$r.ReactCurrentBatchConfig,Di=!0;function _0(e,t,r,n){var a=Pe,s=pa.transition;pa.transition=null;try{Pe=1,uc(e,t,r,n)}finally{Pe=a,pa.transition=s}}function j0(e,t,r,n){var a=Pe,s=pa.transition;pa.transition=null;try{Pe=4,uc(e,t,r,n)}finally{Pe=a,pa.transition=s}}function uc(e,t,r,n){if(Di){var a=dc(e,t,r,n);if(a===null)Oc(e,t,n,Mi,r),nh(e,n);else if(b0(a,e,t,r,n))n.stopPropagation();else if(nh(e,n),t&4&&-1<x0.indexOf(e)){for(;a!==null;){var s=Rs(a);if(s!==null&&Zf(s),s=dc(e,t,r,n),s===null&&Oc(e,t,n,Mi,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else Oc(e,t,n,null,r)}}var Mi=null;function dc(e,t,r,n){if(Mi=null,e=Zl(n),e=Dn(e),e!==null)if(t=In(e),t===null)e=null;else if(r=t.tag,r===13){if(e=zf(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mi=e,null}function ih(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u0()){case ac:return 1;case Jf:return 4;case Ti:case d0:return 16;case Yf:return 536870912;default:return 16}default:return 16}}var un=null,fc=null,$i=null;function oh(){if($i)return $i;var e,t=fc,r=t.length,n,a="value"in un?un.value:un.textContent,s=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[s-n];n++);return $i=a.slice(e,1<n?1-n:void 0)}function Ui(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qi(){return!0}function lh(){return!1}function Wt(e){function t(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qi:lh,this.isPropagationStopped=lh,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),t}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hc=Wt(ma),_s=Ve({},ma,{view:0,detail:0}),N0=Wt(_s),pc,mc,js,Bi=Ve({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==js&&(js&&e.type==="mousemove"?(pc=e.screenX-js.screenX,mc=e.screenY-js.screenY):mc=pc=0,js=e),pc)},movementY:function(e){return"movementY"in e?e.movementY:mc}}),ch=Wt(Bi),S0=Ve({},Bi,{dataTransfer:0}),E0=Wt(S0),k0=Ve({},_s,{relatedTarget:0}),gc=Wt(k0),O0=Ve({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),T0=Wt(O0),A0=Ve({},ma,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),C0=Wt(A0),P0=Ve({},ma,{data:0}),uh=Wt(P0),R0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=I0[e])?!!t[e]:!1}function yc(){return D0}var M0=Ve({},_s,{key:function(e){if(e.key){var t=R0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ui(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?L0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yc,charCode:function(e){return e.type==="keypress"?Ui(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ui(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$0=Wt(M0),U0=Ve({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dh=Wt(U0),q0=Ve({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yc}),B0=Wt(q0),F0=Ve({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),z0=Wt(F0),V0=Ve({},Bi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H0=Wt(V0),W0=[9,13,27,32],vc=Mr&&"CompositionEvent"in window,Ns=null;Mr&&"documentMode"in document&&(Ns=document.documentMode);var K0=Mr&&"TextEvent"in window&&!Ns,fh=Mr&&(!vc||Ns&&8<Ns&&11>=Ns),hh=" ",ph=!1;function mh(e,t){switch(e){case"keyup":return W0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ga=!1;function G0(e,t){switch(e){case"compositionend":return gh(t);case"keypress":return t.which!==32?null:(ph=!0,hh);case"textInput":return e=t.data,e===hh&&ph?null:e;default:return null}}function J0(e,t){if(ga)return e==="compositionend"||!vc&&mh(e,t)?(e=oh(),$i=fc=un=null,ga=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fh&&t.locale!=="ko"?null:t.data;default:return null}}var Y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Y0[e.type]:t==="textarea"}function vh(e,t,r,n){$f(n),t=Wi(t,"onChange"),0<t.length&&(r=new hc("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ss=null,Es=null;function Q0(e){Dh(e,0)}function Fi(e){var t=wa(e);if(Ef(t))return e}function X0(e,t){if(e==="change")return t}var xh=!1;if(Mr){var xc;if(Mr){var bc="oninput"in document;if(!bc){var bh=document.createElement("div");bh.setAttribute("oninput","return;"),bc=typeof bh.oninput=="function"}xc=bc}else xc=!1;xh=xc&&(!document.documentMode||9<document.documentMode)}function wh(){Ss&&(Ss.detachEvent("onpropertychange",_h),Es=Ss=null)}function _h(e){if(e.propertyName==="value"&&Fi(Es)){var t=[];vh(t,Es,e,Zl(e)),Ff(Q0,t)}}function Z0(e,t,r){e==="focusin"?(wh(),Ss=t,Es=r,Ss.attachEvent("onpropertychange",_h)):e==="focusout"&&wh()}function ex(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fi(Es)}function tx(e,t){if(e==="click")return Fi(t)}function rx(e,t){if(e==="input"||e==="change")return Fi(t)}function nx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lr=typeof Object.is=="function"?Object.is:nx;function ks(e,t){if(lr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Cl.call(t,a)||!lr(e[a],t[a]))return!1}return!0}function jh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nh(e,t){var r=jh(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jh(r)}}function Sh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Eh(){for(var e=window,t=Si();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(n){r=!1}if(r)e=t.contentWindow;else break;t=Si(e.document)}return t}function wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ax(e){var t=Eh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Sh(r.ownerDocument.documentElement,r)){if(n!==null&&wc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=Nh(r,s);var o=Nh(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sx=Mr&&"documentMode"in document&&11>=document.documentMode,ya=null,_c=null,Os=null,jc=!1;function kh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;jc||ya==null||ya!==Si(n)||(n=ya,"selectionStart"in n&&wc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Os&&ks(Os,n)||(Os=n,n=Wi(_c,"onSelect"),0<n.length&&(t=new hc("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ya)))}function zi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var va={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionend:zi("Transition","TransitionEnd")},Nc={},Oh={};Mr&&(Oh=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Vi(e){if(Nc[e])return Nc[e];if(!va[e])return e;var t=va[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Oh)return Nc[e]=t[r];return e}var Th=Vi("animationend"),Ah=Vi("animationiteration"),Ch=Vi("animationstart"),Ph=Vi("transitionend"),Rh=new Map,Lh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(e,t){Rh.set(e,t),Ln(t,[e])}for(var Sc=0;Sc<Lh.length;Sc++){var Ec=Lh[Sc],ix=Ec.toLowerCase(),ox=Ec[0].toUpperCase()+Ec.slice(1);dn(ix,"on"+ox)}dn(Th,"onAnimationEnd"),dn(Ah,"onAnimationIteration"),dn(Ch,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(Ph,"onTransitionEnd"),la("onMouseEnter",["mouseout","mouseover"]),la("onMouseLeave",["mouseout","mouseover"]),la("onPointerEnter",["pointerout","pointerover"]),la("onPointerLeave",["pointerout","pointerover"]),Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function Ih(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,i0(n,t,void 0,e),e.currentTarget=null}function Dh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;Ih(a,l,h),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;Ih(a,l,h),s=c}}}if(Oi)throw e=nc,Oi=!1,nc=null,e}function $e(e,t){var r=t[Lc];r===void 0&&(r=t[Lc]=new Set);var n=e+"__bubble";r.has(n)||(Mh(t,e,2,!1),r.add(n))}function kc(e,t,r){var n=0;t&&(n|=4),Mh(r,e,n,t)}var Hi="_reactListening"+Math.random().toString(36).slice(2);function As(e){if(!e[Hi]){e[Hi]=!0,vf.forEach(function(r){r!=="selectionchange"&&(lx.has(r)||kc(r,!1,e),kc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hi]||(t[Hi]=!0,kc("selectionchange",!1,t))}}function Mh(e,t,r,n){switch(ih(t)){case 1:var a=_0;break;case 4:a=j0;break;default:a=uc}r=a.bind(null,t,r,e),a=void 0,!rc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Oc(e,t,r,n,a){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Dn(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}Ff(function(){var h=s,p=Zl(r),d=[];e:{var u=Rh.get(e);if(u!==void 0){var f=hc,x=e;switch(e){case"keypress":if(Ui(r)===0)break e;case"keydown":case"keyup":f=$0;break;case"focusin":x="focus",f=gc;break;case"focusout":x="blur",f=gc;break;case"beforeblur":case"afterblur":f=gc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=ch;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=E0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=B0;break;case Th:case Ah:case Ch:f=T0;break;case Ph:f=z0;break;case"scroll":f=N0;break;case"wheel":f=H0;break;case"copy":case"cut":case"paste":f=C0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=dh}var b=(t&4)!==0,w=!b&&e==="scroll",g=b?u!==null?u+"Capture":null:u;b=[];for(var m=h,y;m!==null;){y=m;var v=y.stateNode;if(y.tag===5&&v!==null&&(y=v,g!==null&&(v=fs(m,g),v!=null&&b.push(Cs(m,v,y)))),w)break;m=m.return}0<b.length&&(u=new f(u,x,null,r,p),d.push({event:u,listeners:b}))}}if(!(t&7)){e:{if(u=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",u&&r!==Xl&&(x=r.relatedTarget||r.fromElement)&&(Dn(x)||x[Ur]))break e;if((f||u)&&(u=p.window===p?p:(u=p.ownerDocument)?u.defaultView||u.parentWindow:window,f?(x=r.relatedTarget||r.toElement,f=h,x=x?Dn(x):null,x!==null&&(w=In(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(f=null,x=h),f!==x)){if(b=ch,v="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(b=dh,v="onPointerLeave",g="onPointerEnter",m="pointer"),w=f==null?u:wa(f),y=x==null?u:wa(x),u=new b(v,m+"leave",f,r,p),u.target=w,u.relatedTarget=y,v=null,Dn(p)===h&&(b=new b(g,m+"enter",x,r,p),b.target=y,b.relatedTarget=w,v=b),w=v,f&&x)t:{for(b=f,g=x,m=0,y=b;y;y=xa(y))m++;for(y=0,v=g;v;v=xa(v))y++;for(;0<m-y;)b=xa(b),m--;for(;0<y-m;)g=xa(g),y--;for(;m--;){if(b===g||g!==null&&b===g.alternate)break t;b=xa(b),g=xa(g)}b=null}else b=null;f!==null&&$h(d,u,f,b,!1),x!==null&&w!==null&&$h(d,w,x,b,!0)}}e:{if(u=h?wa(h):window,f=u.nodeName&&u.nodeName.toLowerCase(),f==="select"||f==="input"&&u.type==="file")var _=X0;else if(yh(u))if(xh)_=rx;else{_=ex;var O=Z0}else(f=u.nodeName)&&f.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(_=tx);if(_&&(_=_(e,h))){vh(d,_,r,p);break e}O&&O(e,u,h),e==="focusout"&&(O=u._wrapperState)&&O.controlled&&u.type==="number"&&Kl(u,"number",u.value)}switch(O=h?wa(h):window,e){case"focusin":(yh(O)||O.contentEditable==="true")&&(ya=O,_c=h,Os=null);break;case"focusout":Os=_c=ya=null;break;case"mousedown":jc=!0;break;case"contextmenu":case"mouseup":case"dragend":jc=!1,kh(d,r,p);break;case"selectionchange":if(sx)break;case"keydown":case"keyup":kh(d,r,p)}var A;if(vc)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else ga?mh(e,r)&&(j="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(fh&&r.locale!=="ko"&&(ga||j!=="onCompositionStart"?j==="onCompositionEnd"&&ga&&(A=oh()):(un=p,fc="value"in un?un.value:un.textContent,ga=!0)),O=Wi(h,j),0<O.length&&(j=new uh(j,e,null,r,p),d.push({event:j,listeners:O}),A?j.data=A:(A=gh(r),A!==null&&(j.data=A)))),(A=K0?G0(e,r):J0(e,r))&&(h=Wi(h,"onBeforeInput"),0<h.length&&(p=new uh("onBeforeInput","beforeinput",null,r,p),d.push({event:p,listeners:h}),p.data=A))}Dh(d,t)})}function Cs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Wi(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=fs(e,r),s!=null&&n.unshift(Cs(e,s,a)),s=fs(e,t),s!=null&&n.push(Cs(e,s,a))),e=e.return}return n}function xa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $h(e,t,r,n,a){for(var s=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,h=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&h!==null&&(l=h,a?(c=fs(r,s),c!=null&&o.unshift(Cs(r,c,l))):a||(c=fs(r,s),c!=null&&o.push(Cs(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var cx=/\r\n?/g,ux=/\u0000|\uFFFD/g;function Uh(e){return(typeof e=="string"?e:""+e).replace(cx,`
`).replace(ux,"")}function Ki(e,t,r){if(t=Uh(t),Uh(e)!==t&&r)throw Error(ce(425))}function Gi(){}var Tc=null,Ac=null;function Cc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pc=typeof setTimeout=="function"?setTimeout:void 0,dx=typeof clearTimeout=="function"?clearTimeout:void 0,qh=typeof Promise=="function"?Promise:void 0,fx=typeof queueMicrotask=="function"?queueMicrotask:typeof qh!="undefined"?function(e){return qh.resolve(null).then(e).catch(hx)}:Pc;function hx(e){setTimeout(function(){throw e})}function Rc(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),ws(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);ws(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ba=Math.random().toString(36).slice(2),jr="__reactFiber$"+ba,Ps="__reactProps$"+ba,Ur="__reactContainer$"+ba,Lc="__reactEvents$"+ba,px="__reactListeners$"+ba,mx="__reactHandles$"+ba;function Dn(e){var t=e[jr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ur]||r[jr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Bh(e);e!==null;){if(r=e[jr])return r;e=Bh(e)}return t}e=r,r=e.parentNode}return null}function Rs(e){return e=e[jr]||e[Ur],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function Ji(e){return e[Ps]||null}var Ic=[],_a=-1;function hn(e){return{current:e}}function Ue(e){0>_a||(e.current=Ic[_a],Ic[_a]=null,_a--)}function Ie(e,t){_a++,Ic[_a]=e.current,e.current=t}var pn={},jt=hn(pn),Dt=hn(!1),Mn=pn;function ja(e,t){var r=e.type.contextTypes;if(!r)return pn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Mt(e){return e=e.childContextTypes,e!=null}function Yi(){Ue(Dt),Ue(jt)}function Fh(e,t,r){if(jt.current!==pn)throw Error(ce(168));Ie(jt,t),Ie(Dt,r)}function zh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ce(108,Zv(e)||"Unknown",a));return Ve({},r,n)}function Qi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pn,Mn=jt.current,Ie(jt,e),Ie(Dt,Dt.current),!0}function Vh(e,t,r){var n=e.stateNode;if(!n)throw Error(ce(169));r?(e=zh(e,t,Mn),n.__reactInternalMemoizedMergedChildContext=e,Ue(Dt),Ue(jt),Ie(jt,e)):Ue(Dt),Ie(Dt,r)}var qr=null,Xi=!1,Dc=!1;function Hh(e){qr===null?qr=[e]:qr.push(e)}function gx(e){Xi=!0,Hh(e)}function mn(){if(!Dc&&qr!==null){Dc=!0;var e=0,t=Pe;try{var r=qr;for(Pe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}qr=null,Xi=!1}catch(a){throw qr!==null&&(qr=qr.slice(e+1)),Kf(ac,mn),a}finally{Pe=t,Dc=!1}}return null}var Na=[],Sa=0,Zi=null,eo=0,er=[],tr=0,$n=null,Br=1,Fr="";function Un(e,t){Na[Sa++]=eo,Na[Sa++]=Zi,Zi=e,eo=t}function Wh(e,t,r){er[tr++]=Br,er[tr++]=Fr,er[tr++]=$n,$n=e;var n=Br;e=Fr;var a=32-or(n)-1;n&=~(1<<a),r+=1;var s=32-or(t)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Br=1<<32-or(t)+a|r<<a|n,Fr=s+e}else Br=1<<s|r<<a|n,Fr=e}function Mc(e){e.return!==null&&(Un(e,1),Wh(e,1,0))}function $c(e){for(;e===Zi;)Zi=Na[--Sa],Na[Sa]=null,eo=Na[--Sa],Na[Sa]=null;for(;e===$n;)$n=er[--tr],er[tr]=null,Fr=er[--tr],er[tr]=null,Br=er[--tr],er[tr]=null}var Kt=null,Gt=null,Be=!1,cr=null;function Kh(e,t){var r=sr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Gh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Kt=e,Gt=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Kt=e,Gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$n!==null?{id:Br,overflow:Fr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=sr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Kt=e,Gt=null,!0):!1;default:return!1}}function Uc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qc(e){if(Be){var t=Gt;if(t){var r=t;if(!Gh(e,t)){if(Uc(e))throw Error(ce(418));t=fn(r.nextSibling);var n=Kt;t&&Gh(e,t)?Kh(n,r):(e.flags=e.flags&-4097|2,Be=!1,Kt=e)}}else{if(Uc(e))throw Error(ce(418));e.flags=e.flags&-4097|2,Be=!1,Kt=e}}}function Jh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Kt=e}function to(e){if(e!==Kt)return!1;if(!Be)return Jh(e),Be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cc(e.type,e.memoizedProps)),t&&(t=Gt)){if(Uc(e))throw Yh(),Error(ce(418));for(;t;)Kh(e,t),t=fn(t.nextSibling)}if(Jh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Gt=fn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Gt=null}}else Gt=Kt?fn(e.stateNode.nextSibling):null;return!0}function Yh(){for(var e=Gt;e;)e=fn(e.nextSibling)}function Ea(){Gt=Kt=null,Be=!1}function Bc(e){cr===null?cr=[e]:cr.push(e)}var yx=$r.ReactCurrentBatchConfig;function Ls(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,e));var a=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ce(284));if(!r._owner)throw Error(ce(290,e))}return e}function ro(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qh(e){var t=e._init;return t(e._payload)}function Xh(e){function t(g,m){if(e){var y=g.deletions;y===null?(g.deletions=[m],g.flags|=16):y.push(m)}}function r(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function a(g,m){return g=jn(g,m),g.index=0,g.sibling=null,g}function s(g,m,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<m?(g.flags|=2,m):y):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,m,y,v){return m===null||m.tag!==6?(m=Pu(y,g.mode,v),m.return=g,m):(m=a(m,y),m.return=g,m)}function c(g,m,y,v){var _=y.type;return _===ua?p(g,m,y.props.children,v,y.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===nn&&Qh(_)===m.type)?(v=a(m,y.props),v.ref=Ls(g,m,y),v.return=g,v):(v=ko(y.type,y.key,y.props,null,g.mode,v),v.ref=Ls(g,m,y),v.return=g,v)}function h(g,m,y,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Ru(y,g.mode,v),m.return=g,m):(m=a(m,y.children||[]),m.return=g,m)}function p(g,m,y,v,_){return m===null||m.tag!==7?(m=Kn(y,g.mode,v,_),m.return=g,m):(m=a(m,y),m.return=g,m)}function d(g,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Pu(""+m,g.mode,y),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ji:return y=ko(m.type,m.key,m.props,null,g.mode,y),y.ref=Ls(g,null,m),y.return=g,y;case ca:return m=Ru(m,g.mode,y),m.return=g,m;case nn:var v=m._init;return d(g,v(m._payload),y)}if(cs(m)||os(m))return m=Kn(m,g.mode,y,null),m.return=g,m;ro(g,m)}return null}function u(g,m,y,v){var _=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:l(g,m,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ji:return y.key===_?c(g,m,y,v):null;case ca:return y.key===_?h(g,m,y,v):null;case nn:return _=y._init,u(g,m,_(y._payload),v)}if(cs(y)||os(y))return _!==null?null:p(g,m,y,v,null);ro(g,y)}return null}function f(g,m,y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return g=g.get(y)||null,l(m,g,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ji:return g=g.get(v.key===null?y:v.key)||null,c(m,g,v,_);case ca:return g=g.get(v.key===null?y:v.key)||null,h(m,g,v,_);case nn:var O=v._init;return f(g,m,y,O(v._payload),_)}if(cs(v)||os(v))return g=g.get(y)||null,p(m,g,v,_,null);ro(m,v)}return null}function x(g,m,y,v){for(var _=null,O=null,A=m,j=m=0,k=null;A!==null&&j<y.length;j++){A.index>j?(k=A,A=null):k=A.sibling;var S=u(g,A,y[j],v);if(S===null){A===null&&(A=k);break}e&&A&&S.alternate===null&&t(g,A),m=s(S,m,j),O===null?_=S:O.sibling=S,O=S,A=k}if(j===y.length)return r(g,A),Be&&Un(g,j),_;if(A===null){for(;j<y.length;j++)A=d(g,y[j],v),A!==null&&(m=s(A,m,j),O===null?_=A:O.sibling=A,O=A);return Be&&Un(g,j),_}for(A=n(g,A);j<y.length;j++)k=f(A,g,j,y[j],v),k!==null&&(e&&k.alternate!==null&&A.delete(k.key===null?j:k.key),m=s(k,m,j),O===null?_=k:O.sibling=k,O=k);return e&&A.forEach(function(N){return t(g,N)}),Be&&Un(g,j),_}function b(g,m,y,v){var _=os(y);if(typeof _!="function")throw Error(ce(150));if(y=_.call(y),y==null)throw Error(ce(151));for(var O=_=null,A=m,j=m=0,k=null,S=y.next();A!==null&&!S.done;j++,S=y.next()){A.index>j?(k=A,A=null):k=A.sibling;var N=u(g,A,S.value,v);if(N===null){A===null&&(A=k);break}e&&A&&N.alternate===null&&t(g,A),m=s(N,m,j),O===null?_=N:O.sibling=N,O=N,A=k}if(S.done)return r(g,A),Be&&Un(g,j),_;if(A===null){for(;!S.done;j++,S=y.next())S=d(g,S.value,v),S!==null&&(m=s(S,m,j),O===null?_=S:O.sibling=S,O=S);return Be&&Un(g,j),_}for(A=n(g,A);!S.done;j++,S=y.next())S=f(A,g,j,S.value,v),S!==null&&(e&&S.alternate!==null&&A.delete(S.key===null?j:S.key),m=s(S,m,j),O===null?_=S:O.sibling=S,O=S);return e&&A.forEach(function(E){return t(g,E)}),Be&&Un(g,j),_}function w(g,m,y,v){if(typeof y=="object"&&y!==null&&y.type===ua&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ji:e:{for(var _=y.key,O=m;O!==null;){if(O.key===_){if(_=y.type,_===ua){if(O.tag===7){r(g,O.sibling),m=a(O,y.props.children),m.return=g,g=m;break e}}else if(O.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===nn&&Qh(_)===O.type){r(g,O.sibling),m=a(O,y.props),m.ref=Ls(g,O,y),m.return=g,g=m;break e}r(g,O);break}else t(g,O);O=O.sibling}y.type===ua?(m=Kn(y.props.children,g.mode,v,y.key),m.return=g,g=m):(v=ko(y.type,y.key,y.props,null,g.mode,v),v.ref=Ls(g,m,y),v.return=g,g=v)}return o(g);case ca:e:{for(O=y.key;m!==null;){if(m.key===O)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){r(g,m.sibling),m=a(m,y.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else t(g,m);m=m.sibling}m=Ru(y,g.mode,v),m.return=g,g=m}return o(g);case nn:return O=y._init,w(g,m,O(y._payload),v)}if(cs(y))return x(g,m,y,v);if(os(y))return b(g,m,y,v);ro(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(r(g,m.sibling),m=a(m,y),m.return=g,g=m):(r(g,m),m=Pu(y,g.mode,v),m.return=g,g=m),o(g)):r(g,m)}return w}var ka=Xh(!0),Zh=Xh(!1),no=hn(null),ao=null,Oa=null,Fc=null;function zc(){Fc=Oa=ao=null}function Vc(e){var t=no.current;Ue(no),e._currentValue=t}function Hc(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ta(e,t){ao=e,Fc=Oa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($t=!0),e.firstContext=null)}function rr(e){var t=e._currentValue;if(Fc!==e)if(e={context:e,memoizedValue:t,next:null},Oa===null){if(ao===null)throw Error(ce(308));Oa=e,ao.dependencies={lanes:0,firstContext:e}}else Oa=Oa.next=e;return t}var qn=null;function Wc(e){qn===null?qn=[e]:qn.push(e)}function ep(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Wc(t)):(r.next=a.next,a.next=r),t.interleaved=r,zr(e,n)}function zr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var gn=!1;function Kc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ce&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,zr(e,r)}return a=n.interleaved,a===null?(t.next=t,Wc(n)):(t.next=a.next,a.next=t),n.interleaved=t,zr(e,r)}function so(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,oc(e,r)}}function rp(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=t:s=s.next=t}else a=s=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function io(e,t,r,n){var a=e.updateQueue;gn=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(s!==null){var d=a.baseState;o=0,p=h=c=null,l=s;do{var u=l.lane,f=l.eventTime;if((n&u)===u){p!==null&&(p=p.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,b=l;switch(u=t,f=r,b.tag){case 1:if(x=b.payload,typeof x=="function"){d=x.call(f,d,u);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,u=typeof x=="function"?x.call(f,d,u):x,u==null)break e;d=Ve({},d,u);break e;case 2:gn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,u=a.effects,u===null?a.effects=[l]:u.push(l))}else f={eventTime:f,lane:u,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=f,c=d):p=p.next=f,o|=u;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;u=l,l=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}while(!0);if(p===null&&(c=d),a.baseState=c,a.firstBaseUpdate=h,a.lastBaseUpdate=p,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);zn|=o,e.lanes=o,e.memoizedState=d}}function np(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ce(191,a));a.call(n)}}}var Is={},Nr=hn(Is),Ds=hn(Is),Ms=hn(Is);function Bn(e){if(e===Is)throw Error(ce(174));return e}function Gc(e,t){switch(Ie(Ms,t),Ie(Ds,e),Ie(Nr,Is),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jl(t,e)}Ue(Nr),Ie(Nr,t)}function Aa(){Ue(Nr),Ue(Ds),Ue(Ms)}function ap(e){Bn(Ms.current);var t=Bn(Nr.current),r=Jl(t,e.type);t!==r&&(Ie(Ds,e),Ie(Nr,r))}function Jc(e){Ds.current===e&&(Ue(Nr),Ue(Ds))}var He=hn(0);function oo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yc=[];function Qc(){for(var e=0;e<Yc.length;e++)Yc[e]._workInProgressVersionPrimary=null;Yc.length=0}var lo=$r.ReactCurrentDispatcher,Xc=$r.ReactCurrentBatchConfig,Fn=0,We=null,it=null,dt=null,co=!1,$s=!1,Us=0,vx=0;function Nt(){throw Error(ce(321))}function Zc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lr(e[r],t[r]))return!1;return!0}function eu(e,t,r,n,a,s){if(Fn=s,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=e===null||e.memoizedState===null?_x:jx,e=r(n,a),$s){s=0;do{if($s=!1,Us=0,25<=s)throw Error(ce(301));s+=1,dt=it=null,t.updateQueue=null,lo.current=Nx,e=r(n,a)}while($s)}if(lo.current=ho,t=it!==null&&it.next!==null,Fn=0,dt=it=We=null,co=!1,t)throw Error(ce(300));return e}function tu(){var e=Us!==0;return Us=0,e}function Sr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?We.memoizedState=dt=e:dt=dt.next=e,dt}function nr(){if(it===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var t=dt===null?We.memoizedState:dt.next;if(t!==null)dt=t,it=e;else{if(e===null)throw Error(ce(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},dt===null?We.memoizedState=dt=e:dt=dt.next=e}return dt}function qs(e,t){return typeof t=="function"?t(e):t}function ru(e){var t=nr(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=it,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=o=null,c=null,h=s;do{var p=h.lane;if((Fn&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var d={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=d,o=n):c=c.next=d,We.lanes|=p,zn|=p}h=h.next}while(h!==null&&h!==s);c===null?o=n:c.next=l,lr(n,t.memoizedState)||($t=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do s=a.lane,We.lanes|=s,zn|=s,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nu(e){var t=nr(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a);lr(s,t.memoizedState)||($t=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function sp(){}function ip(e,t){var r=We,n=nr(),a=t(),s=!lr(n.memoizedState,a);if(s&&(n.memoizedState=a,$t=!0),n=n.queue,au(cp.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||dt!==null&&dt.memoizedState.tag&1){if(r.flags|=2048,Bs(9,lp.bind(null,r,n,a,t),void 0,null),ft===null)throw Error(ce(349));Fn&30||op(r,t,a)}return a}function op(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lp(e,t,r,n){t.value=r,t.getSnapshot=n,up(t)&&dp(e)}function cp(e,t,r){return r(function(){up(t)&&dp(e)})}function up(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lr(e,r)}catch(n){return!0}}function dp(e){var t=zr(e,1);t!==null&&hr(t,e,1,-1)}function fp(e){var t=Sr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},t.queue=e,e=e.dispatch=wx.bind(null,We,e),[t.memoizedState,e]}function Bs(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function hp(){return nr().memoizedState}function uo(e,t,r,n){var a=Sr();We.flags|=e,a.memoizedState=Bs(1|t,r,void 0,n===void 0?null:n)}function fo(e,t,r,n){var a=nr();n=n===void 0?null:n;var s=void 0;if(it!==null){var o=it.memoizedState;if(s=o.destroy,n!==null&&Zc(n,o.deps)){a.memoizedState=Bs(t,r,s,n);return}}We.flags|=e,a.memoizedState=Bs(1|t,r,s,n)}function pp(e,t){return uo(8390656,8,e,t)}function au(e,t){return fo(2048,8,e,t)}function mp(e,t){return fo(4,2,e,t)}function gp(e,t){return fo(4,4,e,t)}function yp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vp(e,t,r){return r=r!=null?r.concat([e]):null,fo(4,4,yp.bind(null,t,e),r)}function su(){}function xp(e,t){var r=nr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Zc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function bp(e,t){var r=nr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Zc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function wp(e,t,r){return Fn&21?(lr(r,t)||(r=Qf(),We.lanes|=r,zn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$t=!0),e.memoizedState=r)}function xx(e,t){var r=Pe;Pe=r!==0&&4>r?r:4,e(!0);var n=Xc.transition;Xc.transition={};try{e(!1),t()}finally{Pe=r,Xc.transition=n}}function _p(){return nr().memoizedState}function bx(e,t,r){var n=wn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},jp(e))Np(t,r);else if(r=ep(e,t,r,n),r!==null){var a=Ct();hr(r,e,n,a),Sp(r,t,n)}}function wx(e,t,r){var n=wn(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(jp(e))Np(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,lr(l,o)){var c=t.interleaved;c===null?(a.next=a,Wc(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch(h){}finally{}r=ep(e,t,a,n),r!==null&&(a=Ct(),hr(r,e,n,a),Sp(r,t,n))}}function jp(e){var t=e.alternate;return e===We||t!==null&&t===We}function Np(e,t){$s=co=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Sp(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,oc(e,r)}}var ho={readContext:rr,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},_x={readContext:rr,useCallback:function(e,t){return Sr().memoizedState=[e,t===void 0?null:t],e},useContext:rr,useEffect:pp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,uo(4194308,4,yp.bind(null,t,e),r)},useLayoutEffect:function(e,t){return uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return uo(4,2,e,t)},useMemo:function(e,t){var r=Sr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Sr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=bx.bind(null,We,e),[n.memoizedState,e]},useRef:function(e){var t=Sr();return e={current:e},t.memoizedState=e},useState:fp,useDebugValue:su,useDeferredValue:function(e){return Sr().memoizedState=e},useTransition:function(){var e=fp(!1),t=e[0];return e=xx.bind(null,e[1]),Sr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=We,a=Sr();if(Be){if(r===void 0)throw Error(ce(407));r=r()}else{if(r=t(),ft===null)throw Error(ce(349));Fn&30||op(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,pp(cp.bind(null,n,s,e),[e]),n.flags|=2048,Bs(9,lp.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Sr(),t=ft.identifierPrefix;if(Be){var r=Fr,n=Br;r=(n&~(1<<32-or(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Us++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=vx++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jx={readContext:rr,useCallback:xp,useContext:rr,useEffect:au,useImperativeHandle:vp,useInsertionEffect:mp,useLayoutEffect:gp,useMemo:bp,useReducer:ru,useRef:hp,useState:function(){return ru(qs)},useDebugValue:su,useDeferredValue:function(e){var t=nr();return wp(t,it.memoizedState,e)},useTransition:function(){var e=ru(qs)[0],t=nr().memoizedState;return[e,t]},useMutableSource:sp,useSyncExternalStore:ip,useId:_p,unstable_isNewReconciler:!1},Nx={readContext:rr,useCallback:xp,useContext:rr,useEffect:au,useImperativeHandle:vp,useInsertionEffect:mp,useLayoutEffect:gp,useMemo:bp,useReducer:nu,useRef:hp,useState:function(){return nu(qs)},useDebugValue:su,useDeferredValue:function(e){var t=nr();return it===null?t.memoizedState=e:wp(t,it.memoizedState,e)},useTransition:function(){var e=nu(qs)[0],t=nr().memoizedState;return[e,t]},useMutableSource:sp,useSyncExternalStore:ip,useId:_p,unstable_isNewReconciler:!1};function ur(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function iu(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ve({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var po={isMounted:function(e){return(e=e._reactInternals)?In(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ct(),a=wn(e),s=Vr(n,a);s.payload=t,r!=null&&(s.callback=r),t=yn(e,s,a),t!==null&&(hr(t,e,a,n),so(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ct(),a=wn(e),s=Vr(n,a);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=yn(e,s,a),t!==null&&(hr(t,e,a,n),so(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ct(),n=wn(e),a=Vr(r,n);a.tag=2,t!=null&&(a.callback=t),t=yn(e,a,n),t!==null&&(hr(t,e,n,r),so(t,e,n))}};function Ep(e,t,r,n,a,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!ks(r,n)||!ks(a,s):!0}function kp(e,t,r){var n=!1,a=pn,s=t.contextType;return typeof s=="object"&&s!==null?s=rr(s):(a=Mt(t)?Mn:jt.current,n=t.contextTypes,s=(n=n!=null)?ja(e,a):pn),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=po,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function Op(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function ou(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Kc(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=rr(s):(s=Mt(t)?Mn:jt.current,a.context=ja(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(iu(e,t,s,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&po.enqueueReplaceState(a,a.state,null),io(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ca(e,t){try{var r="",n=t;do r+=Xv(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function lu(e,t,r){return{value:e,source:null,stack:r!=null?r:null,digest:t!=null?t:null}}function cu(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Sx=typeof WeakMap=="function"?WeakMap:Map;function Tp(e,t,r){r=Vr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){wo||(wo=!0,Nu=n),cu(e,t)},r}function Ap(e,t,r){r=Vr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){cu(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){cu(e,t),typeof n!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Cp(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Sx;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Ux.bind(null,e,t,r),t.then(e,e))}function Pp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rp(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Vr(-1,1),t.tag=2,yn(r,t,1))),r.lanes|=1),e)}var Ex=$r.ReactCurrentOwner,$t=!1;function At(e,t,r,n){t.child=e===null?Zh(t,null,r,n):ka(t,e.child,r,n)}function Lp(e,t,r,n,a){r=r.render;var s=t.ref;return Ta(t,a),n=eu(e,t,r,n,s,a),r=tu(),e!==null&&!$t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hr(e,t,a)):(Be&&r&&Mc(t),t.flags|=1,At(e,t,n,a),t.child)}function Ip(e,t,r,n,a){if(e===null){var s=r.type;return typeof s=="function"&&!Cu(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,Dp(e,t,s,n,a)):(e=ko(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:ks,r(o,n)&&e.ref===t.ref)return Hr(e,t,a)}return t.flags|=1,e=jn(s,n),e.ref=t.ref,e.return=t,t.child=e}function Dp(e,t,r,n,a){if(e!==null){var s=e.memoizedProps;if(ks(s,n)&&e.ref===t.ref)if($t=!1,t.pendingProps=n=s,(e.lanes&a)!==0)e.flags&131072&&($t=!0);else return t.lanes=e.lanes,Hr(e,t,a)}return uu(e,t,r,n,a)}function Mp(e,t,r){var n=t.pendingProps,a=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Ra,Jt),Jt|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(Ra,Jt),Jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ie(Ra,Jt),Jt|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,Ie(Ra,Jt),Jt|=n;return At(e,t,a,r),t.child}function $p(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function uu(e,t,r,n,a){var s=Mt(r)?Mn:jt.current;return s=ja(t,s),Ta(t,a),r=eu(e,t,r,n,s,a),n=tu(),e!==null&&!$t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hr(e,t,a)):(Be&&n&&Mc(t),t.flags|=1,At(e,t,r,a),t.child)}function Up(e,t,r,n,a){if(Mt(r)){var s=!0;Qi(t)}else s=!1;if(Ta(t,a),t.stateNode===null)go(e,t),kp(t,r,n),ou(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=rr(h):(h=Mt(r)?Mn:jt.current,h=ja(t,h));var p=r.getDerivedStateFromProps,d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==h)&&Op(t,o,n,h),gn=!1;var u=t.memoizedState;o.state=u,io(t,n,o,a),c=t.memoizedState,l!==n||u!==c||Dt.current||gn?(typeof p=="function"&&(iu(t,r,p,n),c=t.memoizedState),(l=gn||Ep(t,r,l,n,u,c,h))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=h,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,tp(e,t),l=t.memoizedProps,h=t.type===t.elementType?l:ur(t.type,l),o.props=h,d=t.pendingProps,u=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=rr(c):(c=Mt(r)?Mn:jt.current,c=ja(t,c));var f=r.getDerivedStateFromProps;(p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||u!==c)&&Op(t,o,n,c),gn=!1,u=t.memoizedState,o.state=u,io(t,n,o,a);var x=t.memoizedState;l!==d||u!==x||Dt.current||gn?(typeof f=="function"&&(iu(t,r,f,n),x=t.memoizedState),(h=gn||Ep(t,r,h,n,u,x,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=h):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),n=!1)}return du(e,t,r,n,s,a)}function du(e,t,r,n,a,s){$p(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Vh(t,r,!1),Hr(e,t,s);n=t.stateNode,Ex.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ka(t,e.child,null,s),t.child=ka(t,null,l,s)):At(e,t,l,s),t.memoizedState=n.state,a&&Vh(t,r,!0),t.child}function qp(e){var t=e.stateNode;t.pendingContext?Fh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fh(e,t.context,!1),Gc(e,t.containerInfo)}function Bp(e,t,r,n,a){return Ea(),Bc(a),t.flags|=256,At(e,t,r,n),t.child}var fu={dehydrated:null,treeContext:null,retryLane:0};function hu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fp(e,t,r){var n=t.pendingProps,a=He.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ie(He,a&1),e===null)return qc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Oo(o,n,0,null),e=Kn(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=hu(r),t.memoizedState=fu,e):pu(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return kx(e,t,o,n,l,a,r);if(s){s=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=jn(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=jn(l,s):(s=Kn(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?hu(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=fu,n}return s=e.child,e=s.sibling,n=jn(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function pu(e,t){return t=Oo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mo(e,t,r,n){return n!==null&&Bc(n),ka(t,e.child,null,r),e=pu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kx(e,t,r,n,a,s,o){if(r)return t.flags&256?(t.flags&=-257,n=lu(Error(ce(422))),mo(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,a=t.mode,n=Oo({mode:"visible",children:n.children},a,0,null),s=Kn(s,a,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&ka(t,e.child,null,o),t.child.memoizedState=hu(o),t.memoizedState=fu,s);if(!(t.mode&1))return mo(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(ce(419)),n=lu(s,n,void 0),mo(e,t,o,n)}if(l=(o&e.childLanes)!==0,$t||l){if(n=ft,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,zr(e,a),hr(n,e,a,-1))}return Au(),n=lu(Error(ce(421))),mo(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=qx.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,Gt=fn(a.nextSibling),Kt=t,Be=!0,cr=null,e!==null&&(er[tr++]=Br,er[tr++]=Fr,er[tr++]=$n,Br=e.id,Fr=e.overflow,$n=t),t=pu(t,n.children),t.flags|=4096,t)}function zp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Hc(e.return,t,r)}function mu(e,t,r,n,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function Vp(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(At(e,t,n.children,r),n=He.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zp(e,r,t);else if(e.tag===19)zp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ie(He,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&oo(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),mu(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&oo(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}mu(t,!0,r,null,s);break;case"together":mu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function go(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,r=jn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=jn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ox(e,t,r){switch(t.tag){case 3:qp(t),Ea();break;case 5:ap(t);break;case 1:Mt(t.type)&&Qi(t);break;case 4:Gc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ie(no,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ie(He,He.current&1),t.flags|=128,null):r&t.child.childLanes?Fp(e,t,r):(Ie(He,He.current&1),e=Hr(e,t,r),e!==null?e.sibling:null);Ie(He,He.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Vp(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ie(He,He.current),n)break;return null;case 22:case 23:return t.lanes=0,Mp(e,t,r)}return Hr(e,t,r)}var Hp,gu,Wp,Kp;Hp=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},gu=function(){},Wp=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Bn(Nr.current);var s=null;switch(r){case"input":a=Hl(e,a),n=Hl(e,n),s=[];break;case"select":a=Ve({},a,{value:void 0}),n=Ve({},n,{value:void 0}),s=[];break;case"textarea":a=Gl(e,a),n=Gl(e,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Gi)}Yl(r,n);var o;r=null;for(h in a)if(!n.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var l=a[h];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(is.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var c=n[h];if(l=a!=null?a[h]:void 0,n.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(h,r)),r=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(is.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&$e("scroll",e),s||l===c||(s=[])):(s=s||[]).push(h,c))}r&&(s=s||[]).push("style",r);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Kp=function(e,t,r,n){r!==n&&(t.flags|=4)};function Fs(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Tx(e,t,r){var n=t.pendingProps;switch($c(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return Mt(t.type)&&Yi(),St(t),null;case 3:return n=t.stateNode,Aa(),Ue(Dt),Ue(jt),Qc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(to(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cr!==null&&(ku(cr),cr=null))),gu(e,t),St(t),null;case 5:Jc(t);var a=Bn(Ms.current);if(r=t.type,e!==null&&t.stateNode!=null)Wp(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ce(166));return St(t),null}if(e=Bn(Nr.current),to(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[jr]=t,n[Ps]=s,e=(t.mode&1)!==0,r){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(a=0;a<Ts.length;a++)$e(Ts[a],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":kf(n,s),$e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},$e("invalid",n);break;case"textarea":Af(n,s),$e("invalid",n)}Yl(r,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ki(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ki(n.textContent,l,e),a=["children",""+l]):is.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$e("scroll",n)}switch(r){case"input":Ni(n),Tf(n,s,!0);break;case"textarea":Ni(n),Pf(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Gi)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Rf(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[jr]=t,e[Ps]=n,Hp(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ql(r,n),r){case"dialog":$e("cancel",e),$e("close",e),a=n;break;case"iframe":case"object":case"embed":$e("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ts.length;a++)$e(Ts[a],e);a=n;break;case"source":$e("error",e),a=n;break;case"img":case"image":case"link":$e("error",e),$e("load",e),a=n;break;case"details":$e("toggle",e),a=n;break;case"input":kf(e,n),a=Hl(e,n),$e("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ve({},n,{value:void 0}),$e("invalid",e);break;case"textarea":Af(e,n),a=Gl(e,n),$e("invalid",e);break;default:a=n}Yl(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Df(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lf(e,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&us(e,c):typeof c=="number"&&us(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(is.hasOwnProperty(s)?c!=null&&s==="onScroll"&&$e("scroll",e):c!=null&&Ll(e,s,c,o))}switch(r){case"input":Ni(e),Tf(e,n,!1);break;case"textarea":Ni(e),Pf(e);break;case"option":n.value!=null&&e.setAttribute("value",""+an(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?da(e,!!n.multiple,s,!1):n.defaultValue!=null&&da(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Gi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)Kp(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ce(166));if(r=Bn(Ms.current),Bn(Nr.current),to(t)){if(n=t.stateNode,r=t.memoizedProps,n[jr]=t,(s=n.nodeValue!==r)&&(e=Kt,e!==null))switch(e.tag){case 3:Ki(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ki(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[jr]=t,t.stateNode=n}return St(t),null;case 13:if(Ue(He),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Be&&Gt!==null&&t.mode&1&&!(t.flags&128))Yh(),Ea(),t.flags|=98560,s=!1;else if(s=to(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(ce(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ce(317));s[jr]=t}else Ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;St(t),s=!1}else cr!==null&&(ku(cr),cr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?ot===0&&(ot=3):Au())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return Aa(),gu(e,t),e===null&&As(t.stateNode.containerInfo),St(t),null;case 10:return Vc(t.type._context),St(t),null;case 17:return Mt(t.type)&&Yi(),St(t),null;case 19:if(Ue(He),s=t.memoizedState,s===null)return St(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)Fs(s,!1);else{if(ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=oo(e),o!==null){for(t.flags|=128,Fs(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ie(He,He.current&1|2),t.child}e=e.sibling}s.tail!==null&&et()>La&&(t.flags|=128,n=!0,Fs(s,!1),t.lanes=4194304)}else{if(!n)if(e=oo(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Fs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Be)return St(t),null}else 2*et()-s.renderingStartTime>La&&r!==1073741824&&(t.flags|=128,n=!0,Fs(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=et(),t.sibling=null,r=He.current,Ie(He,n?r&1|2:r&1),t):(St(t),null);case 22:case 23:return Tu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Jt&1073741824&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function Ax(e,t){switch($c(t),t.tag){case 1:return Mt(t.type)&&Yi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Aa(),Ue(Dt),Ue(jt),Qc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Jc(t),null;case 13:if(Ue(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(He),null;case 4:return Aa(),null;case 10:return Vc(t.type._context),null;case 22:case 23:return Tu(),null;case 24:return null;default:return null}}var yo=!1,Et=!1,Cx=typeof WeakSet=="function"?WeakSet:Set,me=null;function Pa(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Je(e,t,n)}else r.current=null}function yu(e,t,r){try{r()}catch(n){Je(e,t,n)}}var Gp=!1;function Px(e,t){if(Tc=Di,e=Eh(),wc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(v){r=null;break e}var o=0,l=-1,c=-1,h=0,p=0,d=e,u=null;t:for(;;){for(var f;d!==r||a!==0&&d.nodeType!==3||(l=o+a),d!==s||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)u=d,d=f;for(;;){if(d===e)break t;if(u===r&&++h===a&&(l=o),u===s&&++p===n&&(c=o),(f=d.nextSibling)!==null)break;d=u,u=d.parentNode}d=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ac={focusedElem:e,selectionRange:r},Di=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,w=x.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?b:ur(t.type,b),w);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(v){Je(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return x=Gp,Gp=!1,x}function zs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&yu(t,r,s)}a=a.next}while(a!==n)}}function vo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function vu(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Jp(e){var t=e.alternate;t!==null&&(e.alternate=null,Jp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jr],delete t[Ps],delete t[Lc],delete t[px],delete t[mx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Yp(e){return e.tag===5||e.tag===3||e.tag===4}function Qp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Gi));else if(n!==4&&(e=e.child,e!==null))for(xu(e,t,r),e=e.sibling;e!==null;)xu(e,t,r),e=e.sibling}function bu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(bu(e,t,r),e=e.sibling;e!==null;)bu(e,t,r),e=e.sibling}var gt=null,dr=!1;function vn(e,t,r){for(r=r.child;r!==null;)Xp(e,t,r),r=r.sibling}function Xp(e,t,r){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(Ai,r)}catch(l){}switch(r.tag){case 5:Et||Pa(r,t);case 6:var n=gt,a=dr;gt=null,vn(e,t,r),gt=n,dr=a,gt!==null&&(dr?(e=gt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):gt.removeChild(r.stateNode));break;case 18:gt!==null&&(dr?(e=gt,r=r.stateNode,e.nodeType===8?Rc(e.parentNode,r):e.nodeType===1&&Rc(e,r),ws(e)):Rc(gt,r.stateNode));break;case 4:n=gt,a=dr,gt=r.stateNode.containerInfo,dr=!0,vn(e,t,r),gt=n,dr=a;break;case 0:case 11:case 14:case 15:if(!Et&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&yu(r,t,o),a=a.next}while(a!==n)}vn(e,t,r);break;case 1:if(!Et&&(Pa(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Je(r,t,l)}vn(e,t,r);break;case 21:vn(e,t,r);break;case 22:r.mode&1?(Et=(n=Et)||r.memoizedState!==null,vn(e,t,r),Et=n):vn(e,t,r);break;default:vn(e,t,r)}}function Zp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Cx),t.forEach(function(n){var a=Bx.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function fr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:gt=l.stateNode,dr=!1;break e;case 3:gt=l.stateNode.containerInfo,dr=!0;break e;case 4:gt=l.stateNode.containerInfo,dr=!0;break e}l=l.return}if(gt===null)throw Error(ce(160));Xp(s,o,a),gt=null,dr=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(h){Je(a,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)em(t,e),t=t.sibling}function em(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fr(t,e),Er(e),n&4){try{zs(3,e,e.return),vo(3,e)}catch(b){Je(e,e.return,b)}try{zs(5,e,e.return)}catch(b){Je(e,e.return,b)}}break;case 1:fr(t,e),Er(e),n&512&&r!==null&&Pa(r,r.return);break;case 5:if(fr(t,e),Er(e),n&512&&r!==null&&Pa(r,r.return),e.flags&32){var a=e.stateNode;try{us(a,"")}catch(b){Je(e,e.return,b)}}if(n&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Of(a,s),Ql(l,o);var h=Ql(l,s);for(o=0;o<c.length;o+=2){var p=c[o],d=c[o+1];p==="style"?Df(a,d):p==="dangerouslySetInnerHTML"?Lf(a,d):p==="children"?us(a,d):Ll(a,p,d,h)}switch(l){case"input":Wl(a,s);break;case"textarea":Cf(a,s);break;case"select":var u=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?da(a,!!s.multiple,f,!1):u!==!!s.multiple&&(s.defaultValue!=null?da(a,!!s.multiple,s.defaultValue,!0):da(a,!!s.multiple,s.multiple?[]:"",!1))}a[Ps]=s}catch(b){Je(e,e.return,b)}}break;case 6:if(fr(t,e),Er(e),n&4){if(e.stateNode===null)throw Error(ce(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(b){Je(e,e.return,b)}}break;case 3:if(fr(t,e),Er(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ws(t.containerInfo)}catch(b){Je(e,e.return,b)}break;case 4:fr(t,e),Er(e);break;case 13:fr(t,e),Er(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(ju=et())),n&4&&Zp(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(Et=(h=Et)||p,fr(t,e),Et=h):fr(t,e),Er(e),n&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!p&&e.mode&1)for(me=e,p=e.child;p!==null;){for(d=me=p;me!==null;){switch(u=me,f=u.child,u.tag){case 0:case 11:case 14:case 15:zs(4,u,u.return);break;case 1:Pa(u,u.return);var x=u.stateNode;if(typeof x.componentWillUnmount=="function"){n=u,r=u.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(b){Je(n,r,b)}}break;case 5:Pa(u,u.return);break;case 22:if(u.memoizedState!==null){nm(d);continue}}f!==null?(f.return=u,me=f):nm(d)}p=p.sibling}e:for(p=null,d=e;;){if(d.tag===5){if(p===null){p=d;try{a=d.stateNode,h?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=If("display",o))}catch(b){Je(e,e.return,b)}}}else if(d.tag===6){if(p===null)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(b){Je(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fr(t,e),Er(e),n&4&&Zp(e);break;case 21:break;default:fr(t,e),Er(e)}}function Er(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Yp(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(us(a,""),n.flags&=-33);var s=Qp(e);bu(e,s,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Qp(e);xu(e,l,o);break;default:throw Error(ce(161))}}catch(c){Je(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rx(e,t,r){me=e,tm(e)}function tm(e,t,r){for(var n=(e.mode&1)!==0;me!==null;){var a=me,s=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||yo;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Et;l=yo;var h=Et;if(yo=o,(Et=c)&&!h)for(me=a;me!==null;)o=me,c=o.child,o.tag===22&&o.memoizedState!==null?am(a):c!==null?(c.return=o,me=c):am(a);for(;s!==null;)me=s,tm(s),s=s.sibling;me=a,yo=l,Et=h}rm(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,me=s):rm(e)}}function rm(e){for(;me!==null;){var t=me;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Et||vo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Et)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ur(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&np(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}np(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var d=p.dehydrated;d!==null&&ws(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Et||t.flags&512&&vu(t)}catch(u){Je(t,t.return,u)}}if(t===e){me=null;break}if(r=t.sibling,r!==null){r.return=t.return,me=r;break}me=t.return}}function nm(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var r=t.sibling;if(r!==null){r.return=t.return,me=r;break}me=t.return}}function am(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vo(4,t)}catch(c){Je(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Je(t,a,c)}}var s=t.return;try{vu(t)}catch(c){Je(t,s,c)}break;case 5:var o=t.return;try{vu(t)}catch(c){Je(t,o,c)}}}catch(c){Je(t,t.return,c)}if(t===e){me=null;break}var l=t.sibling;if(l!==null){l.return=t.return,me=l;break}me=t.return}}var Lx=Math.ceil,xo=$r.ReactCurrentDispatcher,wu=$r.ReactCurrentOwner,ar=$r.ReactCurrentBatchConfig,Ce=0,ft=null,tt=null,yt=0,Jt=0,Ra=hn(0),ot=0,Vs=null,zn=0,bo=0,_u=0,Hs=null,Ut=null,ju=0,La=1/0,Wr=null,wo=!1,Nu=null,xn=null,_o=!1,bn=null,jo=0,Ws=0,Su=null,No=-1,So=0;function Ct(){return Ce&6?et():No!==-1?No:No=et()}function wn(e){return e.mode&1?Ce&2&&yt!==0?yt&-yt:yx.transition!==null?(So===0&&(So=Qf()),So):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:ih(e.type)),e):1}function hr(e,t,r,n){if(50<Ws)throw Ws=0,Su=null,Error(ce(185));gs(e,r,n),(!(Ce&2)||e!==ft)&&(e===ft&&(!(Ce&2)&&(bo|=r),ot===4&&_n(e,yt)),qt(e,n),r===1&&Ce===0&&!(t.mode&1)&&(La=et()+500,Xi&&mn()))}function qt(e,t){var r=e.callbackNode;y0(e,t);var n=Ri(e,e===ft?yt:0);if(n===0)r!==null&&Gf(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Gf(r),t===1)e.tag===0?gx(im.bind(null,e)):Hh(im.bind(null,e)),fx(function(){!(Ce&6)&&mn()}),r=null;else{switch(Xf(n)){case 1:r=ac;break;case 4:r=Jf;break;case 16:r=Ti;break;case 536870912:r=Yf;break;default:r=Ti}r=pm(r,sm.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sm(e,t){if(No=-1,So=0,Ce&6)throw Error(ce(327));var r=e.callbackNode;if(Ia()&&e.callbackNode!==r)return null;var n=Ri(e,e===ft?yt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Eo(e,n);else{t=n;var a=Ce;Ce|=2;var s=lm();(ft!==e||yt!==t)&&(Wr=null,La=et()+500,Hn(e,t));do try{Mx();break}catch(l){om(e,l)}while(!0);zc(),xo.current=s,Ce=a,tt!==null?t=0:(ft=null,yt=0,t=ot)}if(t!==0){if(t===2&&(a=sc(e),a!==0&&(n=a,t=Eu(e,a))),t===1)throw r=Vs,Hn(e,0),_n(e,n),qt(e,et()),r;if(t===6)_n(e,n);else{if(a=e.current.alternate,!(n&30)&&!Ix(a)&&(t=Eo(e,n),t===2&&(s=sc(e),s!==0&&(n=s,t=Eu(e,s))),t===1))throw r=Vs,Hn(e,0),_n(e,n),qt(e,et()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ce(345));case 2:Wn(e,Ut,Wr);break;case 3:if(_n(e,n),(n&130023424)===n&&(t=ju+500-et(),10<t)){if(Ri(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ct(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Pc(Wn.bind(null,e,Ut,Wr),t);break}Wn(e,Ut,Wr);break;case 4:if(_n(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-or(n);s=1<<o,o=t[o],o>a&&(a=o),n&=~s}if(n=a,n=et()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Lx(n/1960))-n,10<n){e.timeoutHandle=Pc(Wn.bind(null,e,Ut,Wr),n);break}Wn(e,Ut,Wr);break;case 5:Wn(e,Ut,Wr);break;default:throw Error(ce(329))}}}return qt(e,et()),e.callbackNode===r?sm.bind(null,e):null}function Eu(e,t){var r=Hs;return e.current.memoizedState.isDehydrated&&(Hn(e,t).flags|=256),e=Eo(e,t),e!==2&&(t=Ut,Ut=r,t!==null&&ku(t)),e}function ku(e){Ut===null?Ut=e:Ut.push.apply(Ut,e)}function Ix(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!lr(s(),a))return!1}catch(o){return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _n(e,t){for(t&=~_u,t&=~bo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-or(t),n=1<<r;e[r]=-1,t&=~n}}function im(e){if(Ce&6)throw Error(ce(327));Ia();var t=Ri(e,0);if(!(t&1))return qt(e,et()),null;var r=Eo(e,t);if(e.tag!==0&&r===2){var n=sc(e);n!==0&&(t=n,r=Eu(e,n))}if(r===1)throw r=Vs,Hn(e,0),_n(e,t),qt(e,et()),r;if(r===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wn(e,Ut,Wr),qt(e,et()),null}function Ou(e,t){var r=Ce;Ce|=1;try{return e(t)}finally{Ce=r,Ce===0&&(La=et()+500,Xi&&mn())}}function Vn(e){bn!==null&&bn.tag===0&&!(Ce&6)&&Ia();var t=Ce;Ce|=1;var r=ar.transition,n=Pe;try{if(ar.transition=null,Pe=1,e)return e()}finally{Pe=n,ar.transition=r,Ce=t,!(Ce&6)&&mn()}}function Tu(){Jt=Ra.current,Ue(Ra)}function Hn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,dx(r)),tt!==null)for(r=tt.return;r!==null;){var n=r;switch($c(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Yi();break;case 3:Aa(),Ue(Dt),Ue(jt),Qc();break;case 5:Jc(n);break;case 4:Aa();break;case 13:Ue(He);break;case 19:Ue(He);break;case 10:Vc(n.type._context);break;case 22:case 23:Tu()}r=r.return}if(ft=e,tt=e=jn(e.current,null),yt=Jt=t,ot=0,Vs=null,_u=bo=zn=0,Ut=Hs=null,qn!==null){for(t=0;t<qn.length;t++)if(r=qn[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=a,n.next=o}r.pending=n}qn=null}return e}function om(e,t){do{var r=tt;try{if(zc(),lo.current=ho,co){for(var n=We.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}co=!1}if(Fn=0,dt=it=We=null,$s=!1,Us=0,wu.current=null,r===null||r.return===null){ot=1,Vs=t,tt=null;break}e:{var s=e,o=r.return,l=r,c=t;if(t=yt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,d=p.tag;if(!(p.mode&1)&&(d===0||d===11||d===15)){var u=p.alternate;u?(p.updateQueue=u.updateQueue,p.memoizedState=u.memoizedState,p.lanes=u.lanes):(p.updateQueue=null,p.memoizedState=null)}var f=Pp(o);if(f!==null){f.flags&=-257,Rp(f,o,l,s,t),f.mode&1&&Cp(s,h,t),t=f,c=h;var x=t.updateQueue;if(x===null){var b=new Set;b.add(c),t.updateQueue=b}else x.add(c);break e}else{if(!(t&1)){Cp(s,h,t),Au();break e}c=Error(ce(426))}}else if(Be&&l.mode&1){var w=Pp(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Rp(w,o,l,s,t),Bc(Ca(c,l));break e}}s=c=Ca(c,l),ot!==4&&(ot=2),Hs===null?Hs=[s]:Hs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=Tp(s,c,t);rp(s,g);break e;case 1:l=c;var m=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(xn===null||!xn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var v=Ap(s,l,t);rp(s,v);break e}}s=s.return}while(s!==null)}um(r)}catch(_){t=_,tt===r&&r!==null&&(tt=r=r.return);continue}break}while(!0)}function lm(){var e=xo.current;return xo.current=ho,e===null?ho:e}function Au(){(ot===0||ot===3||ot===2)&&(ot=4),ft===null||!(zn&268435455)&&!(bo&268435455)||_n(ft,yt)}function Eo(e,t){var r=Ce;Ce|=2;var n=lm();(ft!==e||yt!==t)&&(Wr=null,Hn(e,t));do try{Dx();break}catch(a){om(e,a)}while(!0);if(zc(),Ce=r,xo.current=n,tt!==null)throw Error(ce(261));return ft=null,yt=0,ot}function Dx(){for(;tt!==null;)cm(tt)}function Mx(){for(;tt!==null&&!l0();)cm(tt)}function cm(e){var t=hm(e.alternate,e,Jt);e.memoizedProps=e.pendingProps,t===null?um(e):tt=t,wu.current=null}function um(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ax(r,t),r!==null){r.flags&=32767,tt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ot=6,tt=null;return}}else if(r=Tx(r,t,Jt),r!==null){tt=r;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);ot===0&&(ot=5)}function Wn(e,t,r){var n=Pe,a=ar.transition;try{ar.transition=null,Pe=1,$x(e,t,r,n)}finally{ar.transition=a,Pe=n}return null}function $x(e,t,r,n){do Ia();while(bn!==null);if(Ce&6)throw Error(ce(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(v0(e,s),e===ft&&(tt=ft=null,yt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_o||(_o=!0,pm(Ti,function(){return Ia(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=ar.transition,ar.transition=null;var o=Pe;Pe=1;var l=Ce;Ce|=4,wu.current=null,Px(e,r),em(r,e),ax(Ac),Di=!!Tc,Ac=Tc=null,e.current=r,Rx(r),c0(),Ce=l,Pe=o,ar.transition=s}else e.current=r;if(_o&&(_o=!1,bn=e,jo=a),s=e.pendingLanes,s===0&&(xn=null),f0(r.stateNode),qt(e,et()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(wo)throw wo=!1,e=Nu,Nu=null,e;return jo&1&&e.tag!==0&&Ia(),s=e.pendingLanes,s&1?e===Su?Ws++:(Ws=0,Su=e):Ws=0,mn(),null}function Ia(){if(bn!==null){var e=Xf(jo),t=ar.transition,r=Pe;try{if(ar.transition=null,Pe=16>e?16:e,bn===null)var n=!1;else{if(e=bn,bn=null,jo=0,Ce&6)throw Error(ce(331));var a=Ce;for(Ce|=4,me=e.current;me!==null;){var s=me,o=s.child;if(me.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(me=h;me!==null;){var p=me;switch(p.tag){case 0:case 11:case 15:zs(8,p,s)}var d=p.child;if(d!==null)d.return=p,me=d;else for(;me!==null;){p=me;var u=p.sibling,f=p.return;if(Jp(p),p===h){me=null;break}if(u!==null){u.return=f,me=u;break}me=f}}}var x=s.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}me=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,me=o;else e:for(;me!==null;){if(s=me,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zs(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,me=g;break e}me=s.return}}var m=e.current;for(me=m;me!==null;){o=me;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,me=y;else e:for(o=m;me!==null;){if(l=me,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vo(9,l)}}catch(_){Je(l,l.return,_)}if(l===o){me=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,me=v;break e}me=l.return}}if(Ce=a,mn(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(Ai,e)}catch(_){}n=!0}return n}finally{Pe=r,ar.transition=t}}return!1}function dm(e,t,r){t=Ca(r,t),t=Tp(e,t,1),e=yn(e,t,1),t=Ct(),e!==null&&(gs(e,1,t),qt(e,t))}function Je(e,t,r){if(e.tag===3)dm(e,e,r);else for(;t!==null;){if(t.tag===3){dm(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xn===null||!xn.has(n))){e=Ca(r,e),e=Ap(t,e,1),t=yn(t,e,1),e=Ct(),t!==null&&(gs(t,1,e),qt(t,e));break}}t=t.return}}function Ux(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ct(),e.pingedLanes|=e.suspendedLanes&r,ft===e&&(yt&r)===r&&(ot===4||ot===3&&(yt&130023424)===yt&&500>et()-ju?Hn(e,0):_u|=r),qt(e,t)}function fm(e,t){t===0&&(e.mode&1?(t=Pi,Pi<<=1,!(Pi&130023424)&&(Pi=4194304)):t=1);var r=Ct();e=zr(e,t),e!==null&&(gs(e,t,r),qt(e,r))}function qx(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),fm(e,r)}function Bx(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(t),fm(e,r)}var hm;hm=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dt.current)$t=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return $t=!1,Ox(e,t,r);$t=!!(e.flags&131072)}else $t=!1,Be&&t.flags&1048576&&Wh(t,eo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;go(e,t),e=t.pendingProps;var a=ja(t,jt.current);Ta(t,r),a=eu(null,t,n,e,a,r);var s=tu();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(n)?(s=!0,Qi(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Kc(t),a.updater=po,t.stateNode=a,a._reactInternals=t,ou(t,n,e,r),t=du(null,t,n,!0,s,r)):(t.tag=0,Be&&s&&Mc(t),At(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(go(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=zx(n),e=ur(n,e),a){case 0:t=uu(null,t,n,e,r);break e;case 1:t=Up(null,t,n,e,r);break e;case 11:t=Lp(null,t,n,e,r);break e;case 14:t=Ip(null,t,n,ur(n.type,e),r);break e}throw Error(ce(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ur(n,a),uu(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ur(n,a),Up(e,t,n,a,r);case 3:e:{if(qp(t),e===null)throw Error(ce(387));n=t.pendingProps,s=t.memoizedState,a=s.element,tp(e,t),io(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=Ca(Error(ce(423)),t),t=Bp(e,t,n,r,a);break e}else if(n!==a){a=Ca(Error(ce(424)),t),t=Bp(e,t,n,r,a);break e}else for(Gt=fn(t.stateNode.containerInfo.firstChild),Kt=t,Be=!0,cr=null,r=Zh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ea(),n===a){t=Hr(e,t,r);break e}At(e,t,n,r)}t=t.child}return t;case 5:return ap(t),e===null&&qc(t),n=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,o=a.children,Cc(n,a)?o=null:s!==null&&Cc(n,s)&&(t.flags|=32),$p(e,t),At(e,t,o,r),t.child;case 6:return e===null&&qc(t),null;case 13:return Fp(e,t,r);case 4:return Gc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ka(t,null,n,r):At(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ur(n,a),Lp(e,t,n,a,r);case 7:return At(e,t,t.pendingProps,r),t.child;case 8:return At(e,t,t.pendingProps.children,r),t.child;case 12:return At(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Ie(no,n._currentValue),n._currentValue=o,s!==null)if(lr(s.value,o)){if(s.children===a.children&&!Dt.current){t=Hr(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Vr(-1,r&-r),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Hc(s.return,r,t),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ce(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Hc(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}At(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ta(t,r),a=rr(a),n=n(a),t.flags|=1,At(e,t,n,r),t.child;case 14:return n=t.type,a=ur(n,t.pendingProps),a=ur(n.type,a),Ip(e,t,n,a,r);case 15:return Dp(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ur(n,a),go(e,t),t.tag=1,Mt(n)?(e=!0,Qi(t)):e=!1,Ta(t,r),kp(t,n,a),ou(t,n,a,r),du(null,t,n,!0,e,r);case 19:return Vp(e,t,r);case 22:return Mp(e,t,r)}throw Error(ce(156,t.tag))};function pm(e,t){return Kf(e,t)}function Fx(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(e,t,r,n){return new Fx(e,t,r,n)}function Cu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zx(e){if(typeof e=="function")return Cu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ml)return 11;if(e===ql)return 14}return 2}function jn(e,t){var r=e.alternate;return r===null?(r=sr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ko(e,t,r,n,a,s){var o=2;if(n=e,typeof e=="function")Cu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ua:return Kn(r.children,a,s,t);case Il:o=8,a|=8;break;case Dl:return e=sr(12,r,t,a|2),e.elementType=Dl,e.lanes=s,e;case $l:return e=sr(13,r,t,a),e.elementType=$l,e.lanes=s,e;case Ul:return e=sr(19,r,t,a),e.elementType=Ul,e.lanes=s,e;case jf:return Oo(r,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wf:o=10;break e;case _f:o=9;break e;case Ml:o=11;break e;case ql:o=14;break e;case nn:o=16,n=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=sr(o,r,t,a),t.elementType=e,t.type=n,t.lanes=s,t}function Kn(e,t,r,n){return e=sr(7,e,n,t),e.lanes=r,e}function Oo(e,t,r,n){return e=sr(22,e,n,t),e.elementType=jf,e.lanes=r,e.stateNode={isHidden:!1},e}function Pu(e,t,r){return e=sr(6,e,null,t),e.lanes=r,e}function Ru(e,t,r){return t=sr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vx(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ic(0),this.expirationTimes=ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Lu(e,t,r,n,a,s,o,l,c){return e=new Vx(e,t,r,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=sr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kc(s),e}function Hx(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ca,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function mm(e){if(!e)return pn;e=e._reactInternals;e:{if(In(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var r=e.type;if(Mt(r))return zh(e,r,t)}return t}function gm(e,t,r,n,a,s,o,l,c){return e=Lu(r,n,!0,e,a,s,o,l,c),e.context=mm(null),r=e.current,n=Ct(),a=wn(r),s=Vr(n,a),s.callback=t!=null?t:null,yn(r,s,a),e.current.lanes=a,gs(e,a,n),qt(e,n),e}function To(e,t,r,n){var a=t.current,s=Ct(),o=wn(a);return r=mm(r),t.context===null?t.context=r:t.pendingContext=r,t=Vr(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=yn(a,t,o),e!==null&&(hr(e,a,o,s),so(e,a,o)),o}function Ao(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ym(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Iu(e,t){ym(e,t),(e=e.alternate)&&ym(e,t)}function Wx(){return null}var vm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Du(e){this._internalRoot=e}Co.prototype.render=Du.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));To(e,t,null,null)},Co.prototype.unmount=Du.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vn(function(){To(null,e,null,null)}),t[Ur]=null}};function Co(e){this._internalRoot=e}Co.prototype.unstable_scheduleHydration=function(e){if(e){var t=th();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cn.length&&t!==0&&t<cn[r].priority;r++);cn.splice(r,0,e),r===0&&ah(e)}};function Mu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Po(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xm(){}function Kx(e,t,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var h=Ao(o);s.call(h)}}var o=gm(t,n,e,0,null,!1,!1,"",xm);return e._reactRootContainer=o,e[Ur]=o.current,As(e.nodeType===8?e.parentNode:e),Vn(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var h=Ao(c);l.call(h)}}var c=Lu(e,0,!1,null,null,!1,!1,"",xm);return e._reactRootContainer=c,e[Ur]=c.current,As(e.nodeType===8?e.parentNode:e),Vn(function(){To(t,c,r,n)}),c}function Ro(e,t,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=Ao(o);l.call(c)}}To(t,o,e,a)}else o=Kx(r,t,e,a,n);return Ao(o)}Zf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ms(t.pendingLanes);r!==0&&(oc(t,r|1),qt(t,et()),!(Ce&6)&&(La=et()+500,mn()))}break;case 13:Vn(function(){var n=zr(e,1);if(n!==null){var a=Ct();hr(n,e,1,a)}}),Iu(e,1)}},lc=function(e){if(e.tag===13){var t=zr(e,134217728);if(t!==null){var r=Ct();hr(t,e,134217728,r)}Iu(e,134217728)}},eh=function(e){if(e.tag===13){var t=wn(e),r=zr(e,t);if(r!==null){var n=Ct();hr(r,e,t,n)}Iu(e,t)}},th=function(){return Pe},rh=function(e,t){var r=Pe;try{return Pe=e,t()}finally{Pe=r}},ec=function(e,t,r){switch(t){case"input":if(Wl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Ji(n);if(!a)throw Error(ce(90));Ef(n),Wl(n,a)}}}break;case"textarea":Cf(e,r);break;case"select":t=r.value,t!=null&&da(e,!!r.multiple,t,!1)}},qf=Ou,Bf=Vn;var Gx={usingClientEntryPoint:!1,Events:[Rs,wa,Ji,$f,Uf,Ou]},Ks={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jx={bundleType:Ks.bundleType,version:Ks.version,rendererPackageName:Ks.rendererPackageName,rendererConfig:Ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hf(e),e===null?null:e.stateNode},findFiberByHostInstance:Ks.findFiberByHostInstance||Wx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lo.isDisabled&&Lo.supportsFiber)try{Ai=Lo.inject(Jx),_r=Lo}catch(e){}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx,Vt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mu(t))throw Error(ce(200));return Hx(e,t,null,r)},Vt.createRoot=function(e,t){if(!Mu(e))throw Error(ce(299));var r=!1,n="",a=vm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Lu(e,1,!1,null,null,r,!1,n,a),e[Ur]=t.current,As(e.nodeType===8?e.parentNode:e),new Du(t)},Vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=Hf(t),e=e===null?null:e.stateNode,e},Vt.flushSync=function(e){return Vn(e)},Vt.hydrate=function(e,t,r){if(!Po(t))throw Error(ce(200));return Ro(null,e,t,!0,r)},Vt.hydrateRoot=function(e,t,r){if(!Mu(e))throw Error(ce(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",o=vm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=gm(t,null,e,1,r!=null?r:null,a,!1,s,o),e[Ur]=t.current,As(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Co(t)},Vt.render=function(e,t,r){if(!Po(t))throw Error(ce(200));return Ro(null,e,t,!1,r)},Vt.unmountComponentAtNode=function(e){if(!Po(e))throw Error(ce(40));return e._reactRootContainer?(Vn(function(){Ro(null,null,e,!1,function(){e._reactRootContainer=null,e[Ur]=null})}),!0):!1},Vt.unstable_batchedUpdates=Ou,Vt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Po(r))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return Ro(e,t,r,!1,n)},Vt.version="18.3.1-next-f1338f8080-20240426";function bm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bm)}catch(e){console.error(e)}}bm(),mf.exports=Vt;var wm=mf.exports,_m=wm;Al.createRoot=_m.createRoot,Al.hydrateRoot=_m.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gs(){return Gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gs.apply(this,arguments)}var Nn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nn||(Nn={}));const jm="popstate";function Yx(e){e===void 0&&(e={});function t(n,a){let{pathname:s,search:o,hash:l}=n.location;return Uu("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Sm(a)}return Xx(t,r,null,e)}function rt(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function $u(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch(r){}}}function Qx(){return Math.random().toString(36).substr(2,8)}function Nm(e,t){return{usr:e.state,key:e.key,idx:t}}function Uu(e,t,r,n){return r===void 0&&(r=null),Gs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Da(t):t,{state:r,key:t&&t.key||n||Qx()})}function Sm(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Da(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Xx(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,l=Nn.Pop,c=null,h=p();h==null&&(h=0,o.replaceState(Gs({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function d(){l=Nn.Pop;let w=p(),g=w==null?null:w-h;h=w,c&&c({action:l,location:b.location,delta:g})}function u(w,g){l=Nn.Push;let m=Uu(b.location,w,g);h=p()+1;let y=Nm(m,h),v=b.createHref(m);try{o.pushState(y,"",v)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(v)}s&&c&&c({action:l,location:b.location,delta:1})}function f(w,g){l=Nn.Replace;let m=Uu(b.location,w,g);h=p();let y=Nm(m,h),v=b.createHref(m);o.replaceState(y,"",v),s&&c&&c({action:l,location:b.location,delta:0})}function x(w){let g=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof w=="string"?w:Sm(w);return m=m.replace(/ $/,"%20"),rt(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let b={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(jm,d),c=w,()=>{a.removeEventListener(jm,d),c=null}},createHref(w){return t(a,w)},createURL:x,encodeLocation(w){let g=x(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:u,replace:f,go(w){return o.go(w)}};return b}var Em;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Em||(Em={}));function Zx(e,t,r){return r===void 0&&(r="/"),eb(e,t,r)}function eb(e,t,r,n){let a=typeof t=="string"?Da(t):t,s=Am(a.pathname||"/",r);if(s==null)return null;let o=km(e);tb(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let h=hb(s);l=ub(o[c],h)}return l}function km(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(rt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let h=Gn([n,c.relativePath]),p=r.concat(c);s.children&&s.children.length>0&&(rt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),km(s.children,t,p,h)),!(s.path==null&&!s.index)&&t.push({path:h,score:lb(h,s.index),routesMeta:p})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of Om(s.path))a(s,o,c)}),t}function Om(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=Om(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function tb(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:cb(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const rb=/^:[\w-]+$/,nb=3,ab=2,sb=1,ib=10,ob=-2,Tm=e=>e==="*";function lb(e,t){let r=e.split("/"),n=r.length;return r.some(Tm)&&(n+=ob),t&&(n+=ab),r.filter(a=>!Tm(a)).reduce((a,s)=>a+(rb.test(s)?nb:s===""?sb:ib),n)}function cb(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function ub(e,t,r){let{routesMeta:n}=e,a={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],h=l===n.length-1,p=s==="/"?t:t.slice(s.length)||"/",d=db({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),u=c.route;if(!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:Gn([s,d.pathname]),pathnameBase:vb(Gn([s,d.pathnameBase])),route:u}),d.pathnameBase!=="/"&&(s=Gn([s,d.pathnameBase]))}return o}function db(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=fb(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((h,p,d)=>{let{paramName:u,isOptional:f}=p;if(u==="*"){let b=l[d]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[d];return f&&!x?h[u]=void 0:h[u]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:e}}function fb(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),$u(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function hb(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Am(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const pb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mb=e=>pb.test(e);function gb(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Da(e):e,s;if(r)if(mb(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),$u(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=Cm(r.substring(1),"/"):s=Cm(r,t)}else s=t;return{pathname:s,search:xb(n),hash:bb(a)}}function Cm(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function qu(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yb(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Pm(e,t){let r=yb(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Rm(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Da(e):(a=Gs({},e),rt(!a.pathname||!a.pathname.includes("?"),qu("?","pathname","search",a)),rt(!a.pathname||!a.pathname.includes("#"),qu("#","pathname","hash",a)),rt(!a.search||!a.search.includes("#"),qu("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=r;else{let d=t.length-1;if(!n&&o.startsWith("..")){let u=o.split("/");for(;u[0]==="..";)u.shift(),d-=1;a.pathname=u.join("/")}l=d>=0?t[d]:"/"}let c=gb(a,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const Gn=e=>e.join("/").replace(/\/\/+/g,"/"),vb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),xb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bb=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Lm=["post","put","patch","delete"];new Set(Lm);const _b=["get",...Lm];new Set(_b);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Js(){return Js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Js.apply(this,arguments)}const Bu=B.createContext(null),jb=B.createContext(null),Ys=B.createContext(null),Io=B.createContext(null),Sn=B.createContext({outlet:null,matches:[],isDataRoute:!1}),Im=B.createContext(null);function Qs(){return B.useContext(Io)!=null}function Do(){return Qs()||rt(!1),B.useContext(Io).location}function Dm(e){B.useContext(Ys).static||B.useLayoutEffect(e)}function kt(){let{isDataRoute:e}=B.useContext(Sn);return e?Db():Nb()}function Nb(){Qs()||rt(!1);let e=B.useContext(Bu),{basename:t,future:r,navigator:n}=B.useContext(Ys),{matches:a}=B.useContext(Sn),{pathname:s}=Do(),o=JSON.stringify(Pm(a,r.v7_relativeSplatPath)),l=B.useRef(!1);return Dm(()=>{l.current=!0}),B.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){n.go(h);return}let d=Rm(h,JSON.parse(o),s,p.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Gn([t,d.pathname])),(p.replace?n.replace:n.push)(d,p.state,p)},[t,n,o,s,e])}function kr(){let{matches:e}=B.useContext(Sn),t=e[e.length-1];return t?t.params:{}}function Sb(e,t){return Eb(e,t)}function Eb(e,t,r,n){Qs()||rt(!1);let{navigator:a}=B.useContext(Ys),{matches:s}=B.useContext(Sn),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Do(),p;if(t){var d;let w=typeof t=="string"?Da(t):t;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||rt(!1),p=w}else p=h;let u=p.pathname||"/",f=u;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+u.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=Zx(e,{pathname:f}),b=Cb(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Gn([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Gn([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,r,n);return t&&b?B.createElement(Io.Provider,{value:{location:Js({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Nn.Pop}},b):b}function kb(){let e=Ib(),t=wb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},t),r?B.createElement("pre",{style:a},r):null,null)}const Ob=B.createElement(kb,null);class Tb extends B.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?B.createElement(Sn.Provider,{value:this.props.routeContext},B.createElement(Im.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ab(e){let{routeContext:t,match:r,children:n}=e,a=B.useContext(Bu);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),B.createElement(Sn.Provider,{value:t},n)}function Cb(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let p=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);p>=0||rt(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let p=0;p<o.length;p++){let d=o[p];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(h=p),d.route.id){let{loaderData:u,errors:f}=r,x=d.route.loader&&u[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||x){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,d,u)=>{let f,x=!1,b=null,w=null;r&&(f=l&&d.route.id?l[d.route.id]:void 0,b=d.route.errorElement||Ob,c&&(h<0&&u===0?(Mb("route-fallback"),x=!0,w=null):h===u&&(x=!0,w=d.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,u+1)),m=()=>{let y;return f?y=b:x?y=w:d.route.Component?y=B.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=p,B.createElement(Ab,{match:d,routeContext:{outlet:p,matches:g,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?B.createElement(Tb,{location:r.location,revalidation:r.revalidation,component:b,error:f,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var Mm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Mm||{}),$m=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}($m||{});function Pb(e){let t=B.useContext(Bu);return t||rt(!1),t}function Rb(e){let t=B.useContext(jb);return t||rt(!1),t}function Lb(e){let t=B.useContext(Sn);return t||rt(!1),t}function Um(e){let t=Lb(),r=t.matches[t.matches.length-1];return r.route.id||rt(!1),r.route.id}function Ib(){var e;let t=B.useContext(Im),r=Rb(),n=Um();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Db(){let{router:e}=Pb(Mm.UseNavigateStable),t=Um($m.UseNavigateStable),r=B.useRef(!1);return Dm(()=>{r.current=!0}),B.useCallback(function(a,s){s===void 0&&(s={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Js({fromRouteId:t},s)))},[e,t])}const qm={};function Mb(e,t,r){qm[e]||(qm[e]=!0)}function $b(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Bm(e){let{to:t,replace:r,state:n,relative:a}=e;Qs()||rt(!1);let{future:s,static:o}=B.useContext(Ys),{matches:l}=B.useContext(Sn),{pathname:c}=Do(),h=kt(),p=Rm(t,Pm(l,s.v7_relativeSplatPath),c,a==="path"),d=JSON.stringify(p);return B.useEffect(()=>h(JSON.parse(d),{replace:r,state:n,relative:a}),[h,d,a,r,n]),null}function Fe(e){rt(!1)}function Ub(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Nn.Pop,navigator:s,static:o=!1,future:l}=e;Qs()&&rt(!1);let c=t.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:c,navigator:s,static:o,future:Js({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof n=="string"&&(n=Da(n));let{pathname:p="/",search:d="",hash:u="",state:f=null,key:x="default"}=n,b=B.useMemo(()=>{let w=Am(p,c);return w==null?null:{location:{pathname:w,search:d,hash:u,state:f,key:x},navigationType:a}},[c,p,d,u,f,x,a]);return b==null?null:B.createElement(Ys.Provider,{value:h},B.createElement(Io.Provider,{children:r,value:b}))}function qb(e){let{children:t,location:r}=e;return Sb(Fu(t),r)}new Promise(()=>{});function Fu(e,t){t===void 0&&(t=[]);let r=[];return B.Children.forEach(e,(n,a)=>{if(!B.isValidElement(n))return;let s=[...t,a];if(n.type===B.Fragment){r.push.apply(r,Fu(n.props.children,s));return}n.type!==Fe&&rt(!1),!n.props.index||!n.props.children||rt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Fu(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Bb="6";try{window.__reactRouterVersion=Bb}catch(e){}const Fm=Uv["startTransition"];function Fb(e){let{basename:t,children:r,future:n,window:a}=e,s=B.useRef();s.current==null&&(s.current=Yx({window:a,v5Compat:!0}));let o=s.current,[l,c]=B.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},p=B.useCallback(d=>{h&&Fm?Fm(()=>c(d)):c(d)},[c,h]);return B.useLayoutEffect(()=>o.listen(p),[o,p]),B.useEffect(()=>$b(n),[n]),B.createElement(Ub,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var zm;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zm||(zm={}));var Vm;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Vm||(Vm={}));function Mo(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function zb(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(p){try{h(n.next(p))}catch(d){o(d)}}function c(p){try{h(n.throw(p))}catch(d){o(d)}}function h(p){p.done?s(p.value):a(p.value).then(l,c)}h((n=n.apply(e,t||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const Vb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class zu extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Hb extends zu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Hm extends zu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Wm extends zu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Vu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Vu||(Vu={}));class Wb{constructor(t,{headers:r={},customFetch:n,region:a=Vu.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Vb(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return zb(this,arguments,void 0,function*(r,n={}){var a;let s,o;try{const{headers:l,method:c,body:h,signal:p,timeout:d}=n;let u={},{region:f}=n;f||(f=this.region);const x=new URL(`${this.url}/${r}`);f&&f!=="any"&&(u["x-region"]=f,x.searchParams.set("forceFunctionRegion",f));let b;h&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob!="undefined"&&h instanceof Blob||h instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",b=h):typeof h=="string"?(u["Content-Type"]="text/plain",b=h):typeof FormData!="undefined"&&h instanceof FormData?b=h:(u["Content-Type"]="application/json",b=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob!="undefined"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData!="undefined"&&h instanceof FormData)?b=JSON.stringify(h):b=h;let w=p;d&&(o=new AbortController,s=setTimeout(()=>o.abort(),d),p?(w=o.signal,p.addEventListener("abort",()=>o.abort())):w=o.signal);const g=yield this.fetch(x.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),l),body:b,signal:w}).catch(_=>{throw new Hb(_)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new Hm(g);if(!g.ok)throw new Wm(g);let y=((a=g.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield g.json():y==="application/octet-stream"||y==="application/pdf"?v=yield g.blob():y==="text/event-stream"?v=g:y==="multipart/form-data"?v=yield g.formData():v=yield g.text(),{data:v,error:null,response:g}}catch(l){return{data:null,error:l,response:l instanceof Wm||l instanceof Hm?l.context:void 0}}finally{s&&clearTimeout(s)}})}}var Kb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Gb=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>P(this,null,function*(){let o=null,l=null,c=null,h=s.status,p=s.statusText;if(s.ok){var d,u;if(r.method!=="HEAD"){var f;const g=yield s.text();g===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((f=r.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?l=g:l=JSON.parse(g))}const b=(d=r.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),w=(u=s.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");b&&w&&w.length>1&&(c=parseInt(w[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,h=406,p="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var x;const b=yield s.text();try{o=JSON.parse(b),Array.isArray(o)&&s.status===404&&(l=[],o=null,h=200,p="OK")}catch(w){s.status===404&&b===""?(h=204,p="No Content"):o={message:b}}if(o&&r.isMaybeSingle&&(!(o==null||(x=o.details)===null||x===void 0)&&x.includes("0 rows"))&&(o=null,h=200,p="OK"),o&&r.shouldThrowOnError)throw new Kb(o)}return{error:o,data:l,count:c,status:h,statusText:p}}));return this.shouldThrowOnError||(a=a.catch(s=>{var o;let l="";const c=s==null?void 0:s.cause;if(c){var h,p,d,u;const x=(h=c==null?void 0:c.message)!==null&&h!==void 0?h:"",b=(p=c==null?void 0:c.code)!==null&&p!==void 0?p:"";l=`${(d=s==null?void 0:s.name)!==null&&d!==void 0?d:"FetchError"}: ${s==null?void 0:s.message}`,l+=`

Caused by: ${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"Error"}: ${x}`,b&&(l+=` (${b})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var f;l=(f=s==null?void 0:s.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},Jb=class extends Gb{select(e){let t=!1;const r=(e!=null?e:"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const s=a?`${a}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r=="undefined"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n=="undefined"?"offset":`${n}.offset`,s=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:s="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Km=new RegExp("[,()]");var Ma=class extends Jb{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Km.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Km.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Yb=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t!=null?t:{},a=r?"HEAD":"GET";let s=!1;const o=(e!=null?e:"*").split("").map(h=>/\s/.test(h)&&!s?"":(h==='"'&&(s=!s),h)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new Ma({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:s,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(l.length>0){const c=[...new Set(l)].map(h=>`"${h}"`);s.searchParams.set("columns",c.join(","))}}return new Ma({method:a,url:s,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var s;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),a||c.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((p,d)=>p.concat(Object.keys(d)),[]);if(h.length>0){const p=[...new Set(h)].map(d=>`"${d}"`);l.searchParams.set("columns",p.join(","))}}return new Ma({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new Ma({method:n,url:a,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Ma({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Qb=class Sv{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Yb(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Sv(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:s}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let h;const p=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(p)),d=n&&Object.values(r).some(p);d?(l="POST",h=r):n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,x])=>x!==void 0).map(([f,x])=>[f,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([f,x])=>{c.searchParams.append(f,x)})):(l="POST",h=r);const u=new Headers(this.headers);return d?u.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&u.set("Prefer",`count=${s}`),new Ma({method:l,url:c,headers:u,schema:this.schemaName,body:h,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Xb{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket!="undefined")return{type:"native",constructor:WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocket!="undefined")return{type:"native",constructor:globalThis.WebSocket};if(typeof global!="undefined"&&typeof global.WebSocket!="undefined")return{type:"native",constructor:global.WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocketPair!="undefined"&&typeof globalThis.WebSocket=="undefined")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis!="undefined"&&globalThis.EdgeRuntime||typeof navigator!="undefined"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,s=parseInt(a.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket!="undefined"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch(t){return!1}}}const Zb="realtime-js/2.90.1",Gm="1.0.0",ew="2.0.0",Jm=Gm,Hu=1e4,tw=1e3,rw=100;var En;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(En||(En={}));var lt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(lt||(lt={}));var pr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pr||(pr={}));var Wu;(function(e){e.websocket="websocket"})(Wu||(Wu={}));var Jn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Jn||(Jn={}));class nw{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t!=null?t:[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var a,s;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(s=t.join_ref)!==null&&s!==void 0?s:"",h=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(p).length===0?"":JSON.stringify(p);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const u=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+h.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+u);let x=new DataView(f),b=0;x.setUint8(b++,this.KINDS.userBroadcastPush),x.setUint8(b++,c.length),x.setUint8(b++,l.length),x.setUint8(b++,o.length),x.setUint8(b++,h.length),x.setUint8(b++,d.length),x.setUint8(b++,r),Array.from(c,g=>x.setUint8(b++,g.charCodeAt(0))),Array.from(l,g=>x.setUint8(b++,g.charCodeAt(0))),Array.from(o,g=>x.setUint8(b++,g.charCodeAt(0))),Array.from(h,g=>x.setUint8(b++,g.charCodeAt(0))),Array.from(d,g=>x.setUint8(b++,g.charCodeAt(0)));var w=new Uint8Array(f.byteLength+n.byteLength);return w.set(new Uint8Array(f),0),w.set(new Uint8Array(n),f.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,s,o,l,c]=n;return r({join_ref:a,ref:s,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),s=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const h=n.decode(t.slice(c,c+a));c=c+a;const p=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+o));c=c+o;const u=t.slice(c,t.byteLength),f=l===this.JSON_ENCODING?JSON.parse(n.decode(u)):u,x={type:this.BROADCAST_EVENT,event:p,payload:f};return o>0&&(x.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Ym{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(De||(De={}));const Qm=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((s,o)=>(s[o]=aw(o,e,t,a),s),{}):{}},aw=(e,t,r,n)=>{const a=t.find(l=>l.name===e),s=a==null?void 0:a.type,o=r[e];return s&&!n.includes(s)?Xm(s,o):Ku(o)},Xm=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return lw(t,r)}switch(e){case De.bool:return sw(t);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return iw(t);case De.json:case De.jsonb:return ow(t);case De.timestamp:return cw(t);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return Ku(t);default:return Ku(t)}},Ku=e=>e,sw=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},iw=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ow=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return e}return e},lw=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const o=e.slice(1,r);try{s=JSON.parse("["+o+"]")}catch(l){s=o?o.split(","):[]}return s.map(l=>Xm(t,l))}return e},cw=e=>typeof e=="string"?e.replace(" ","T"):e,Zm=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Gu{constructor(t,r,n={},a=Hu){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var eg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(eg||(eg={}));class Xs{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xs.syncState(this.state,a,s,o),this.pendingDiffs.forEach(c=>{this.state=Xs.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Xs.syncDiff(this.state,a,s,o),l())}),this.onJoin((a,s,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:o})}),this.onLeave((a,s,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const s=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(s,(h,p)=>{o[h]||(c[h]=p)}),this.map(o,(h,p)=>{const d=s[h];if(d){const u=p.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),x=p.filter(w=>f.indexOf(w.presence_ref)<0),b=d.filter(w=>u.indexOf(w.presence_ref)<0);x.length>0&&(l[h]=x),b.length>0&&(c[h]=b)}else l[h]=p}),this.syncDiff(s,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(s,(l,c)=>{var h;const p=(h=t[l])!==null&&h!==void 0?h:[];if(t[l]=this.cloneDeep(c),p.length>0){const d=t[l].map(f=>f.presence_ref),u=p.filter(f=>d.indexOf(f.presence_ref)<0);t[l].unshift(...u)}n(l,p,c)}),this.map(o,(l,c)=>{let h=t[l];if(!h)return;const p=c.map(d=>d.presence_ref);h=h.filter(d=>p.indexOf(d.presence_ref)<0),t[l]=h,a(l,h,c),h.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(tg||(tg={}));var Zs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Zs||(Zs={}));var Kr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Kr||(Kr={}));class $a{constructor(t,r={config:{}},n){var a,s;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gu(this,pr.join,this.params,this.timeout),this.rejoinTimer=new Ym(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pr.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Xs(this),this.broadcastEndpointURL=Zm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==lt.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,h=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[Zs.PRESENCE]&&this.bindings[Zs.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},u={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:p}),postgres_changes:h,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Kr.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Kr.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",x=>P(this,[x],function*({postgres_changes:f}){var b;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){t==null||t(Kr.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,g=(b=w==null?void 0:w.length)!==null&&b!==void 0?b:0,m=[];for(let y=0;y<g;y++){const v=w[y],{filter:{event:_,schema:O,table:A,filter:j}}=v,k=f&&f[y];if(k&&k.event===_&&$a.isFilterValueEqual(k.schema,O)&&$a.isFilterValueEqual(k.table,A)&&$a.isFilterValueEqual(k.filter,j))m.push(Object.assign(Object.assign({},v),{id:k.id}));else{this.unsubscribe(),this.state=lt.errored,t==null||t(Kr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(Kr.SUBSCRIBED);return}})).receive("error",f=>{this.state=lt.errored,t==null||t(Kr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Kr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(n){return P(this,arguments,function*(t,r={}){return yield this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)})}untrack(){return P(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,r,n){return this.state===lt.joined&&t===Zs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>P(this,null,function*(){return yield this.subscribe()}))),this._on(t,r,n)}httpSend(a,s){return P(this,arguments,function*(t,r,n={}){var o;if(r==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},h=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);if(h.status===202)return{success:!0};let p=h.statusText;try{const d=yield h.json();p=d.error||d.message||p}catch(d){}return Promise.reject(new Error(p))})}send(n){return P(this,arguments,function*(t,r={}){var a,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=t,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const p=yield this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return yield(s=p.body)===null||s===void 0?void 0:s.cancel(),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,h;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=lt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Gu(this,pr.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=lt.closed,this.bindings={}}_fetchWithTimeout(t,r,n){return P(this,null,function*(){const a=new AbortController,s=setTimeout(()=>a.abort(),n),o=yield this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(s),o})}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Gu(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>rw){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,s;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:h,join:p}=pr;if(n&&[l,c,h,p].indexOf(o)>=0&&n!==this._joinRef())return;let u=this._onMessage(o,r,n);if(r&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var x,b,w;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(b=f.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(u,n)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var x,b,w,g,m,y,v,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const O=f.id,A=(x=f.filter)===null||x===void 0?void 0:x.event;return O&&((b=r.ids)===null||b===void 0?void 0:b.includes(O))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))&&(!(!((g=f.filter)===null||g===void 0)&&g.table)||f.filter.table===((m=r.data)===null||m===void 0?void 0:m.table))}else{const O=(v=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return O==="*"||O===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof u=="object"&&"ids"in u){const x=u.data,{schema:b,table:w,commit_timestamp:g,type:m,errors:y}=x;u=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:g,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(x))}f.callback(u,n)})}_isClosed(){return this.state===lt.closed}_isJoined(){return this.state===lt.joined}_isJoining(){return this.state===lt.joining}_isLeaving(){return this.state===lt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),s={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&$a.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){const n=t!=null?t:void 0,a=r!=null?r:void 0;return n===a}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(pr.close,{},t)}_onError(t){this._on(pr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Qm(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Qm(t.columns,t.old_record)),r}}const Ju=()=>{},$o={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uw=[1e3,2e3,5e3,1e4],dw=1e4,fw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hw{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hu,this.transport=null,this.heartbeatIntervalMs=$o.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ju,this.ref=0,this.reconnectTimer=null,this.vsn=Jm,this.logger=Ju,this.conn=null,this.sendBuffer=[],this.serializer=new nw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...s)=>a(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Wu.websocket}`,this.httpEndpoint=Zm(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Xb.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r!=null?r:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){return P(this,null,function*(){const r=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),r})}removeAllChannels(){return P(this,null,function*(){const t=yield Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case En.connecting:return Jn.Connecting;case En.open:return Jn.Open;case En.closing:return Jn.Closing;default:return Jn.Closed}}isConnected(){return this.connectionState()===Jn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===n);if(a)return a;{const s=new $a(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:a,ref:s}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${s})`,a),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t=null){return P(this,null,function*(){this._authPromise=this._performAuth(t);try{yield this._authPromise}finally{this._authPromise=null}})}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){return P(this,null,function*(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(tw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},$o.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:s,ref:o}=r,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),s),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(a,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===En.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===En.open||this.conn.readyState===En.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(pr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([fw],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}_performAuth(t=null){return P(this,null,function*(){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=yield this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const s={access_token:r,version:Zb};r&&a.updateJoinPayload(s),a.joinedOnce&&a._isJoined()&&a._push(pr.access_token,{access_token:r})}))})}_waitForAuthIfNeeded(){return P(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Ym(()=>P(this,null,function*(){setTimeout(()=>P(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),$o.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,s,o,l,c,h,p,d,u,f;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Hu,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:$o.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Ju,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Jm,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:x=>uw[x-1]||dw,this.vsn){case Gm:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:(x,b)=>b(JSON.stringify(x)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(x,b)=>b(JSON.parse(x));break;case ew:this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:this.serializer.encode.bind(this.serializer),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window!="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ei=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function pw(e,t,r){const n=new URL(t,e);if(r)for(const[a,s]of Object.entries(r))s!==void 0&&n.searchParams.set(a,s);return n.toString()}function mw(e){return P(this,null,function*(){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?yield e.getHeaders():{}})}function gw(e){var r;const t=(r=e.fetchImpl)!=null?r:globalThis.fetch;return{request(h){return P(this,arguments,function*({method:a,path:s,query:o,body:l,headers:c}){var w;const p=pw(e.baseUrl,s,o),d=yield mw(e.auth),u=yield t(p,{method:a,headers:X(X(X({},l?{"Content-Type":"application/json"}:{}),d),c),body:l?JSON.stringify(l):void 0}),f=yield u.text(),x=(u.headers.get("content-type")||"").includes("application/json"),b=x&&f?JSON.parse(f):f;if(!u.ok){const g=x?b:void 0,m=g==null?void 0:g.error;throw new ei((w=m==null?void 0:m.message)!=null?w:`Request failed with status ${u.status}`,{status:u.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:g})}return{status:u.status,headers:u.headers,data:b}})}}}function Uo(e){return e.join("")}var yw=class{constructor(e,t=""){this.client=e,this.prefix=t}listNamespaces(e){return P(this,null,function*(){const t=e?{parent:Uo(e.namespace)}:void 0;return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))})}createNamespace(e,t){return P(this,null,function*(){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data})}dropNamespace(e){return P(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Uo(e.namespace)}`})})}loadNamespaceMetadata(e){return P(this,null,function*(){return{properties:(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Uo(e.namespace)}`})).data.properties}})}namespaceExists(e){return P(this,null,function*(){try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Uo(e.namespace)}`}),!0}catch(t){if(t instanceof ei&&t.status===404)return!1;throw t}})}createNamespaceIfNotExists(e,t){return P(this,null,function*(){try{return yield this.createNamespace(e,t)}catch(r){if(r instanceof ei&&r.status===409)return;throw r}})}};function Ua(e){return e.join("")}var vw=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}listTables(e){return P(this,null,function*(){return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ua(e.namespace)}/tables`})).data.identifiers})}createTable(e,t){return P(this,null,function*(){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ua(e.namespace)}/tables`,body:t,headers:r})).data.metadata})}updateTable(e,t){return P(this,null,function*(){const r=yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ua(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}})}dropTable(e,t){return P(this,null,function*(){var r;yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ua(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((r=t==null?void 0:t.purge)!=null?r:!1)}})})}loadTable(e){return P(this,null,function*(){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ua(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata})}tableExists(e){return P(this,null,function*(){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ua(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof ei&&r.status===404)return!1;throw r}})}createTableIfNotExists(e,t){return P(this,null,function*(){try{return yield this.createTable(e,t)}catch(r){if(r instanceof ei&&r.status===409)return yield this.loadTable({namespace:e.namespace,name:t.name});throw r}})}},xw=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=gw({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new yw(this.client,t),this.tableOps=new vw(this.client,t,this.accessDelegation)}listNamespaces(e){return P(this,null,function*(){return this.namespaceOps.listNamespaces(e)})}createNamespace(e,t){return P(this,null,function*(){return this.namespaceOps.createNamespace(e,t)})}dropNamespace(e){return P(this,null,function*(){yield this.namespaceOps.dropNamespace(e)})}loadNamespaceMetadata(e){return P(this,null,function*(){return this.namespaceOps.loadNamespaceMetadata(e)})}listTables(e){return P(this,null,function*(){return this.tableOps.listTables(e)})}createTable(e,t){return P(this,null,function*(){return this.tableOps.createTable(e,t)})}updateTable(e,t){return P(this,null,function*(){return this.tableOps.updateTable(e,t)})}dropTable(e,t){return P(this,null,function*(){yield this.tableOps.dropTable(e,t)})}loadTable(e){return P(this,null,function*(){return this.tableOps.loadTable(e)})}namespaceExists(e){return P(this,null,function*(){return this.namespaceOps.namespaceExists(e)})}tableExists(e){return P(this,null,function*(){return this.tableOps.tableExists(e)})}createNamespaceIfNotExists(e,t){return P(this,null,function*(){return this.namespaceOps.createNamespaceIfNotExists(e,t)})}createTableIfNotExists(e,t){return P(this,null,function*(){return this.tableOps.createTableIfNotExists(e,t)})}},qo=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Ke(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var bw=class extends qo{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Yu=class extends qo{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Qu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ww=()=>Response,Xu=e=>{if(Array.isArray(e))return e.map(r=>Xu(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=Xu(n)}),t},_w=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},jw=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ti(e){"@babel/helpers - typeof";return ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ti(e)}function Nw(e,t){if(ti(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ti(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sw(e){var t=Nw(e,"string");return ti(t)=="symbol"?t:t+""}function Ew(e,t,r){return(t=Sw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rg(Object(r),!0).forEach(function(n){Ew(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rg(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Zu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},kw=(e,t,r)=>P(this,null,function*(){e instanceof(yield ww())&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const a=e.status||500,s=(n==null?void 0:n.statusCode)||a+"";t(new bw(Zu(n),a,s))}).catch(n=>{t(new Yu(Zu(n),n))}):t(new Yu(Zu(e),e))}),Ow=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(_w(n)?(a.headers=we({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),we(we({},a),r))};function ri(e,t,r,n,a,s){return P(this,null,function*(){return new Promise((o,l)=>{e(r,Ow(t,n,a,s)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>kw(c,l,n))})})}function ni(e,t,r,n){return P(this,null,function*(){return ri(e,"GET",t,r,n)})}function mr(e,t,r,n,a){return P(this,null,function*(){return ri(e,"POST",t,n,a,r)})}function ed(e,t,r,n,a){return P(this,null,function*(){return ri(e,"PUT",t,n,a,r)})}function Tw(e,t,r,n){return P(this,null,function*(){return ri(e,"HEAD",t,we(we({},r),{},{noResolveJson:!0}),n)})}function td(e,t,r,n,a){return P(this,null,function*(){return ri(e,"DELETE",t,n,a,r)})}var Aw=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return P(this,null,function*(){var e=this;try{return{data:(yield e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}};let ng;ng=Symbol.toStringTag;var Cw=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[ng]="BlobDownloadBuilder",this.promise=null}asStream(){return new Aw(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return P(this,null,function*(){var e=this;try{return{data:yield(yield e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}};const Pw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ag={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Rw=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Qu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return P(this,null,function*(){var a=this;try{let s;const o=we(we({},ag),n);let l=we(we({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob!="undefined"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",a.encodeMetadata(c)),s.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),c&&!s.has("metadata")&&s.append("metadata",a.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream!="undefined"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=we(we({},l),n.headers));const h=a._removeEmptyFolders(t),p=a._getFinalPath(h),d=yield(e=="PUT"?ed:mr)(a.fetch,`${a.url}/object/${p}`,s,we({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:h,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}upload(e,t,r){return P(this,null,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return P(this,null,function*(){var a=this;const s=a._removeEmptyFolders(e),o=a._getFinalPath(s),l=new URL(a.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const h=we({upsert:ag.upsert},n),p=we(we({},a.headers),{"x-upsert":String(h.upsert)});return typeof Blob!="undefined"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{data:{path:s,fullPath:(yield ed(a.fetch,l.toString(),c,{headers:p})).Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return P(this,null,function*(){var r=this;try{let n=r._getFinalPath(e);const a=we({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const s=yield mr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+s.url),l=o.searchParams.get("token");if(!l)throw new qo("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}update(e,t,r){return P(this,null,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return P(this,null,function*(){var n=this;try{return{data:yield mr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ke(a))return{data:null,error:a};throw a}})}copy(e,t,r){return P(this,null,function*(){var n=this;try{return{data:{path:(yield mr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ke(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,r){return P(this,null,function*(){var n=this;try{let a=n._getFinalPath(e),s=yield mr(n.fetch,`${n.url}/object/sign/${a}`,we({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${n.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ke(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,r){return P(this,null,function*(){var n=this;try{const a=yield mr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>we(we({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${s}`):null})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ke(a))return{data:null,error:a};throw a}})}download(e,t){const r=typeof(t==null?void 0:t.transform)!="undefined"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"",s=this._getFinalPath(e),o=()=>ni(this.fetch,`${this.url}/${r}/${s}${a}`,{headers:this.headers,noResolveJson:!0});return new Cw(o,this.shouldThrowOnError)}info(e){return P(this,null,function*(){var t=this;const r=t._getFinalPath(e);try{return{data:Xu(yield ni(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}exists(e){return P(this,null,function*(){var t=this;const r=t._getFinalPath(e);try{return yield Tw(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n)&&n instanceof Yu){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const s=typeof(t==null?void 0:t.transform)!="undefined"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${l}`)}}}remove(e){return P(this,null,function*(){var t=this;try{return{data:yield td(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}list(e,t,r){return P(this,null,function*(){var n=this;try{const a=we(we(we({},Pw),t),{},{prefix:e||""});return{data:yield mr(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ke(a))return{data:null,error:a};throw a}})}listV2(e,t){return P(this,null,function*(){var r=this;try{const n=we({},e);return{data:yield mr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer!="undefined"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const sg="2.90.1",ig={"X-Client-Info":`storage-js/${sg}`};var Lw=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=we(we({},ig),t),this.fetch=Qu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return P(this,null,function*(){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:yield ni(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}getBucket(e){return P(this,null,function*(){var t=this;try{return{data:yield ni(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}createBucket(r){return P(this,arguments,function*(e,t={public:!1}){var n=this;try{return{data:yield mr(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ke(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return P(this,null,function*(){var r=this;try{return{data:yield ed(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}emptyBucket(e){return P(this,null,function*(){var t=this;try{return{data:yield mr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}deleteBucket(e){return P(this,null,function*(){var t=this;try{return{data:yield td(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Iw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=we(we({},ig),t),this.fetch=Qu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return P(this,null,function*(){var t=this;try{return{data:yield mr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}listBuckets(e){return P(this,null,function*(){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:yield ni(t.fetch,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}deleteBucket(e){return P(this,null,function*(){var t=this;try{return{data:yield td(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}from(e){var t=this;if(!jw(e))throw new qo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new xw({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>P(this,null,function*(){return t.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,s){const o=a[s];return typeof o!="function"?o:(...l)=>P(this,null,function*(){try{return{data:yield o.apply(a,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}})}})}};const rd={"X-Client-Info":`storage-js/${sg}`,"Content-Type":"application/json"};var og=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Yt(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var nd=class extends og{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Dw=class extends og{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const ad=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Mw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$w=(e,t,r)=>P(this,null,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,a=e;if(typeof a.json=="function")a.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||n+"";t(new nd(lg(s),n,o))}).catch(()=>{const s=n+"";t(new nd(a.statusText||`HTTP ${n} error`,n,s))});else{const s=n+"";t(new nd(a.statusText||`HTTP ${n} error`,n,s))}}else t(new Dw(lg(e),e))}),Uw=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(Mw(n)?(a.headers=we({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,we(we({},a),r)):a};function qw(e,t,r,n,a,s){return P(this,null,function*(){return new Promise((o,l)=>{e(r,Uw(t,n,a,s)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const h=c.headers.get("content-type");return!h||!h.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>$w(c,l,n))})})}function Qt(e,t,r,n,a){return P(this,null,function*(){return qw(e,"POST",t,n,a,r)})}var Bw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=we(we({},rd),t),this.fetch=ad(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return P(this,null,function*(){var t=this;try{return{data:(yield Qt(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}getIndex(e,t){return P(this,null,function*(){var r=this;try{return{data:yield Qt(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}listIndexes(e){return P(this,null,function*(){var t=this;try{return{data:yield Qt(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}deleteIndex(e,t){return P(this,null,function*(){var r=this;try{return{data:(yield Qt(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}},Fw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=we(we({},rd),t),this.fetch=ad(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return P(this,null,function*(){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Qt(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}getVectors(e){return P(this,null,function*(){var t=this;try{return{data:yield Qt(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}listVectors(e){return P(this,null,function*(){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Qt(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}queryVectors(e){return P(this,null,function*(){var t=this;try{return{data:yield Qt(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}deleteVectors(e){return P(this,null,function*(){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Qt(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}},zw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=we(we({},rd),t),this.fetch=ad(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return P(this,null,function*(){var t=this;try{return{data:(yield Qt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}getBucket(e){return P(this,null,function*(){var t=this;try{return{data:yield Qt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}listBuckets(){return P(this,arguments,function*(e={}){var t=this;try{return{data:yield Qt(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return P(this,null,function*(){var t=this;try{return{data:(yield Qt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}},Vw=class e extends zw{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new Hw(this.url,this.headers,t,this.fetch)}createBucket(t){return P(this,null,function*(){var r=()=>zt(e.prototype,this,"createBucket"),n=this;return r().call(n,t)})}getBucket(t){return P(this,null,function*(){var r=()=>zt(e.prototype,this,"getBucket"),n=this;return r().call(n,t)})}listBuckets(){return P(this,arguments,function*(t={}){var r=()=>zt(e.prototype,this,"listBuckets"),n=this;return r().call(n,t)})}deleteBucket(t){return P(this,null,function*(){var r=()=>zt(e.prototype,this,"deleteBucket"),n=this;return r().call(n,t)})}},Hw=class e extends Bw{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){return P(this,null,function*(){var r=()=>zt(e.prototype,this,"createIndex"),n=this;return r().call(n,we(we({},t),{},{vectorBucketName:n.vectorBucketName}))})}listIndexes(){return P(this,arguments,function*(t={}){var r=()=>zt(e.prototype,this,"listIndexes"),n=this;return r().call(n,we(we({},t),{},{vectorBucketName:n.vectorBucketName}))})}getIndex(t){return P(this,null,function*(){var r=()=>zt(e.prototype,this,"getIndex"),n=this;return r().call(n,n.vectorBucketName,t)})}deleteIndex(t){return P(this,null,function*(){var r=()=>zt(e.prototype,this,"deleteIndex"),n=this;return r().call(n,n.vectorBucketName,t)})}index(t){return new Ww(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Ww=class e extends Fw{constructor(t,r,n,a,s){super(t,r,s),this.vectorBucketName=n,this.indexName=a}putVectors(t){return P(this,null,function*(){var r=()=>zt(e.prototype,this,"putVectors"),n=this;return r().call(n,we(we({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}getVectors(t){return P(this,null,function*(){var r=()=>zt(e.prototype,this,"getVectors"),n=this;return r().call(n,we(we({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}listVectors(){return P(this,arguments,function*(t={}){var r=()=>zt(e.prototype,this,"listVectors"),n=this;return r().call(n,we(we({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}queryVectors(t){return P(this,null,function*(){var r=()=>zt(e.prototype,this,"queryVectors"),n=this;return r().call(n,we(we({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}deleteVectors(t){return P(this,null,function*(){var r=()=>zt(e.prototype,this,"deleteVectors"),n=this;return r().call(n,we(we({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}},Kw=class extends Lw{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Rw(this.url,this.headers,e,this.fetch)}get vectors(){return new Vw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Iw(this.url+"/iceberg",this.headers,this.fetch)}};const cg="2.90.1",qa=30*1e3,sd=3,id=sd*qa,Gw="http://localhost:9999",Jw="supabase.auth.token",Yw={"X-Client-Info":`gotrue-js/${cg}`},od="X-Supabase-Api-Version",ug={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Qw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xw=10*60*1e3;class ai extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Zw extends ai{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function e1(e){return xe(e)&&e.name==="AuthApiError"}class Yn extends ai{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Gr extends ai{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Xt extends Gr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function t1(e){return xe(e)&&e.name==="AuthSessionMissingError"}class Ba extends Gr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bo extends Gr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fo extends Gr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function r1(e){return xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class dg extends Gr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class n1 extends Gr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ld extends Gr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function cd(e){return xe(e)&&e.name==="AuthRetryableFetchError"}class fg extends Gr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ud extends Gr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hg=` 	
\r=`.split(""),a1=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<hg.length;t+=1)e[hg[t].charCodeAt(0)]=-2;for(let t=0;t<zo.length;t+=1)e[zo[t].charCodeAt(0)]=t;return e})();function pg(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(zo[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(zo[n]),t.queuedBits-=6}}function mg(e,t,r){const n=a1[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function gg(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=o=>{o1(o,n,r)};for(let o=0;o<e.length;o+=1)mg(e.charCodeAt(o),a,s);return t.join("")}function s1(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function i1(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}s1(n,t)}}function o1(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Fa(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)mg(e.charCodeAt(a),r,n);return new Uint8Array(t)}function l1(e){const t=[];return i1(e,r=>t.push(r)),new Uint8Array(t)}function Qn(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>pg(a,r,n)),pg(null,r,n),t.join("")}function c1(e){return Math.round(Date.now()/1e3)+e}function u1(){return Symbol("auth-callback")}const vt=()=>typeof window!="undefined"&&typeof document!="undefined",Xn={tested:!1,writable:!1},yg=()=>{if(!vt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(t){return!1}if(Xn.tested)return Xn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Xn.tested=!0,Xn.writable=!0}catch(t){Xn.tested=!0,Xn.writable=!1}return Xn.writable};function d1(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch(n){}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const vg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),f1=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",za=(e,t,r)=>P(this,null,function*(){yield e.setItem(t,JSON.stringify(r))}),Zn=(e,t)=>P(this,null,function*(){const r=yield e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}}),xt=(e,t)=>P(this,null,function*(){yield e.removeItem(t)});class Vo{constructor(){this.promise=new Vo.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Vo.promiseConstructor=Promise;function dd(e){const t=e.split(".");if(t.length!==3)throw new ud("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Qw.test(t[n]))throw new ud("JWT not in base64url format");return{header:JSON.parse(gg(t[0])),payload:JSON.parse(gg(t[1])),signature:Fa(t[2]),raw:{header:t[0],payload:t[1]}}}function h1(e){return P(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),e)})})}function p1(e,t){return new Promise((n,a)=>{P(this,null,function*(){for(let s=0;s<1/0;s++)try{const o=yield e(s);if(!t(s,null,o)){n(o);return}}catch(o){if(!t(s,o)){a(o);return}}})})}function m1(e){return("0"+e.toString(16)).substr(-2)}function g1(){const t=new Uint32Array(56);if(typeof crypto=="undefined"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let s=0;s<56;s++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,m1).join("")}function y1(e){return P(this,null,function*(){const r=new TextEncoder().encode(e),n=yield crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(s=>String.fromCharCode(s)).join("")})}function v1(e){return P(this,null,function*(){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=yield y1(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Va(e,t,r=!1){return P(this,null,function*(){const n=g1();let a=n;r&&(a+="/PASSWORD_RECOVERY"),yield za(e,`${t}-code-verifier`,a);const s=yield v1(n);return[s,n===s?"plain":"s256"]})}const x1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function b1(e){const t=e.headers.get(od);if(!t||!t.match(x1))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(r){return null}}function w1(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function _1(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const j1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ha(e){if(!j1.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fd(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function N1(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function xg(e){return JSON.parse(JSON.stringify(e))}const ea=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),S1=[502,503,504];function bg(e){return P(this,null,function*(){var t;if(!f1(e))throw new ld(ea(e),0);if(S1.includes(e.status))throw new ld(ea(e),e.status);let r;try{r=yield e.json()}catch(s){throw new Yn(ea(s),s)}let n;const a=b1(e);if(a&&a.getTime()>=ug["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new fg(ea(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Xt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new fg(ea(r),e.status,r.weak_password.reasons);throw new Zw(ea(r),e.status||500,n)})}const E1=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};function _e(e,t,r,n){return P(this,null,function*(){var a;const s=Object.assign({},n==null?void 0:n.headers);s[od]||(s[od]=ug["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=yield k1(e,t,r+l,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}})}function k1(e,t,r,n,a,s){return P(this,null,function*(){const o=E1(t,n,a,s);let l;try{l=yield e(r,Object.assign({},o))}catch(c){throw console.error(c),new ld(ea(c),0)}if(l.ok||(yield bg(l)),n!=null&&n.noResolveJson)return l;try{return yield l.json()}catch(c){yield bg(c)}})}function gr(e){var t;let r=null;A1(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=c1(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function wg(e){const t=gr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function kn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function O1(e){return{data:e,error:null}}function T1(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,o=Mo(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function _g(e){return e}function A1(e){return e.access_token&&e.refresh_token&&e.expires_in}const hd=["global","local","others"];class C1{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=vg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(n){return P(this,arguments,function*(t,r=hd[0]){if(hd.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hd.join(", ")}`);try{return yield _e(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(xe(a))return{data:null,error:a};throw a}})}inviteUserByEmail(n){return P(this,arguments,function*(t,r={}){try{return yield _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:kn})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}})}generateLink(t){return P(this,null,function*(){try{const{options:r}=t,n=Mo(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),yield _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:T1,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(xe(r))return{data:{properties:null,user:null},error:r};throw r}})}createUser(t){return P(this,null,function*(){try{return yield _e(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:kn})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}})}listUsers(t){return P(this,null,function*(){var r,n,a,s,o,l,c;try{const h={nextPage:null,lastPage:0,total:0},p=yield _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:_g});if(p.error)throw p.error;const d=yield p.json(),u=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);h[`${w}Page`]=b}),h.total=parseInt(u)),{data:Object.assign(Object.assign({},d),h),error:null}}catch(h){if(xe(h))return{data:{users:[]},error:h};throw h}})}getUserById(t){return P(this,null,function*(){Ha(t);try{return yield _e(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:kn})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}})}updateUserById(t,r){return P(this,null,function*(){Ha(t);try{return yield _e(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:kn})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}})}deleteUser(t,r=!1){return P(this,null,function*(){Ha(t);try{return yield _e(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:kn})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}})}_listFactors(t){return P(this,null,function*(){Ha(t.userId);try{const{data:r,error:n}=yield _e(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}_deleteFactor(t){return P(this,null,function*(){Ha(t.userId),Ha(t.id);try{return{data:yield _e(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}_listOAuthClients(t){return P(this,null,function*(){var r,n,a,s,o,l,c;try{const h={nextPage:null,lastPage:0,total:0},p=yield _e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:_g});if(p.error)throw p.error;const d=yield p.json(),u=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);h[`${w}Page`]=b}),h.total=parseInt(u)),{data:Object.assign(Object.assign({},d),h),error:null}}catch(h){if(xe(h))return{data:{clients:[]},error:h};throw h}})}_createOAuthClient(t){return P(this,null,function*(){try{return yield _e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}})}_getOAuthClient(t){return P(this,null,function*(){try{return yield _e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}})}_updateOAuthClient(t,r){return P(this,null,function*(){try{return yield _e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}})}_deleteOAuthClient(t){return P(this,null,function*(){try{return yield _e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}_regenerateOAuthClientSecret(t){return P(this,null,function*(){try{return yield _e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}})}}function jg(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Wa={debug:!!(globalThis&&yg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ng extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class P1 extends Ng{}function R1(e,t,r){return P(this,null,function*(){Wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Wa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},a=>P(this,null,function*(){if(a){Wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return yield r()}finally{Wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new P1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Wa.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield r()}})))})}function L1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){typeof self!="undefined"&&(self.globalThis=self)}}function Sg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function I1(e){return parseInt(e,16)}function D1(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function M1(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:s=new Date,nonce:o,notBefore:l,requestId:c,resources:h,scheme:p,uri:d,version:u}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(u!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${u}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=Sg(e.address),x=p?`${p}://${n}`:n,b=e.statement?`${e.statement}
`:"",w=`${x} wants you to sign in with your Ethereum account:
${f}

${b}`;let g=`URI: ${d}
Version: ${u}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(a&&(g+=`
Expiration Time: ${a.toISOString()}`),l&&(g+=`
Not Before: ${l.toISOString()}`),c&&(g+=`
Request ID: ${c}`),h){let m=`
Resources:`;for(const y of h){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);m+=`
- ${y}`}g+=m}return`${w}
${g}`}class nt extends Error{constructor({message:t,code:r,cause:n,name:a}){var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=a!=null?a:n instanceof Error?n.name:void 0)!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class Ho extends nt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function $1({error:e,options:t}){var r,n,a;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new nt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Eg(o)){if(s.rp.id!==o)return new nt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function U1({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new nt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Eg(n)){if(r.rpId!==n)return new nt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class q1{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const B1=new q1;function F1(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential!="undefined"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Mo(e,["challenge","user","excludeCredentials"]),s=Fa(t).buffer,o=Object.assign(Object.assign({},r),{id:Fa(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:s,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const h=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},h),{id:Fa(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function z1(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential!="undefined"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Mo(e,["challenge","allowCredentials"]),a=Fa(t).buffer,s=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];s.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Fa(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function V1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Qn(new Uint8Array(e.response.attestationObject)),clientDataJSON:Qn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function H1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Qn(new Uint8Array(a.authenticatorData)),clientDataJSON:Qn(new Uint8Array(a.clientDataJSON)),signature:Qn(new Uint8Array(a.signature)),userHandle:a.userHandle?Qn(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Eg(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function kg(){var e,t;return!!(vt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}function W1(e){return P(this,null,function*(){try{const t=yield navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ho("Browser returned unexpected credential type",t)}:{data:null,error:new Ho("Empty credential response",t)}}catch(t){return{data:null,error:$1({error:t,options:e})}}})}function K1(e){return P(this,null,function*(){try{const t=yield navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ho("Browser returned unexpected credential type",t)}:{data:null,error:new Ho("Empty credential response",t)}}catch(t){return{data:null,error:U1({error:t,options:e})}}})}const G1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},J1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Wo(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const s in a){const o=a[s];if(o!==void 0)if(Array.isArray(o))n[s]=o;else if(r(o))n[s]=o;else if(t(o)){const l=n[s];t(l)?n[s]=Wo(l,o):n[s]=Wo(o)}else n[s]=o}return n}function Y1(e,t){return Wo(G1,e,t||{})}function Q1(e,t){return Wo(J1,e,t||{})}class X1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){return P(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})}_challenge(o,l){return P(this,arguments,function*({factorId:t,webauthn:r,friendlyName:n,signal:a},s){try{const{data:c,error:h}=yield this.client.mfa.challenge({factorId:t,webauthn:r});if(!c)return{data:null,error:h};const p=a!=null?a:B1.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:d}=c.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(c.webauthn.type){case"create":{const d=Y1(c.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:u,error:f}=yield W1({publicKey:d,signal:p});return u?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}case"request":{const d=Q1(c.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:u,error:f}=yield K1(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:d,signal:p}));return u?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}}}catch(c){return xe(c)?{data:null,error:c}:{data:null,error:new Yn("Unexpected error in challenge",c)}}})}_verify(a){return P(this,arguments,function*({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})})}_authenticate(o,l){return P(this,arguments,function*({factorId:t,webauthn:{rpId:r=typeof window!="undefined"?window.location.hostname:void 0,rpOrigins:n=typeof window!="undefined"?[window.location.origin]:void 0,signal:a}={}},s){if(!r)return{data:null,error:new ai("rpId is required for WebAuthn authentication")};try{if(!kg())return{data:null,error:new Yn("Browser does not support WebAuthn",null)};const{data:c,error:h}=yield this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:s});if(!c)return{data:null,error:h};const{webauthn:p}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:n,credential_response:p.credential_response}})}catch(c){return xe(c)?{data:null,error:c}:{data:null,error:new Yn("Unexpected error in authenticate",c)}}})}_register(o,l){return P(this,arguments,function*({friendlyName:t,webauthn:{rpId:r=typeof window!="undefined"?window.location.hostname:void 0,rpOrigins:n=typeof window!="undefined"?[window.location.origin]:void 0,signal:a}={}},s){if(!r)return{data:null,error:new ai("rpId is required for WebAuthn registration")};try{if(!kg())return{data:null,error:new Yn("Browser does not support WebAuthn",null)};const{data:c,error:h}=yield this._enroll({friendlyName:t});if(!c)return yield this.client.mfa.listFactors().then(u=>{var f;return(f=u.data)===null||f===void 0?void 0:f.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:h};const{data:p,error:d}=yield this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:s});return p?this._verify({factorId:c.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:n,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:d}}catch(c){return xe(c)?{data:null,error:c}:{data:null,error:new Yn("Unexpected error in register",c)}}})}}L1();const Z1={url:Gw,storageKey:Jw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};function Og(e,t,r){return P(this,null,function*(){return yield r()})}const Ka={};class si{get jwks(){var t,r;return(r=(t=Ka[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ka[this.storageKey]=Object.assign(Object.assign({},Ka[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ka[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ka[this.storageKey]=Object.assign(Object.assign({},Ka[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Z1),t);if(this.storageKey=s.storageKey,this.instanceID=(r=si.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,si.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&vt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new C1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=vg(s.fetch),this.lock=s.lock||Og,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&vt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=R1:this.lock=Og,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new X1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:yg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jg(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=jg(this.memoryStorage)),vt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",o=>P(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cg}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}initialize(){return P(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=P(this,null,function*(){return yield this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return P(this,null,function*(){var t;try{let r={},n="none";if(vt()&&(r=d1(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":(yield this._isPKCECallback(r))&&(n="pkce")),vt()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:s}=yield this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),r1(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),yield this._saveSession(o),setTimeout(()=>P(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",o):yield this._notifyAllSubscribers("SIGNED_IN",o)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return xe(r)?this._returnResult({error:r}):this._returnResult({error:new Yn("Unexpected error during initialization",r)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return P(this,null,function*(){var r,n,a;try{const s=yield _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:gr}),{data:o,error:l}=s;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,h=o.user;return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(s){if(xe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}signUp(t){return P(this,null,function*(){var r,n,a;try{let s;if("email"in t){const{email:p,password:d,options:u}=t;let f=null,x=null;this.flowType==="pkce"&&([f,x]=yield Va(this.storage,this.storageKey)),s=yield _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:u==null?void 0:u.emailRedirectTo,body:{email:p,password:d,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:f,code_challenge_method:x},xform:gr})}else if("phone"in t){const{phone:p,password:d,options:u}=t;s=yield _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:d,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:gr})}else throw new Bo("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return yield xt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,h=o.user;return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(s){if(yield xt(this.storage,`${this.storageKey}-code-verifier`),xe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}signInWithPassword(t){return P(this,null,function*(){try{let r;if("email"in t){const{email:s,password:o,options:l}=t;r=yield _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:wg})}else if("phone"in t){const{phone:s,password:o,options:l}=t;r=yield _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:wg})}else throw new Bo("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const s=new Ba;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOAuth(t){return P(this,null,function*(){var r,n,a,s;return yield this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(t){return P(this,null,function*(){return yield this.initializePromise,this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return P(this,null,function*(){const{chain:r}=t;switch(r){case"ethereum":return yield this.signInWithEthereum(t);case"solana":return yield this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}})}signInWithEthereum(t){return P(this,null,function*(){var r,n,a,s,o,l,c,h,p,d,u;let f,x;if("message"in t)f=t.message,x=t.signature;else{const{chain:b,wallet:w,statement:g,options:m}=t;let y;if(vt())if(typeof w=="object")y=w;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")y=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=w}const v=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),_=yield y.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=Sg(_[0]);let A=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!A){const k=yield y.request({method:"eth_chainId"});A=I1(k)}const j={domain:v.host,address:O,statement:g,uri:v.href,version:"1",chainId:A,nonce:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(h=m==null?void 0:m.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=m==null?void 0:m.signInWithEthereum)===null||p===void 0?void 0:p.resources};f=M1(j),x=yield y.request({method:"personal_sign",params:[D1(f),O]})}try{const{data:b,error:w}=yield _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:x},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(u=t.options)===null||u===void 0?void 0:u.captchaToken}}:null),xform:gr});if(w)throw w;if(!b||!b.session||!b.user){const g=new Ba;return this._returnResult({data:{user:null,session:null},error:g})}return b.session&&(yield this._saveSession(b.session),yield this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:w})}catch(b){if(xe(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}})}signInWithSolana(t){return P(this,null,function*(){var r,n,a,s,o,l,c,h,p,d,u,f;let x,b;if("message"in t)x=t.message,b=t.signature;else{const{chain:w,wallet:g,statement:m,options:y}=t;let v;if(vt())if(typeof g=="object")v=g;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))v=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=g}const _=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const O=yield v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),m?{statement:m}:null));let A;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")A=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)A=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)x=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),b=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${_.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((h=y==null?void 0:y.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(p=y==null?void 0:y.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const O=yield v.signMessage(new TextEncoder().encode(x),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=O}}try{const{data:w,error:g}=yield _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Qn(b)},!((u=t.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:gr});if(g)throw g;if(!w||!w.session||!w.user){const m=new Ba;return this._returnResult({data:{user:null,session:null},error:m})}return w.session&&(yield this._saveSession(w.session),yield this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:g})}catch(w){if(xe(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}})}_exchangeCodeForSession(t){return P(this,null,function*(){const r=yield Zn(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r!=null?r:"").split("/");try{if(!n&&this.flowType==="pkce")throw new n1;const{data:s,error:o}=yield _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:gr});if(yield xt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const l=new Ba;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:a!=null?a:null}),error:o})}catch(s){if(yield xt(this.storage,`${this.storageKey}-code-verifier`),xe(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}})}signInWithIdToken(t){return P(this,null,function*(){try{const{options:r,provider:n,token:a,access_token:s,nonce:o}=t,l=yield _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:gr}),{data:c,error:h}=l;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!c||!c.session||!c.user){const p=new Ba;return this._returnResult({data:{user:null,session:null},error:p})}return c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:h})}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOtp(t){return P(this,null,function*(){var r,n,a,s,o;try{if("email"in t){const{email:l,options:c}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=yield Va(this.storage,this.storageKey));const{error:d}=yield _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:l,options:c}=t,{data:h,error:p}=yield _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Bo("You must provide either an email or phone number.")}catch(l){if(yield xt(this.storage,`${this.storageKey}-code-verifier`),xe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}verifyOtp(t){return P(this,null,function*(){var r,n;try{let a,s;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=yield _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:gr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,h=o.user;return c!=null&&c.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(a){if(xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signInWithSSO(t){return P(this,null,function*(){var r,n,a,s,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=yield Va(this.storage,this.storageKey));const h=yield _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:O1});return!((s=h.data)===null||s===void 0)&&s.url&&vt()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(l){if(yield xt(this.storage,`${this.storageKey}-code-verifier`),xe(l))return this._returnResult({data:null,error:l});throw l}})}reauthenticate(){return P(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return P(this,null,function*(){try{return yield this._useSession(t=>P(this,null,function*(){const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Xt;const{error:a}=yield _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})}))}catch(t){if(xe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}resend(t){return P(this,null,function*(){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:s}=t,{error:o}=yield _e(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:s}=t,{data:o,error:l}=yield _e(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Bo("You must provide either an email or phone number and a type")}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}getSession(){return P(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){return this._useSession(r=>P(this,null,function*(){return r}))}))})}_acquireLock(t,r){return P(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=P(this,null,function*(){return yield n,yield r()});return this.pendingInLock.push(P(this,null,function*(){try{yield a}catch(s){}})),a}return yield this.lock(`lock:${this.storageKey}`,t,()=>P(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push(P(this,null,function*(){try{yield n}catch(a){}})),yield n;this.pendingInLock.length;){const a=[...this.pendingInLock];yield Promise.all(a),this.pendingInLock.splice(0,a.length)}return yield n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return P(this,null,function*(){this._debug("#_useSession","begin");try{const r=yield this.__loadSession();return yield t(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return P(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=yield Zn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<id:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=yield Zn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=fd()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=N1(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:s}=yield this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(t){return P(this,null,function*(){if(t)return yield this._getUser(t);yield this.initializePromise;const r=yield this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){return yield this._getUser()}));return r.data.user&&(this.suppressGetSessionWarning=!0),r})}_getUser(t){return P(this,null,function*(){try{return t?yield _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:kn}):yield this._useSession(r=>P(this,null,function*(){var n,a,s;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xt}:yield _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:kn})}))}catch(r){if(xe(r))return t1(r)&&(yield this._removeSession(),yield xt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}})}updateUser(n){return P(this,arguments,function*(t,r={}){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){return yield this._updateUser(t,r)}))})}_updateUser(n){return P(this,arguments,function*(t,r={}){try{return yield this._useSession(a=>P(this,null,function*(){const{data:s,error:o}=a;if(o)throw o;if(!s.session)throw new Xt;const l=s.session;let c=null,h=null;this.flowType==="pkce"&&t.email!=null&&([c,h]=yield Va(this.storage,this.storageKey));const{data:p,error:d}=yield _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:h}),jwt:l.access_token,xform:kn});if(d)throw d;return l.user=p.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})}))}catch(a){if(yield xt(this.storage,`${this.storageKey}-code-verifier`),xe(a))return this._returnResult({data:{user:null},error:a});throw a}})}setSession(t){return P(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return P(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new Xt;const r=Date.now()/1e3;let n=r,a=!0,s=null;const{payload:o}=dd(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=yield this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=yield this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(xe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}})}refreshSession(t){return P(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return P(this,null,function*(){try{return yield this._useSession(r=>P(this,null,function*(){var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Xt;const{data:a,error:s}=yield this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}_getSessionFromURL(t,r){return P(this,null,function*(){try{if(!vt())throw new Fo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new dg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new dg("No code detected.");const{data:m,error:y}=yield this._exchangeCodeForSession(t.code);if(y)throw y;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:h}=t;if(!s||!l||!o||!h)throw new Fo("No session defined in URL");const p=Math.round(Date.now()/1e3),d=parseInt(l);let u=p+d;c&&(u=parseInt(c));const f=u-p;f*1e3<=qa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const x=u-d;p-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,u,p):p-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,u,p);const{data:b,error:w}=yield this._getUser(s);if(w)throw w;const g={provider_token:n,provider_refresh_token:a,access_token:s,expires_in:d,expires_at:u,refresh_token:o,token_type:h,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if(xe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}})}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}_isPKCECallback(t){return P(this,null,function*(){const r=yield Zn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)})}signOut(){return P(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return P(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(r=>P(this,null,function*(){var n;const{data:a,error:s}=r;if(s)return this._returnResult({error:s});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=yield this.admin.signOut(o,t);if(l&&!(e1(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(yield this._removeSession(),yield xt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(t){const r=u1(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),P(this,null,function*(){yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:n}}}_emitInitialSession(t){return P(this,null,function*(){return yield this._useSession(r=>P(this,null,function*(){var n,a;try{const{data:{session:s},error:o}=r;if(o)throw o;yield(n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){yield(a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}}))})}resetPasswordForEmail(n){return P(this,arguments,function*(t,r={}){let a=null,s=null;this.flowType==="pkce"&&([a,s]=yield Va(this.storage,this.storageKey,!0));try{return yield _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(yield xt(this.storage,`${this.storageKey}-code-verifier`),xe(o))return this._returnResult({data:null,error:o});throw o}})}getUserIdentities(){return P(this,null,function*(){var t;try{const{data:r,error:n}=yield this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}})}linkIdentity(t){return P(this,null,function*(){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)})}linkIdentityOAuth(t){return P(this,null,function*(){var r;try{const{data:n,error:a}=yield this._useSession(s=>P(this,null,function*(){var o,l,c,h,p;const{data:d,error:u}=s;if(u)throw u;const f=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield _e(this.fetch,"GET",f,{headers:this.headers,jwt:(p=(h=d.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})}));if(a)throw a;return vt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(xe(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}})}linkIdentityIdToken(t){return P(this,null,function*(){return yield this._useSession(r=>P(this,null,function*(){var n;try{const{error:a,data:{session:s}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:h,nonce:p}=t,d=yield _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:gr}),{data:u,error:f}=d;return f?this._returnResult({data:{user:null,session:null},error:f}):!u||!u.session||!u.user?this._returnResult({data:{user:null,session:null},error:new Ba}):(u.session&&(yield this._saveSession(u.session),yield this._notifyAllSubscribers("USER_UPDATED",u.session)),this._returnResult({data:u,error:f}))}catch(a){if(yield xt(this.storage,`${this.storageKey}-code-verifier`),xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}))})}unlinkIdentity(t){return P(this,null,function*(){try{return yield this._useSession(r=>P(this,null,function*(){var n,a;const{data:s,error:o}=r;if(o)throw o;return yield _e(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})}))}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}})}_refreshAccessToken(t){return P(this,null,function*(){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return yield p1(a=>P(this,null,function*(){return a>0&&(yield h1(200*Math.pow(2,a-1))),this._debug(r,"refreshing attempt",a),yield _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:gr})}),(a,s)=>{const o=200*Math.pow(2,a);return s&&cd(s)&&Date.now()+o-n<qa})}catch(n){if(this._debug(r,"error",n),xe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){return P(this,null,function*(){const n=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),vt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}})}_recoverAndRefresh(){return P(this,null,function*(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=yield Zn(this.storage,this.storageKey);if(a&&this.userStorage){let o=yield Zn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},yield za(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:fd()}else if(a&&!a.user&&!a.user){const o=yield Zn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,yield xt(this.storage,this.storageKey+"-user"),yield za(this.storage,this.storageKey,a)):a.user=fd()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&(yield this._removeSession());return}const s=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<id;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${id}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=yield this._callRefreshToken(a.refresh_token);o&&(console.error(o),cd(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),yield this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=yield this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,yield this._saveSession(a),yield this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else yield this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}})}_callRefreshToken(t){return P(this,null,function*(){var r,n;if(!t)throw new Xt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Vo;const{data:s,error:o}=yield this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Xt;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),xe(s)){const o={data:null,error:s};return cd(s)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}})}_notifyAllSubscribers(t,r,n=!0){return P(this,null,function*(){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(l=>P(this,null,function*(){try{yield l.callback(t,r)}catch(c){s.push(c)}}));if(yield Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}})}_saveSession(t){return P(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,yield xt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&(yield za(this.userStorage,this.storageKey+"-user",{user:r.user}));const a=Object.assign({},r);delete a.user;const s=xg(a);yield za(this.storage,this.storageKey,s)}else{const a=xg(r);yield za(this.storage,this.storageKey,a)}})}_removeSession(){return P(this,null,function*(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,yield xt(this.storage,this.storageKey),yield xt(this.storage,this.storageKey+"-code-verifier"),yield xt(this.storage,this.storageKey+"-user"),this.userStorage&&(yield xt(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&vt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return P(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),qa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(()=>P(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)})}_stopAutoRefresh(){return P(this,null,function*(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)})}startAutoRefresh(){return P(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return P(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return P(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>P(this,null,function*(){try{const t=Date.now();try{return yield this._useSession(r=>P(this,null,function*(){const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/qa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${qa}ms, refresh threshold is ${sd} ticks`),a<=sd&&(yield this._callRefreshToken(n.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof Ng)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return P(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!vt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>P(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return P(this,null,function*(){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,r,n){return P(this,null,function*(){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=yield Va(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);a.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`})}_unenroll(t){return P(this,null,function*(){try{return yield this._useSession(r=>P(this,null,function*(){var n;const{data:a,error:s}=r;return s?this._returnResult({data:null,error:s}):yield _e(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})}))}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}})}_enroll(t){return P(this,null,function*(){try{return yield this._useSession(r=>P(this,null,function*(){var n,a;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:h}=yield _e(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))}))}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}})}_verify(t){return P(this,null,function*(){return this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){try{return yield this._useSession(r=>P(this,null,function*(){var n;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?V1(t.webauthn.credential_response):H1(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=yield _e(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))}))}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}))})}_challenge(t){return P(this,null,function*(){return this._acquireLock(this.lockAcquireTimeout,()=>P(this,null,function*(){try{return yield this._useSession(r=>P(this,null,function*(){var n;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=yield _e(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:F1(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:z1(l.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}))})}_challengeAndVerify(t){return P(this,null,function*(){const{data:r,error:n}=yield this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):yield this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})})}_listFactors(){return P(this,null,function*(){var t;const{data:{user:r},error:n}=yield this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(s),s.status==="verified"&&a[s.factor_type].push(s);return{data:a,error:null}})}_getAuthenticatorAssuranceLevel(){return P(this,null,function*(){var t,r;const{data:{session:n},error:a}=yield this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=dd(n.access_token);let o=null;s.aal&&(o=s.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=s.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:h},error:null}})}_getAuthorizationDetails(t){return P(this,null,function*(){try{return yield this._useSession(r=>P(this,null,function*(){const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?yield _e(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Xt})}))}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}})}_approveAuthorization(t,r){return P(this,null,function*(){try{return yield this._useSession(n=>P(this,null,function*(){const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new Xt});const o=yield _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&vt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o}))}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}})}_denyAuthorization(t,r){return P(this,null,function*(){try{return yield this._useSession(n=>P(this,null,function*(){const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new Xt});const o=yield _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&vt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o}))}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}})}_listOAuthGrants(){return P(this,null,function*(){try{return yield this._useSession(t=>P(this,null,function*(){const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?yield _e(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Xt})}))}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}})}_revokeOAuthGrant(t){return P(this,null,function*(){try{return yield this._useSession(r=>P(this,null,function*(){const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(yield _e(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Xt})}))}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}})}fetchJwk(n){return P(this,arguments,function*(t,r={keys:[]}){let a=r.keys.find(c=>c.kid===t);if(a)return a;const s=Date.now();if(a=this.jwks.keys.find(c=>c.kid===t),a&&this.jwks_cached_at+Xw>s)return a;const{data:o,error:l}=yield _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,a=o.keys.find(c=>c.kid===t),!a)?null:a})}getClaims(n){return P(this,arguments,function*(t,r={}){try{let a=t;if(!a){const{data:x,error:b}=yield this.getSession();if(b||!x.session)return this._returnResult({data:null,error:b});a=x.session.access_token}const{header:s,payload:o,signature:l,raw:{header:c,payload:h}}=dd(a);r!=null&&r.allowExpired||w1(o.exp);const p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!p){const{error:x}=yield this.getUser(a);if(x)throw x;return{data:{claims:o,header:s,signature:l},error:null}}const d=_1(s.alg),u=yield crypto.subtle.importKey("jwk",p,d,!0,["verify"]);if(!(yield crypto.subtle.verify(d,u,l,l1(`${c}.${h}`))))throw new ud("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(a){if(xe(a))return this._returnResult({data:null,error:a});throw a}})}}si.nextInstanceID={};const e_=si,t_="2.90.1";let ii="";typeof Deno!="undefined"?ii="deno":typeof document!="undefined"?ii="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?ii="react-native":ii="node";const r_={headers:{"X-Client-Info":`supabase-js-${ii}/${t_}`}},n_={schema:"public"},a_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},s_={};function oi(e){"@babel/helpers - typeof";return oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(e)}function i_(e,t){if(oi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(oi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o_(e){var t=i_(e,"string");return oi(t)=="symbol"?t:t+""}function l_(e,t,r){return(t=o_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tg(Object(r),!0).forEach(function(n){l_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tg(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const c_=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),u_=()=>Headers,d_=(e,t,r)=>{const n=c_(r),a=u_();return(s,o)=>P(this,null,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let h=new a(o==null?void 0:o.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),n(s,Ye(Ye({},o),{},{headers:h}))})};function f_(e){return e.endsWith("/")?e:e+"/"}function h_(e,t){var r,n;const{db:a,auth:s,realtime:o,global:l}=e,{db:c,auth:h,realtime:p,global:d}=t,u={db:Ye(Ye({},c),a),auth:Ye(Ye({},h),s),realtime:Ye(Ye({},p),o),storage:{},global:Ye(Ye(Ye({},d),l),{},{headers:Ye(Ye({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>P(this,null,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}function p_(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(f_(t))}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var m_=class extends e_{constructor(e){super(e)}},g_=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const s=p_(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,l={db:n_,realtime:s_,auth:Ye(Ye({},a_),{},{storageKey:o}),global:r_},c=h_(r!=null?r:{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(p,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=c.auth)!==null&&h!==void 0?h:{},this.headers,c.global.fetch)}this.fetch=d_(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Ye({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new Qb(new URL("rest/v1",s).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Kw(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Wb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return P(this,null,function*(){var e=this,t,r;if(e.accessToken)return yield e.accessToken();const{data:n}=yield e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:s,flowType:o,lock:l,debug:c,throwOnError:h},p,d){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new m_({url:this.authUrl.href,headers:Ye(Ye({},u),p),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:h,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new hw(this.realtimeUrl.href,Ye(Ye({},e),{},{params:Ye(Ye({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const y_=(e,t,r)=>new g_(e,t,r);function v_(){if(typeof window!="undefined")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}v_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const x_="https://cfyjnmuwvidzkyqwsrev.supabase.co",pd="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmeWpubXV3dmlkemt5cXdzcmV2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4NDgyOTAsImV4cCI6MjA4MzQyNDI5MH0.q72KxHICEc1F1pxw94jwgcHM6h-zD9aqQfp1CsBomSE",Jr=y_(x_,pd,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Ag="https://cfyjnmuwvidzkyqwsrev.supabase.co";function be(e,t){return P(this,null,function*(){const{data:{session:r},error:n}=yield Jr.auth.refreshSession();if(n)throw new Error("Error al obtener la sesin: "+n.message);if(!r)throw new Error("No hay sesin activa. Cierra sesin e inicia sesin de nuevo.");const a=r.access_token;if(!a)throw new Error("No hay token disponible. Por favor, inicia sesin de nuevo.");return Cg(e,t,a)})}let Or=0;const b_=1;function Cg(e,t,r,n=!1){return P(this,null,function*(){var d,u,f;const{method:a="GET",body:s,headers:o={},params:l}=t;if(n){if(Or++,Or>b_)throw Or=0,new Error("Demasiados reintentos. Por favor, inicia sesin de nuevo.")}else Or=0;let c=`${Ag}/functions/v1/${e}`;if(l){const x=new URLSearchParams(l);c+=`?${x.toString()}`}console.log(" Llamando a Edge Function:",{functionName:e,method:a,url:c,tokenPreview:r.substring(0,20)+"...",tokenLength:r.length,isRetry:n,retryCount:Or,hasApikey:!0});const h=yield fetch(c,{method:a,headers:X({"Content-Type":"application/json",Authorization:`Bearer ${r}`,apikey:pd},o),body:s?JSON.stringify(s):void 0});if(console.log(" Fetch completado, status:",h.status),console.log(" Respuesta recibida:",{status:h.status,statusText:h.statusText,ok:h.ok}),!h.ok){let x={error:`Error ${h.status}: ${h.statusText}`};try{const w=yield h.text();w&&(x=JSON.parse(w))}catch(w){x={error:(yield h.text().catch(()=>""))||`Error ${h.status}: ${h.statusText}`}}if(console.error(" Error en respuesta:",x),x!=null&&x.debug&&console.error(" Error debug (401):",x.debug),h.status===401&&!n){if(console.log(" Error 401 detectado, intentando refrescar sesin..."),(d=x.message)!=null&&d.includes("rate limit")||x.code===429)throw console.error(" Rate limit alcanzado. Esperando antes de reintentar..."),Or=0,new Error("Demasiadas solicitudes. Por favor, espera unos segundos e intenta de nuevo.");try{const{data:{session:w},error:g}=yield Jr.auth.refreshSession();if(!g&&(w!=null&&w.access_token)&&w.access_token!==r)return console.log(" Token refrescado, reintentando peticin..."),Cg(e,t,w.access_token,!0);console.error(" No se pudo refrescar la sesin:",g),Or=0;const m=x.details||x.error||x.message;throw new Error(m||"Sesin expirada o invlida. Cierra sesin e inicia sesin de nuevo.")}catch(w){throw Or=0,(u=w.message)!=null&&u.includes("rate limit")?new Error("Demasiadas solicitudes de refresco. Por favor, espera unos segundos e inicia sesin de nuevo."):w}}Or=0;const b=x.details||x.error||x.message||`Error ${h.status}: ${h.statusText}`;throw new Error(typeof b=="string"?b:((f=b==null?void 0:b.toString)==null?void 0:f.call(b))||JSON.stringify(x))}Or=0;const p=yield h.json();return console.log(" Respuesta parseada:",{type:typeof p,isArray:Array.isArray(p),keys:typeof p=="object"&&p!==null?Object.keys(p):"N/A",preview:JSON.stringify(p).substring(0,200)}),p})}function md(e,t,r){return P(this,null,function*(){var u,f,x;const{data:{session:n},error:a}=yield Jr.auth.refreshSession();if(a||!(n!=null&&n.access_token))throw new Error((a==null?void 0:a.message)||"No hay sesin activa. Inicia sesin de nuevo.");const s=`${Ag}/functions/v1/${e}`,o=yield fetch(s,{method:t.method||"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.access_token}`,apikey:pd},body:t.body?JSON.stringify(t.body):void 0});if(!o.ok){const b=yield o.text();let w;try{w=b?JSON.parse(b):{error:o.statusText}}catch(m){w={error:b||o.statusText}}const g=(f=(u=w==null?void 0:w.error)!=null?u:w==null?void 0:w.details)!=null?f:o.statusText;throw new Error(typeof g=="string"?g:JSON.stringify(g))}const l=o.headers.get("Content-Type")||"";if(!l.includes("ndjson")&&!l.includes("x-ndjson")){const b=yield o.json();return r(b),b}const c=(x=o.body)==null?void 0:x.getReader();if(!c)throw new Error("Respuesta sin body");const h=new TextDecoder;let p="",d=null;for(;;){const{done:b,value:w}=yield c.read();if(b)break;p+=h.decode(w,{stream:!0});const g=p.split(`
`);p=g.pop()||"";for(const m of g){const y=m.trim();if(y)try{const v=JSON.parse(y);d=v,r(v)}catch(v){}}}if(p.trim())try{const b=JSON.parse(p.trim());d=b,r(b)}catch(b){}if(d==null)throw new Error("No se recibi ningn evento del stream");return d})}const Pg=B.createContext(void 0);function w_({children:e}){const[t,r]=B.useState(null),[n,a]=B.useState(null),[s,o]=B.useState(!0);B.useEffect(()=>{Jr.auth.getSession().then(({data:{session:d}})=>{var u;a(d),r((u=d==null?void 0:d.user)!=null?u:null),o(!1)});const{data:{subscription:p}}=Jr.auth.onAuthStateChange((d,u)=>P(this,null,function*(){var f,x,b,w;console.log(" Auth state changed:",{event:d,hasSession:!!u,userId:(f=u==null?void 0:u.user)==null?void 0:f.id,email:(x=u==null?void 0:u.user)==null?void 0:x.email,expiresAt:u!=null&&u.expires_at?new Date(u.expires_at*1e3).toISOString():"N/A"}),console.log("AAA - setSession(session)",u),a(u),console.log("BBB - setUser(session?.user ?? null)",(b=u==null?void 0:u.user)!=null?b:null),r((w=u==null?void 0:u.user)!=null?w:null),console.log("CCC - setLoading(false)",!1),o(!1),console.log("DDD - setLoading(false)",!1),u&&d==="TOKEN_REFRESHED"&&console.log(" Token refrescado automticamente"),d==="SIGNED_OUT"&&console.log(" Usuario cerr sesin"),d==="SIGNED_OUT"&&!u&&console.warn(" Sesin perdida inesperadamente")}));return()=>p.unsubscribe()},[]);const l=(p,d)=>P(this,null,function*(){const{error:u}=yield Jr.auth.signInWithPassword({email:p,password:d});if(u)throw u}),c=(p,d)=>P(this,null,function*(){const{error:u}=yield Jr.auth.signUp({email:p,password:d});if(u)throw u}),h=()=>P(this,null,function*(){const{error:p}=yield Jr.auth.signOut();if(p)throw p});return i.jsx(Pg.Provider,{value:{user:t,session:n,loading:s,signIn:l,signUp:c,signOut:h},children:e})}function Ko(){const e=B.useContext(Pg);if(e===void 0)throw new Error("useAuth debe usarse dentro de AuthProvider");return e}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var __={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Te=(e,t)=>{const r=B.forwardRef((d,p)=>{var u=d,{color:n="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:c}=u,h=Lr(u,["color","size","strokeWidth","absoluteStrokeWidth","className","children"]);return B.createElement("svg",X(de(X({ref:p},__),{width:a,height:a,stroke:n,strokeWidth:o?Number(s)*24/Number(a):s,className:["lucide",`lucide-${j_(e)}`,l].join(" ")}),h),[...t.map(([f,x])=>B.createElement(f,x)),...Array.isArray(c)?c:[c]])});return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Te("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Te("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=Te("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=Te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=Te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=Te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Te("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=Te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=Te("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=Te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=Te("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=Te("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=Te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=Te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=Te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=Te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=Te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=Te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Te("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=Te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=Te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=Te("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=Te("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=Te("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=Te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=Te("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=Te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);let I_={data:""},D_=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||I_},M_=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,$_=/\/\*[^]*?\*\/|  +/g,Mg=/\n+/g,On=(e,t)=>{let r="",n="",a="";for(let s in e){let o=e[s];s[0]=="@"?s[1]=="i"?r=s+" "+o+";":n+=s[1]=="f"?On(o,s):s+"{"+On(o,s[1]=="k"?"":t)+"}":typeof o=="object"?n+=On(o,t?t.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=On.p?On.p(s,o):s+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+n},Qr={},$g=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+$g(e[r]);return t}return e},U_=(e,t,r,n,a)=>{let s=$g(e),o=Qr[s]||(Qr[s]=(c=>{let h=0,p=11;for(;h<c.length;)p=101*p+c.charCodeAt(h++)>>>0;return"go"+p})(s));if(!Qr[o]){let c=s!==e?e:(h=>{let p,d,u=[{}];for(;p=M_.exec(h.replace($_,""));)p[4]?u.shift():p[3]?(d=p[3].replace(Mg," ").trim(),u.unshift(u[0][d]=u[0][d]||{})):u[0][p[1]]=p[2].replace(Mg," ").trim();return u[0]})(e);Qr[o]=On(a?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&Qr.g?Qr.g:null;return r&&(Qr.g=Qr[o]),((c,h,p,d)=>{d?h.data=h.data.replace(d,c):h.data.indexOf(c)===-1&&(h.data=p?c+h.data:h.data+c)})(Qr[o],t,n,l),o},q_=(e,t,r)=>e.reduce((n,a,s)=>{let o=t[s];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":On(l,""):l===!1?"":l}return n+a+(o==null?"":o)},"");function Qo(e){let t=this||{},r=e.call?e(t.p):e;return U_(r.unshift?r.raw?q_(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,D_(t.target),t.g,t.o,t.k)}let Ug,Nd,Sd;Qo.bind({g:1});let Xr=Qo.bind({k:1});function B_(e,t,r,n){On.p=t,Ug=e,Nd=r,Sd=n}function Tn(e,t){let r=this||{};return function(){let n=arguments;function a(s,o){let l=Object.assign({},s),c=l.className||a.className;r.p=Object.assign({theme:Nd&&Nd()},l),r.o=/ *go\d+/.test(c),l.className=Qo.apply(r,n)+(c?" "+c:"");let h=e;return e[0]&&(h=l.as||e,delete l.as),Sd&&h[0]&&Sd(l),Ug(h,l)}return a}}var F_=e=>typeof e=="function",Xo=(e,t)=>F_(e)?e(t):e,z_=(()=>{let e=0;return()=>(++e).toString()})(),qg=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),V_=20,Ed="default",Bg=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return de(X({},e),{toasts:[t.toast,...e.toasts].slice(0,r)});case 1:return de(X({},e),{toasts:e.toasts.map(o=>o.id===t.toast.id?X(X({},o),t.toast):o)});case 2:let{toast:n}=t;return Bg(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return de(X({},e),{toasts:e.toasts.map(o=>o.id===a||a===void 0?de(X({},o),{dismissed:!0,visible:!1}):o)});case 4:return t.toastId===void 0?de(X({},e),{toasts:[]}):de(X({},e),{toasts:e.toasts.filter(o=>o.id!==t.toastId)});case 5:return de(X({},e),{pausedAt:t.time});case 6:let s=t.time-(e.pausedAt||0);return de(X({},e),{pausedAt:void 0,toasts:e.toasts.map(o=>de(X({},o),{pauseDuration:o.pauseDuration+s}))})}},Zo=[],Fg={toasts:[],pausedAt:void 0,settings:{toastLimit:V_}},Ar={},zg=(e,t=Ed)=>{Ar[t]=Bg(Ar[t]||Fg,e),Zo.forEach(([r,n])=>{r===t&&n(Ar[t])})},Vg=e=>Object.keys(Ar).forEach(t=>zg(e,t)),H_=e=>Object.keys(Ar).find(t=>Ar[t].toasts.some(r=>r.id===e)),el=(e=Ed)=>t=>{zg(t,e)},W_={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},K_=(e={},t=Ed)=>{let[r,n]=B.useState(Ar[t]||Fg),a=B.useRef(Ar[t]);B.useEffect(()=>(a.current!==Ar[t]&&n(Ar[t]),Zo.push([t,n]),()=>{let o=Zo.findIndex(([l])=>l===t);o>-1&&Zo.splice(o,1)}),[t]);let s=r.toasts.map(o=>{var l,c,h;return de(X(X(X({},e),e[o.type]),o),{removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||W_[o.type],style:X(X(X({},e.style),(h=e[o.type])==null?void 0:h.style),o.style)})});return de(X({},r),{toasts:s})},G_=(e,t="blank",r)=>de(X({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},r),{id:(r==null?void 0:r.id)||z_()}),ci=e=>(t,r)=>{let n=G_(t,e,r);return el(n.toasterId||H_(n.id))({type:2,toast:n}),n.id},ct=(e,t)=>ci("blank")(e,t);ct.error=ci("error"),ct.success=ci("success"),ct.loading=ci("loading"),ct.custom=ci("custom"),ct.dismiss=(e,t)=>{let r={type:3,toastId:e};t?el(t)(r):Vg(r)},ct.dismissAll=e=>ct.dismiss(void 0,e),ct.remove=(e,t)=>{let r={type:4,toastId:e};t?el(t)(r):Vg(r)},ct.removeAll=e=>ct.remove(void 0,e),ct.promise=(e,t,r)=>{let n=ct.loading(t.loading,X(X({},r),r==null?void 0:r.loading));return typeof e=="function"&&(e=e()),e.then(a=>{let s=t.success?Xo(t.success,a):void 0;return s?ct.success(s,X(X({id:n},r),r==null?void 0:r.success)):ct.dismiss(n),a}).catch(a=>{let s=t.error?Xo(t.error,a):void 0;s?ct.error(s,X(X({id:n},r),r==null?void 0:r.error)):ct.dismiss(n)}),e};var J_=1e3,Y_=(e,t="default")=>{let{toasts:r,pausedAt:n}=K_(e,t),a=B.useRef(new Map).current,s=B.useCallback((d,u=J_)=>{if(a.has(d))return;let f=setTimeout(()=>{a.delete(d),o({type:4,toastId:d})},u);a.set(d,f)},[]);B.useEffect(()=>{if(n)return;let d=Date.now(),u=r.map(f=>{if(f.duration===1/0)return;let x=(f.duration||0)+f.pauseDuration-(d-f.createdAt);if(x<0){f.visible&&ct.dismiss(f.id);return}return setTimeout(()=>ct.dismiss(f.id,t),x)});return()=>{u.forEach(f=>f&&clearTimeout(f))}},[r,n,t]);let o=B.useCallback(el(t),[t]),l=B.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=B.useCallback((d,u)=>{o({type:1,toast:{id:d,height:u}})},[o]),h=B.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),p=B.useCallback((d,u)=>{let{reverseOrder:f=!1,gutter:x=8,defaultPosition:b}=u||{},w=r.filter(y=>(y.position||b)===(d.position||b)&&y.height),g=w.findIndex(y=>y.id===d.id),m=w.filter((y,v)=>v<g&&y.visible).length;return w.filter(y=>y.visible).slice(...f?[m+1]:[0,m]).reduce((y,v)=>y+(v.height||0)+x,0)},[r]);return B.useEffect(()=>{r.forEach(d=>{if(d.dismissed)s(d.id,d.removeDelay);else{let u=a.get(d.id);u&&(clearTimeout(u),a.delete(d.id))}})},[r,s]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:h,calculateOffset:p}}},Q_=Xr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,X_=Xr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Z_=Xr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ej=Tn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Q_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${X_} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Z_} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,tj=Xr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,rj=Tn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${tj} 1s linear infinite;
`,nj=Xr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,aj=Xr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,sj=Tn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${nj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${aj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ij=Tn("div")`
  position: absolute;
`,oj=Tn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,lj=Xr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,cj=Tn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${lj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,uj=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?B.createElement(cj,null,t):t:r==="blank"?null:B.createElement(oj,null,B.createElement(rj,X({},n)),r!=="loading"&&B.createElement(ij,null,r==="error"?B.createElement(ej,X({},n)):B.createElement(sj,X({},n))))},dj=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,fj=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,hj="0%{opacity:0;} 100%{opacity:1;}",pj="0%{opacity:1;} 100%{opacity:0;}",mj=Tn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,gj=Tn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,yj=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=qg()?[hj,pj]:[dj(r),fj(r)];return{animation:t?`${Xr(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Xr(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},vj=B.memo(({toast:e,position:t,style:r,children:n})=>{let a=e.height?yj(e.position||t||"top-center",e.visible):{opacity:0},s=B.createElement(uj,{toast:e}),o=B.createElement(gj,X({},e.ariaProps),Xo(e.message,e));return B.createElement(mj,{className:e.className,style:X(X(X({},a),r),e.style)},typeof n=="function"?n({icon:s,message:o}):B.createElement(B.Fragment,null,s,o))});B_(B.createElement);var xj=({id:e,className:t,style:r,onHeightUpdate:n,children:a})=>{let s=B.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return B.createElement("div",{ref:s,className:t,style:r},a)},bj=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return X(X({left:0,right:0,display:"flex",position:"absolute",transition:qg()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`},n),a)},wj=Qo`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,tl=16,_j=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:a,toasterId:s,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:h}=Y_(r,s);return B.createElement("div",{"data-rht-toaster":s||"",style:X({position:"fixed",zIndex:9999,top:tl,left:tl,right:tl,bottom:tl,pointerEvents:"none"},o),className:l,onMouseEnter:h.startPause,onMouseLeave:h.endPause},c.map(p=>{let d=p.position||t,u=h.calculateOffset(p,{reverseOrder:e,gutter:n,defaultPosition:t}),f=bj(d,u);return B.createElement(xj,{id:p.id,key:p.id,onHeightUpdate:h.updateHeight,className:p.visible?wj:"",style:f},p.type==="custom"?Xo(p.message,p):a?a(p):B.createElement(vj,{toast:p,position:d}))}))},te=ct;function jj(){window.console.log(" Login - Componente renderizado ");const[e,t]=B.useState(!1),[r,n]=B.useState(""),[a,s]=B.useState(""),[o,l]=B.useState(!1),[c,h]=B.useState(!0),{signIn:p,signUp:d}=Ko();console.log(" Login - Estado:",{isSignUp:e,signUpEnabled:c,loading:o}),B.useEffect(()=>{h(!0)},[]);const u=f=>P(this,null,function*(){f.preventDefault(),l(!0);try{if(e&&c)yield d(r,a),te.success("Cuenta creada! Revisa tu email para confirmar.");else{yield p(r,a),yield new Promise(b=>setTimeout(b,500));const{data:{session:x}}=yield Jr.auth.getSession();if(!x)throw new Error("No se pudo establecer la sesin. Intenta de nuevo.");te.success("Bienvenido!")}}catch(x){te.error(x.message||"Error al autenticar")}finally{l(!1)}});return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:i.jsxs("div",{className:"card max-w-md w-full",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"alergIA-club"}),i.jsx("p",{className:"text-gray-600",children:"Gestin de Productos Shopify"})]}),i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),i.jsx("input",{id:"email",type:"email",value:r,onChange:f=>n(f.target.value),required:!0,className:"input-field",placeholder:"tu@email.com"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrasea"}),i.jsx("input",{id:"password",type:"password",value:a,onChange:f=>s(f.target.value),required:!0,minLength:6,className:"input-field",placeholder:""})]}),i.jsx("button",{type:"submit",disabled:o,className:"btn-primary w-full flex items-center justify-center gap-2",children:o?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e?i.jsxs(i.Fragment,{children:[i.jsx(L_,{className:"w-5 h-5"}),"Crear cuenta"]}):i.jsxs(i.Fragment,{children:[i.jsx(A_,{className:"w-5 h-5"}),"Iniciar sesin"]})})]}),c&&i.jsx("div",{className:"mt-6 text-center",children:i.jsx("button",{type:"button",onClick:()=>t(!e),className:"text-sm text-primary-600 hover:text-primary-700",children:e?"Ya tienes cuenta? Inicia sesin":"No tienes cuenta? Regstrate"})})]})})}function Qe({children:e}){const{user:t,signOut:r}=Ko(),n=kt(),a=Do(),[s,o]=B.useState(!1),[l,c]=B.useState(!1),h=B.useRef(null),p=B.useRef(null);B.useEffect(()=>{const f=x=>{h.current&&!h.current.contains(x.target)&&o(!1),p.current&&!p.current.contains(x.target)&&c(!1)};if(s||l)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[s,l]);const d=()=>P(this,null,function*(){try{yield r(),n("/")}catch(f){console.error("Error al cerrar sesin:",f)}}),u=f=>a.pathname.startsWith(f);return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Pt,{className:"w-8 h-8 text-primary-600"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"alergIA-club"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Gestin de Catlogo"})]})]}),i.jsxs("nav",{className:"hidden md:flex items-center gap-1 ml-8",children:[i.jsxs("button",{onClick:()=>n("/products"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${u("/products")?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100"}`,children:[i.jsx(Pt,{className:"w-4 h-4 inline mr-2"}),"Productos"]}),i.jsxs("button",{onClick:()=>n("/master-data/categories"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${u("/master-data/categories")?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100"}`,children:[i.jsx(R_,{className:"w-4 h-4 inline mr-2"}),"Categoras"]}),i.jsxs("button",{onClick:()=>n("/catalog/subcategories"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${u("/catalog/subcategories")?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100"}`,children:[i.jsx(wd,{className:"w-4 h-4 inline mr-2"}),"Subcategoras"]}),i.jsxs("button",{onClick:()=>n("/shopify-sync"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${u("/shopify-sync")?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100"}`,children:[i.jsx(ta,{className:"w-4 h-4 inline mr-2"}),"Traspaso Shopify"]})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.email}),i.jsx("div",{className:"text-xs text-gray-500",children:"Usuario autenticado"})]}),i.jsxs("button",{onClick:d,className:"btn-secondary flex items-center gap-2",children:[i.jsx(C_,{className:"w-4 h-4"}),"Salir"]})]})]})})}),i.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})}const wt={getAll(e=1,t=50,r){return P(this,null,function*(){var a;const n={page:e.toString(),limit:t.toString(),order_by:(a=r==null?void 0:r.order_by)!=null?a:"title",order_asc:((r==null?void 0:r.order_asc)!==!1).toString()};return r!=null&&r.search&&(n.search=r.search),r!=null&&r.status&&(n.status=r.status),r!=null&&r.vendor&&(n.vendor=r.vendor),r!=null&&r.category_id&&String(r.category_id).trim()&&(n.category_id=r.category_id),r!=null&&r.subcategory_id&&String(r.subcategory_id).trim()&&(n.subcategory_id=r.subcategory_id),be("products",{method:"GET",params:n})})},getById(e){return P(this,null,function*(){return be(`products/${e}`,{method:"GET"})})},create(e){return P(this,null,function*(){return be("products",{method:"POST",body:e})})},update(e,t){return P(this,null,function*(){return be(`products/${e}`,{method:"PUT",body:t})})},delete(e){return P(this,null,function*(){return be(`products/${e}`,{method:"DELETE"})})}},he={subcategories:{getAll(e){return P(this,null,function*(){const t={};(e==null?void 0:e.active)!==void 0&&e.active!==null&&(t.active=e.active.toString()),e!=null&&e.search&&(t.search=e.search),e!=null&&e.order_by&&(t.order_by=e.order_by),(e==null?void 0:e.order_asc)!==void 0&&(t.order_asc=e.order_asc.toString()),e!=null&&e.category_id&&(t.category_id=e.category_id),e!=null&&e.page&&(t.page=e.page.toString()),e!=null&&e.limit&&(t.limit=e.limit.toString());const r=new URLSearchParams(t).toString(),n=r?`subcategories?${r}`:"subcategories";return be(n,{method:"GET"})})},getById(e){return P(this,null,function*(){return be(`subcategories/${e}`,{method:"GET"})})},create(e){return P(this,null,function*(){return be("subcategories",{method:"POST",body:e})})},update(e,t){return P(this,null,function*(){return be(`subcategories/${e}`,{method:"PUT",body:t})})},delete(e){return P(this,null,function*(){return be(`subcategories/${e}`,{method:"DELETE"})})}},categorySubcategories:{getAll(e){return P(this,null,function*(){const t={};e!=null&&e.category_id&&(t.category_id=e.category_id),e!=null&&e.subcategory_id&&(t.subcategory_id=e.subcategory_id);const r=new URLSearchParams(t).toString(),n=r?`category-subcategories?${r}`:"category-subcategories";return be(n,{method:"GET"})})},getById(e){return P(this,null,function*(){return be(`category-subcategories/${e}`,{method:"GET"})})},create(e){return P(this,null,function*(){return be("category-subcategories",{method:"POST",body:e})})},update(e,t){return P(this,null,function*(){return be(`category-subcategories/${e}`,{method:"PUT",body:t})})},delete(e){return P(this,null,function*(){return be(`category-subcategories/${e}`,{method:"DELETE"})})}},subcategoryProducts:{getAll(e){return P(this,null,function*(){const t={};e!=null&&e.subcategory_id&&(t.subcategory_id=e.subcategory_id),e!=null&&e.product_id&&(t.product_id=e.product_id),e!=null&&e.page&&(t.page=e.page.toString()),e!=null&&e.limit&&(t.limit=e.limit.toString());const r=new URLSearchParams(t).toString(),n=r?`subcategory-products?${r}`:"subcategory-products";return be(n,{method:"GET"})})},getById(e){return P(this,null,function*(){return be(`subcategory-products/${e}`,{method:"GET"})})},create(e){return P(this,null,function*(){return be("subcategory-products",{method:"POST",body:e})})},update(e,t){return P(this,null,function*(){return be(`subcategory-products/${e}`,{method:"PUT",body:t})})},delete(e){return P(this,null,function*(){return be(`subcategory-products/${e}`,{method:"DELETE"})})}},categorySubcategoryProducts:{getAll(e){return P(this,null,function*(){const t={};e!=null&&e.category_id&&(t.category_id=e.category_id),e!=null&&e.subcategory_id&&(t.subcategory_id=e.subcategory_id),e!=null&&e.product_id&&(t.product_id=e.product_id);const r=new URLSearchParams(t).toString(),n=r?`category-subcategory-products?${r}`:"category-subcategory-products";return be(n,{method:"GET"})})},getById(e){return P(this,null,function*(){return be(`category-subcategory-products/${e}`,{method:"GET"})})},create(e){return P(this,null,function*(){return be("category-subcategory-products",{method:"POST",body:e})})},update(e,t){return P(this,null,function*(){return be(`category-subcategory-products/${e}`,{method:"PUT",body:t})})},delete(e){return P(this,null,function*(){return be(`category-subcategory-products/${e}`,{method:"DELETE"})})}},subcategoryCriteria:{getAll(e){return P(this,null,function*(){const t={};e!=null&&e.subcategory_id&&(t.subcategory_id=e.subcategory_id),e!=null&&e.page&&(t.page=e.page.toString()),e!=null&&e.limit&&(t.limit=e.limit.toString());const r=new URLSearchParams(t).toString(),n=r?`subcategory-criteria?${r}`:"subcategory-criteria";return be(n,{method:"GET"})})},getById(e){return P(this,null,function*(){return be(`subcategory-criteria/${e}`,{method:"GET"})})},create(e){return P(this,null,function*(){return be("subcategory-criteria",{method:"POST",body:e})})},update(e,t){return P(this,null,function*(){return be(`subcategory-criteria/${e}`,{method:"PUT",body:t})})},delete(e){return P(this,null,function*(){return be(`subcategory-criteria/${e}`,{method:"DELETE"})})}},categoryContent:{getByCategoryId(e){return P(this,null,function*(){return be(`category-content?category_id=${e}`,{method:"GET"})})},getById(e){return P(this,null,function*(){return be(`category-content/${e}`,{method:"GET"})})},getAll(){return P(this,null,function*(){return be("category-content",{method:"GET"})})},create(e){return P(this,null,function*(){return be("category-content",{method:"POST",body:e})})},updateByCategoryId(e,t){return P(this,null,function*(){return be(`category-content?category_id=${e}`,{method:"PUT",body:t})})},update(e,t){return P(this,null,function*(){return be(`category-content/${e}`,{method:"PUT",body:t})})},deleteByCategoryId(e){return P(this,null,function*(){return be(`category-content?category_id=${e}`,{method:"DELETE"})})},delete(e){return P(this,null,function*(){return be(`category-content/${e}`,{method:"DELETE"})})}},subcategoryContent:{getBySubcategoryId(e){return P(this,null,function*(){return be(`subcategory-content?subcategory_id=${e}`,{method:"GET"})})},getById(e){return P(this,null,function*(){return be(`subcategory-content/${e}`,{method:"GET"})})},getAll(){return P(this,null,function*(){return be("subcategory-content",{method:"GET"})})},create(e){return P(this,null,function*(){return be("subcategory-content",{method:"POST",body:e})})},updateBySubcategoryId(e,t){return P(this,null,function*(){return be(`subcategory-content?subcategory_id=${e}`,{method:"PUT",body:t})})},update(e,t){return P(this,null,function*(){return be(`subcategory-content/${e}`,{method:"PUT",body:t})})},deleteBySubcategoryId(e){return P(this,null,function*(){return be(`subcategory-content?subcategory_id=${e}`,{method:"DELETE"})})},delete(e){return P(this,null,function*(){return be(`subcategory-content/${e}`,{method:"DELETE"})})}}};function vr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ra(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Hg=6048e5,Nj=864e5;let Sj={};function rl(){return Sj}function ui(e,t){var l,c,h,p,d,u,f,x;const r=rl(),n=(x=(f=(p=(h=t==null?void 0:t.weekStartsOn)!=null?h:(c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)!=null?p:r.weekStartsOn)!=null?f:(u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)!=null?x:0,a=vr(e),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function nl(e){return ui(e,{weekStartsOn:1})}function Wg(e){const t=vr(e),r=t.getFullYear(),n=ra(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=nl(n),s=ra(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=nl(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Kg(e){const t=vr(e);return t.setHours(0,0,0,0),t}function Gg(e){const t=vr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Ej(e,t){const r=Kg(e),n=Kg(t),a=+r-Gg(r),s=+n-Gg(n);return Math.round((a-s)/Nj)}function kj(e){const t=Wg(e),r=ra(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),nl(r)}function Oj(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Tj(e){if(!Oj(e)&&typeof e!="number")return!1;const t=vr(e);return!isNaN(Number(t))}function Aj(e){const t=vr(e),r=ra(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Cj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Pj=(e,t,r)=>{let n;const a=Cj[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function kd(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Rj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Lj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ij={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Dj={date:kd({formats:Rj,defaultWidth:"full"}),time:kd({formats:Lj,defaultWidth:"full"}),dateTime:kd({formats:Ij,defaultWidth:"full"})},Mj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$j=(e,t,r,n)=>Mj[e];function di(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const Uj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Fj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hj={ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:di({values:Uj,defaultWidth:"wide"}),quarter:di({values:qj,defaultWidth:"wide",argumentCallback:e=>e-1}),month:di({values:Bj,defaultWidth:"wide"}),day:di({values:Fj,defaultWidth:"wide"}),dayPeriod:di({values:zj,defaultWidth:"wide",formattingValues:Vj,defaultFormattingWidth:"wide"})};function fi(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Kj(l,d=>d.test(o)):Wj(l,d=>d.test(o));let h;h=e.valueCallback?e.valueCallback(c):c,h=r.valueCallback?r.valueCallback(h):h;const p=t.slice(o.length);return{value:h,rest:p}}}function Wj(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Kj(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Gj(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const Jj=/^(\d+)(th|st|nd|rd)?/i,Yj=/\d+/i,Qj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xj={any:[/^b/i,/^(a|c)/i]},Zj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eN={any:[/1/i,/2/i,/3/i,/4/i]},tN={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},rN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nN={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aN={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sN={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iN={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},oN={ordinalNumber:Gj({matchPattern:Jj,parsePattern:Yj,valueCallback:e=>parseInt(e,10)}),era:fi({matchPatterns:Qj,defaultMatchWidth:"wide",parsePatterns:Xj,defaultParseWidth:"any"}),quarter:fi({matchPatterns:Zj,defaultMatchWidth:"wide",parsePatterns:eN,defaultParseWidth:"any",valueCallback:e=>e+1}),month:fi({matchPatterns:tN,defaultMatchWidth:"wide",parsePatterns:rN,defaultParseWidth:"any"}),day:fi({matchPatterns:nN,defaultMatchWidth:"wide",parsePatterns:aN,defaultParseWidth:"any"}),dayPeriod:fi({matchPatterns:sN,defaultMatchWidth:"any",parsePatterns:iN,defaultParseWidth:"any"})},lN={code:"en-US",formatDistance:Pj,formatLong:Dj,formatRelative:$j,localize:Hj,match:oN,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cN(e){const t=vr(e);return Ej(t,Aj(t))+1}function uN(e){const t=vr(e),r=+nl(t)-+kj(t);return Math.round(r/Hg)+1}function Jg(e,t){var p,d,u,f,x,b,w,g;const r=vr(e),n=r.getFullYear(),a=rl(),s=(g=(w=(f=(u=t==null?void 0:t.firstWeekContainsDate)!=null?u:(d=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:d.firstWeekContainsDate)!=null?f:a.firstWeekContainsDate)!=null?w:(b=(x=a.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)!=null?g:1,o=ra(e,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=ui(o,t),c=ra(e,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const h=ui(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=h.getTime()?n:n-1}function dN(e,t){var l,c,h,p,d,u,f,x;const r=rl(),n=(x=(f=(p=(h=t==null?void 0:t.firstWeekContainsDate)!=null?h:(c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)!=null?p:r.firstWeekContainsDate)!=null?f:(u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)!=null?x:1,a=Jg(e,t),s=ra(e,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),ui(s,t)}function fN(e,t){const r=vr(e),n=+ui(r,t)-+dN(r,t);return Math.round(n/Hg)+1}function Re(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const An={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Re(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Re(r+1,2)},d(e,t){return Re(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Re(e.getHours()%12||12,t.length)},H(e,t){return Re(e.getHours(),t.length)},m(e,t){return Re(e.getMinutes(),t.length)},s(e,t){return Re(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Re(a,t.length)}},Ja={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Yg={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return An.y(e,t)},Y:function(e,t,r,n){const a=Jg(e,n),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return Re(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):Re(s,t.length)},R:function(e,t){const r=Wg(e);return Re(r,t.length)},u:function(e,t){const r=e.getFullYear();return Re(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Re(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Re(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return An.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Re(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=fN(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Re(a,t.length)},I:function(e,t,r){const n=uN(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Re(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):An.d(e,t)},D:function(e,t,r){const n=cN(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Re(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Re(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Re(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Re(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Ja.noon:n===0?a=Ja.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Ja.evening:n>=12?a=Ja.afternoon:n>=4?a=Ja.morning:a=Ja.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return An.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):An.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Re(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Re(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):An.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):An.s(e,t)},S:function(e,t){return An.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Xg(n);case"XXXX":case"XX":return na(n);case"XXXXX":case"XXX":default:return na(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Xg(n);case"xxxx":case"xx":return na(n);case"xxxxx":case"xxx":default:return na(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Qg(n,":");case"OOOO":default:return"GMT"+na(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Qg(n,":");case"zzzz":default:return"GMT"+na(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Re(n,t.length)},T:function(e,t,r){const n=e.getTime();return Re(n,t.length)}};function Qg(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+t+Re(s,2)}function Xg(e,t){return e%60===0?(e>0?"-":"+")+Re(Math.abs(e)/60,2):na(e,t)}function na(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Re(Math.trunc(n/60),2),s=Re(n%60,2);return r+a+t+s}const Zg=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},ey=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},hN={p:ey,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return Zg(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Zg(n,t)).replace("{{time}}",ey(a,t))}},pN=/^D+$/,mN=/^Y+$/,gN=["D","DD","YY","YYYY"];function yN(e){return pN.test(e)}function vN(e){return mN.test(e)}function xN(e,t,r){const n=bN(e,t,r);if(console.warn(n),gN.includes(e))throw new RangeError(n)}function bN(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const wN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_N=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jN=/^'([^]*?)'?$/,NN=/''/g,SN=/[a-zA-Z]/;function Zr(e,t,r){var p,d,u,f,x,b,w,g,m;const n=rl(),a=(p=n.locale)!=null?p:lN,s=(x=(f=n.firstWeekContainsDate)!=null?f:(u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)!=null?x:1,o=(m=(g=n.weekStartsOn)!=null?g:(w=(b=n.locale)==null?void 0:b.options)==null?void 0:w.weekStartsOn)!=null?m:0,l=vr(e);if(!Tj(l))throw new RangeError("Invalid time value");let c=t.match(_N).map(y=>{const v=y[0];if(v==="p"||v==="P"){const _=hN[v];return _(y,a.formatLong)}return y}).join("").match(wN).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:EN(y)};if(Yg[v])return{isToken:!0,value:y};if(v.match(SN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const h={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const v=y.value;(vN(v)||yN(v))&&xN(v,t,String(e));const _=Yg[v[0]];return _(l,v,a.localize,h)}).join("")}function EN(e){const t=e.match(jN);return t?t[1].replace(NN,"'"):e}const kN="rating",ON="characteristic";function TN({value:e}){const t=Math.min(5,Math.max(0,Math.round(Number(e))));return i.jsx("div",{className:"flex gap-0.5","aria-label":`${t} de 5 estrellas`,children:[1,2,3,4,5].map(r=>i.jsx(Ga,{className:`w-5 h-5 ${r<=t?"fill-amber-400 text-amber-500":"text-gray-200"}`,"aria-hidden":!0},r))})}function ty(e){return e.value!=null&&e.value!==""?String(e.value):e.value_json!=null?typeof e.value_json=="string"?e.value_json:JSON.stringify(e.value_json):""}function ry({product:e,onClose:t,onEdit:r}){var f;const n=Array.isArray(e.images)?e.images:[],[a,s]=B.useState(0),o=n[a],l=Array.isArray(e.metafields)?e.metafields:[],c=l.filter(x=>x.namespace===kN),h=l.filter(x=>x.namespace===ON),p=(f=e.variants)==null?void 0:f[0],d=p==null?void 0:p.price,u='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="400"%3E%3Crect fill="%23f3f4f6" width="400" height="400"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%239ca3af" font-size="18"%3ESin imagen%3C/text%3E%3C/svg%3E';return i.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("button",{onClick:t,className:"btn-secondary flex items-center gap-2",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("button",{onClick:r,className:"btn-primary flex items-center gap-2",children:[i.jsx(yr,{className:"w-4 h-4"}),"Editar"]})]}),i.jsx("div",{className:"card overflow-hidden",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"aspect-square bg-gray-100 rounded-xl overflow-hidden flex items-center justify-center",children:i.jsx("img",{src:o&&(typeof o.src=="string"?o.src:o.url)||u,alt:(o==null?void 0:o.alt_text)||e.title,className:"w-full h-full object-contain",onError:x=>{x.target.src=u}})}),n.length>1&&i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:n.map((x,b)=>i.jsx("button",{type:"button",onClick:()=>s(b),className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-colors ${a===b?"border-primary-500 ring-1 ring-primary-200":"border-gray-200"}`,children:i.jsx("img",{src:typeof x.src=="string"?x.src:x.url||u,alt:x.alt_text||"",className:"w-full h-full object-cover",onError:w=>{w.target.src=u}})},x.id||`img-${b}`))})]}),i.jsxs("div",{children:[e.vendor&&i.jsx("p",{className:"text-sm font-medium text-primary-600 mb-1",children:e.vendor}),i.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:e.title}),e.subtitle&&i.jsx("p",{className:"text-lg text-gray-600 mb-4",children:e.subtitle}),d!==void 0&&i.jsxs("p",{className:"text-2xl font-bold text-gray-900 mb-4",children:[d.toFixed(2)," ",(p==null?void 0:p.compare_at_price)!=null&&p.compare_at_price>d&&i.jsxs("span",{className:"ml-2 text-base font-normal text-gray-500 line-through",children:[p.compare_at_price.toFixed(2)," "]})]}),e.description_short&&i.jsx("div",{className:"text-gray-700 prose prose-sm max-w-none mb-4",dangerouslySetInnerHTML:{__html:e.description_short}}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${e.status==="active"?"bg-green-100 text-green-800":e.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:e.status==="active"?"Activo":e.status==="draft"?"Borrador":"Archivado"})]})]})}),e.selling_points&&e.selling_points.length>0&&i.jsxs("div",{className:"card",children:[i.jsxs("h2",{className:"section-title flex items-center gap-2",children:[i.jsx(Rg,{className:"w-5 h-5 text-green-600"}),"Puntos clave"]}),i.jsx("ul",{className:"space-y-2",children:e.selling_points.map((x,b)=>i.jsxs("li",{className:"flex items-start gap-2 text-gray-700",children:[i.jsx(Rg,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),i.jsx("span",{children:x})]},b))})]}),i.jsxs("div",{className:"card",children:[i.jsxs("h2",{className:"section-title flex items-center gap-2",children:[i.jsx(Ga,{className:"w-5 h-5 text-amber-500"}),"Valoracin"]}),c.length===0?i.jsx("p",{className:"text-sm text-gray-500 py-2",children:"An no hay criterios de valoracin. Edita el producto y aade metafields de tipo valoracin."}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:c.map((x,b)=>i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 p-3 bg-gray-50 rounded-lg",children:[i.jsx("span",{className:"font-medium text-gray-900",children:x.key||"Criterio"}),i.jsx(TN,{value:Number(ty(x))||0})]},x.id||`${x.namespace}-${x.key}-${b}`))})]}),i.jsxs("div",{className:"card",children:[i.jsxs("h2",{className:"section-title flex items-center gap-2",children:[i.jsx(Pt,{className:"w-5 h-5 text-primary-600"}),"Caractersticas tcnicas"]}),h.length===0?i.jsx("p",{className:"text-sm text-gray-500 py-2",children:"An no hay caractersticas tcnicas. Edita el producto y aade metafields de tipo caracterstica."}):i.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:h.map((x,b)=>i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 py-2 border-b border-gray-100 last:border-0",children:[i.jsx("dt",{className:"text-sm font-medium text-gray-600",children:x.key}),i.jsx("dd",{className:"text-gray-900",children:ty(x)||""})]},x.id||`${x.namespace}-${x.key}-${b}`))})]}),e.description_html&&i.jsxs("div",{className:"card",children:[i.jsx("h2",{className:"section-title",children:"Descripcin"}),i.jsx("div",{className:"text-gray-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e.description_html}})]}),e.variants&&e.variants.length>0&&i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"section-title flex items-center gap-2",children:[i.jsx(Pt,{className:"w-5 h-5 text-primary-600"}),"Variantes (",e.variants.length,")"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.variants.map(x=>{var b;return i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsx("div",{className:"font-medium text-gray-900 mb-2",children:x.title||`Variante ${x.sku||((b=x.id)==null?void 0:b.substring(0,8))||""}`}),i.jsxs("div",{className:"space-y-1 text-sm",children:[x.sku&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"SKU:"}),i.jsx("span",{className:"font-mono",children:x.sku})]}),x.price!==void 0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Precio:"}),i.jsxs("span",{className:"font-semibold",children:[x.price.toFixed(2)," "]})]}),x.inventory_quantity!==void 0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Stock:"}),i.jsx("span",{className:x.inventory_quantity>0?"text-green-600":"text-red-600",children:x.inventory_quantity})]})]})]},x.id)})})]}),n.length>1&&i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"section-title flex items-center gap-2",children:[i.jsx(Ig,{className:"w-5 h-5 text-primary-600"}),"Galera (",n.length,")"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:n.map((x,b)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:typeof x.src=="string"?x.src:x.url||u,alt:x.alt_text||"Product image",className:"w-full h-32 object-cover rounded-lg border border-gray-200",onError:w=>{w.target.src=u}}),x.alt_text&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x.alt_text})]},x.id||`gallery-${b}`))})]}),e.tags&&e.tags.length>0&&i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"section-title flex items-center gap-2",children:[i.jsx(wd,{className:"w-5 h-5 text-primary-600"}),"Etiquetas"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((x,b)=>i.jsx("span",{className:"px-3 py-1 bg-primary-50 text-primary-800 rounded-full text-sm",children:x},b))})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.created_at&&i.jsxs("div",{children:["Creado: ",Zr(new Date(e.created_at),"dd/MM/yyyy HH:mm")]}),e.updated_at&&i.jsxs("div",{children:["Actualizado: ",Zr(new Date(e.updated_at),"dd/MM/yyyy HH:mm")]})]})})]})}var hi=e=>e.type==="checkbox",aa=e=>e instanceof Date,Ft=e=>e==null;const ny=e=>typeof e=="object";var at=e=>!Ft(e)&&!Array.isArray(e)&&ny(e)&&!aa(e),AN=e=>at(e)&&e.target?hi(e.target)?e.target.checked:e.target.value:e,CN=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,PN=(e,t)=>e.has(CN(t)),RN=e=>{const t=e.constructor&&e.constructor.prototype;return at(t)&&t.hasOwnProperty("isPrototypeOf")},Od=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function ut(e){if(e instanceof Date)return new Date(e);const t=typeof FileList!="undefined"&&e instanceof FileList;if(Od&&(e instanceof Blob||t))return e;const r=Array.isArray(e);if(!r&&!(at(e)&&RN(e)))return e;const n=r?[]:Object.create(Object.getPrototypeOf(e));for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=ut(e[a]));return n}var al=e=>/^\w*$/.test(e),Ge=e=>e===void 0,Td=e=>Array.isArray(e)?e.filter(Boolean):[],Ad=e=>Td(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ve=(e,t,r)=>{if(!t||!at(e))return r;const n=(al(t)?[t]:Ad(t)).reduce((a,s)=>Ft(a)?a:a[s],e);return Ge(n)||n===e?Ge(e[t])?r:e[t]:n},Cr=e=>typeof e=="boolean",xr=e=>typeof e=="function",ze=(e,t,r)=>{let n=-1;const a=al(t)?[t]:Ad(t),s=a.length,o=s-1;for(;++n<s;){const l=a[n];let c=r;if(n!==o){const h=e[l];c=at(h)||Array.isArray(h)?h:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const ay={BLUR:"blur",FOCUS_OUT:"focusout"},br={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},en={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},LN=pt.createContext(null);LN.displayName="HookFormControlContext";var IN=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const o=s;return t._proxyFormState[o]!==br.all&&(t._proxyFormState[o]=!n||br.all),e[o]}});return a};const DN=typeof window!="undefined"?pt.useLayoutEffect:pt.useEffect;var Zt=e=>typeof e=="string",MN=(e,t,r,n,a)=>Zt(e)?(n&&t.watch.add(e),ve(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),ve(r,s))):(n&&(t.watchAll=!0),r),Cd=e=>Ft(e)||!ny(e);function Cn(e,t,r=new WeakSet){if(Cd(e)||Cd(t))return Object.is(e,t);if(aa(e)&&aa(t))return Object.is(e.getTime(),t.getTime());const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const o=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const l=t[s];if(aa(o)&&aa(l)||at(o)&&at(l)||Array.isArray(o)&&Array.isArray(l)?!Cn(o,l,r):!Object.is(o,l))return!1}}return!0}const $N=pt.createContext(null);$N.displayName="HookFormContext";var UN=(e,t,r,n,a)=>t?de(X({},r[e]),{types:de(X({},r[e]&&r[e].types?r[e].types:{}),{[n]:a||!0})}):{},pi=e=>Array.isArray(e)?e:[e],sy=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}};function iy(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const a=e[n],s=t[n];if(a&&at(a)&&s){const o=iy(a,s);at(o)&&(r[n]=o)}else e[n]&&(r[n]=s)}return r}var Rt=e=>at(e)&&!Object.keys(e).length,Pd=e=>e.type==="file",sl=e=>{if(!Od)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},oy=e=>e.type==="select-multiple",Rd=e=>e.type==="radio",qN=e=>Rd(e)||hi(e),Ld=e=>sl(e)&&e.isConnected;function BN(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ge(e)?n++:e[t[n++]];return e}function FN(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ge(e[t]))return!1;return!0}function st(e,t){const r=Array.isArray(t)?t:al(t)?[t]:Ad(t),n=r.length===1?e:BN(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(at(n)&&Rt(n)||Array.isArray(n)&&FN(n))&&st(e,r.slice(0,-1)),e}var zN=e=>{for(const t in e)if(xr(e[t]))return!0;return!1};function ly(e){return Array.isArray(e)||at(e)&&!zN(e)}function Id(e,t={}){for(const r in e){const n=e[r];ly(n)?(t[r]=Array.isArray(n)?[]:{},Id(n,t[r])):Ge(n)||(t[r]=!0)}return t}function Ya(e,t,r){r||(r=Id(t));for(const n in e){const a=e[n];if(ly(a))Ge(t)||Cd(r[n])?r[n]=Id(a,Array.isArray(a)?[]:{}):Ya(a,Ft(t)?{}:t[n],r[n]);else{const s=t[n];r[n]=!Cn(a,s)}}return r}const cy={value:!1,isValid:!1},uy={value:!0,isValid:!0};var dy=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ge(e[0].attributes.value)?Ge(e[0].value)||e[0].value===""?uy:{value:e[0].value,isValid:!0}:uy:cy}return cy},fy=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ge(e)?e:t?e===""?NaN:e&&+e:r&&Zt(e)?new Date(e):n?n(e):e;const hy={isValid:!1,value:null};var py=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,hy):hy;function my(e){const t=e.ref;return Pd(t)?t.files:Rd(t)?py(e.refs).value:oy(t)?[...t.selectedOptions].map(({value:r})=>r):hi(t)?dy(e.refs).value:fy(Ge(t.value)?e.ref.value:t.value,e)}var VN=(e,t,r,n)=>{const a={};for(const s of e){const o=ve(t,s);o&&ze(a,s,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},il=e=>e instanceof RegExp,mi=e=>Ge(e)?e:il(e)?e.source:at(e)?il(e.value)?e.value.source:e.value:e,gy=e=>({isOnSubmit:!e||e===br.onSubmit,isOnBlur:e===br.onBlur,isOnChange:e===br.onChange,isOnAll:e===br.all,isOnTouch:e===br.onTouched});const yy="AsyncFunction";var HN=e=>!!e&&!!e.validate&&!!(xr(e.validate)&&e.validate.constructor.name===yy||at(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===yy)),WN=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),vy=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const gi=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const o=ve(e,s);if(o){const a=o,{_f:l}=a,c=Lr(a,["_f"]);if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(gi(c,t))break}else if(at(c)&&gi(c,t))break}}};function xy(e,t,r){const n=ve(e,r);if(n||al(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),o=ve(t,s),l=ve(e,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};a.pop()}return{name:r}}var KN=(e,t,r,n)=>{r(e);const o=e,{name:a}=o,s=Lr(o,["name"]);return Rt(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(l=>t[l]===(!n||br.all))},GN=(e,t,r)=>!e||!t||e===t||pi(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),JN=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,YN=(e,t)=>!Td(ve(e,t)).length&&st(e,t),QN=(e,t,r)=>{const n=pi(ve(e,r));return ze(n,"root",t[r]),ze(e,r,n),e};function by(e,t,r="validate"){if(Zt(e)||Array.isArray(e)&&e.every(Zt)||Cr(e)&&!e)return{type:r,message:Zt(e)?e:"",ref:t}}var Qa=e=>at(e)&&!il(e)?e:{value:e,message:""},wy=(e,t,r,n,a,s)=>P(this,null,function*(){const{ref:o,refs:l,required:c,maxLength:h,minLength:p,min:d,max:u,pattern:f,validate:x,name:b,valueAsNumber:w,mount:g}=e._f,m=ve(r,b);if(!g||t.has(b))return{};const y=l?l[0]:o,v=E=>{a&&y.reportValidity&&(y.setCustomValidity(Cr(E)?"":E||""),y.reportValidity())},_={},O=Rd(o),A=hi(o),j=O||A,k=(w||Pd(o))&&Ge(o.value)&&Ge(m)||sl(o)&&o.value===""||m===""||Array.isArray(m)&&!m.length,S=UN.bind(null,b,n,_),N=(E,T,C,D=en.maxLength,z=en.minLength)=>{const V=E?T:C;_[b]=X({type:E?D:z,message:V,ref:o},S(E?D:z,V))};if(s?!Array.isArray(m)||!m.length:c&&(!j&&(k||Ft(m))||Cr(m)&&!m||A&&!dy(l).isValid||O&&!py(l).isValid)){const{value:E,message:T}=Zt(c)?{value:!!c,message:c}:Qa(c);if(E&&(_[b]=X({type:en.required,message:T,ref:y},S(en.required,T)),!n))return v(T),_}if(!k&&(!Ft(d)||!Ft(u))){let E,T;const C=Qa(u),D=Qa(d);if(!Ft(m)&&!isNaN(m)){const z=o.valueAsNumber||m&&+m;Ft(C.value)||(E=z>C.value),Ft(D.value)||(T=z<D.value)}else{const z=o.valueAsDate||new Date(m),V=M=>new Date(new Date().toDateString()+" "+M),G=o.type=="time",U=o.type=="week";Zt(C.value)&&m&&(E=G?V(m)>V(C.value):U?m>C.value:z>new Date(C.value)),Zt(D.value)&&m&&(T=G?V(m)<V(D.value):U?m<D.value:z<new Date(D.value))}if((E||T)&&(N(!!E,C.message,D.message,en.max,en.min),!n))return v(_[b].message),_}if((h||p)&&!k&&(Zt(m)||s&&Array.isArray(m))){const E=Qa(h),T=Qa(p),C=!Ft(E.value)&&m.length>+E.value,D=!Ft(T.value)&&m.length<+T.value;if((C||D)&&(N(C,E.message,T.message),!n))return v(_[b].message),_}if(f&&!k&&Zt(m)){const{value:E,message:T}=Qa(f);if(il(E)&&!m.match(E)&&(_[b]=X({type:en.pattern,message:T,ref:o},S(en.pattern,T)),!n))return v(T),_}if(x){if(xr(x)){const E=yield x(m,r),T=by(E,y);if(T&&(_[b]=X(X({},T),S(en.validate,T.message)),!n))return v(T.message),_}else if(at(x)){let E={};for(const T in x){if(!Rt(E)&&!n)break;const C=by(yield x[T](m,r),y,T);C&&(E=X(X({},C),S(T,C.message)),v(C.message),n&&(_[b]=E))}if(!Rt(E)&&(_[b]=X({ref:y},E),!n))return _}}return v(!0),_});const XN={mode:br.onSubmit,reValidateMode:br.onChange,shouldFocusError:!0};function ZN(e={}){let t=X(X({},XN),e),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:xr(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=at(t.defaultValues)||at(t.values)?ut(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:ut(a),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,h=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d=X({},p);let u=X({},d);const f={array:sy(),state:sy()},x=t.criteriaMode===br.all,b=F=>I=>{clearTimeout(h),h=setTimeout(F,I)},w=F=>P(this,null,function*(){if(!o.keepIsValid&&!t.disabled&&(d.isValid||u.isValid||F)){let I;t.resolver?(I=Rt((yield j()).errors),g()):I=yield S(n,!0),I!==r.isValid&&f.state.next({isValid:I})}}),g=(F,I)=>{!t.disabled&&(d.isValidating||d.validatingFields||u.isValidating||u.validatingFields)&&((F||Array.from(l.mount)).forEach(W=>{W&&(I?ze(r.validatingFields,W,I):st(r.validatingFields,W))}),f.state.next({validatingFields:r.validatingFields,isValidating:!Rt(r.validatingFields)}))},m=(F,I=[],W,ae,ne=!0,ie=!0)=>{if(ae&&W&&!t.disabled){if(o.action=!0,ie&&Array.isArray(ve(n,F))){const pe=W(ve(n,F),ae.argA,ae.argB);ne&&ze(n,F,pe)}if(ie&&Array.isArray(ve(r.errors,F))){const pe=W(ve(r.errors,F),ae.argA,ae.argB);ne&&ze(r.errors,F,pe),YN(r.errors,F)}if((d.touchedFields||u.touchedFields)&&ie&&Array.isArray(ve(r.touchedFields,F))){const pe=W(ve(r.touchedFields,F),ae.argA,ae.argB);ne&&ze(r.touchedFields,F,pe)}(d.dirtyFields||u.dirtyFields)&&(r.dirtyFields=Ya(a,s)),f.state.next({name:F,isDirty:E(F,I),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ze(s,F,I)},y=(F,I)=>{ze(r.errors,F,I),f.state.next({errors:r.errors})},v=F=>{r.errors=F,f.state.next({errors:r.errors,isValid:!1})},_=(F,I,W,ae)=>{const ne=ve(n,F);if(ne){const ie=ve(s,F,Ge(W)?ve(a,F):W);Ge(ie)||ae&&ae.defaultChecked||I?ze(s,F,I?ie:my(ne._f)):D(F,ie),o.mount&&!o.action&&w()}},O=(F,I,W,ae,ne)=>{let ie=!1,pe=!1;const ye={name:F};if(!t.disabled){if(!W||ae){(d.isDirty||u.isDirty)&&(pe=r.isDirty,r.isDirty=ye.isDirty=E(),ie=pe!==ye.isDirty);const je=Cn(ve(a,F),I);pe=!!ve(r.dirtyFields,F),je?st(r.dirtyFields,F):ze(r.dirtyFields,F,!0),ye.dirtyFields=r.dirtyFields,ie=ie||(d.dirtyFields||u.dirtyFields)&&pe!==!je}if(W){const je=ve(r.touchedFields,F);je||(ze(r.touchedFields,F,W),ye.touchedFields=r.touchedFields,ie=ie||(d.touchedFields||u.touchedFields)&&je!==W)}ie&&ne&&f.state.next(ye)}return ie?ye:{}},A=(F,I,W,ae)=>{const ne=ve(r.errors,F),ie=(d.isValid||u.isValid)&&Cr(I)&&r.isValid!==I;if(t.delayError&&W?(c=b(()=>y(F,W)),c(t.delayError)):(clearTimeout(h),c=null,W?ze(r.errors,F,W):st(r.errors,F)),(W?!Cn(ne,W):ne)||!Rt(ae)||ie){const pe=de(X(X({},ae),ie&&Cr(I)?{isValid:I}:{}),{errors:r.errors,name:F});r=X(X({},r),pe),f.state.next(pe)}},j=F=>P(this,null,function*(){return g(F,!0),yield t.resolver(s,t.context,VN(F||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation))}),k=F=>P(this,null,function*(){const{errors:I}=yield j(F);if(g(F),F)for(const W of F){const ae=ve(I,W);ae?ze(r.errors,W,ae):st(r.errors,W)}else r.errors=I;return I}),S=(ae,ne,...ie)=>P(this,[ae,ne,...ie],function*(F,I,W={valid:!0}){for(const ye in F){const je=F[ye];if(je){const pe=je,{_f:Ne}=pe,Ze=Lr(pe,["_f"]);if(Ne){const wr=l.array.has(Ne.name),jl=je._f&&HN(je._f);jl&&d.validatingFields&&g([Ne.name],!0);const Pn=yield wy(je,l.disabled,s,x,t.shouldUseNativeValidation&&!I,wr);if(jl&&d.validatingFields&&g([Ne.name]),Pn[Ne.name]&&(W.valid=!1,I||e.shouldUseNativeValidation))break;!I&&(ve(Pn,Ne.name)?wr?QN(r.errors,Pn,Ne.name):ze(r.errors,Ne.name,Pn[Ne.name]):st(r.errors,Ne.name))}!Rt(Ze)&&(yield S(Ze,I,W))}}return W.valid}),N=()=>{for(const F of l.unMount){const I=ve(n,F);I&&(I._f.refs?I._f.refs.every(W=>!Ld(W)):!Ld(I._f.ref))&&H(F)}l.unMount=new Set},E=(F,I)=>!t.disabled&&(F&&I&&ze(s,F,I),!Cn(R(),a)),T=(F,I,W)=>MN(F,l,X({},o.mount?s:Ge(I)?a:Zt(F)?{[F]:I}:I),W,I),C=F=>Td(ve(o.mount?s:a,F,t.shouldUnregister?ve(a,F,[]):[])),D=(F,I,W={})=>{const ae=ve(n,F);let ne=I;if(ae){const ie=ae._f;ie&&(!ie.disabled&&ze(s,F,fy(I,ie)),ne=sl(ie.ref)&&Ft(I)?"":I,oy(ie.ref)?[...ie.ref.options].forEach(pe=>pe.selected=ne.includes(pe.value)):ie.refs?hi(ie.ref)?ie.refs.forEach(pe=>{(!pe.defaultChecked||!pe.disabled)&&(Array.isArray(ne)?pe.checked=!!ne.find(ye=>ye===pe.value):pe.checked=ne===pe.value||!!ne)}):ie.refs.forEach(pe=>pe.checked=pe.value===ne):Pd(ie.ref)?ie.ref.value="":(ie.ref.value=ne,ie.ref.type||f.state.next({name:F,values:ut(s)})))}(W.shouldDirty||W.shouldTouch)&&O(F,ne,W.shouldTouch,W.shouldDirty,!0),W.shouldValidate&&M(F)},z=(F,I,W)=>{for(const ae in I){if(!I.hasOwnProperty(ae))return;const ne=I[ae],ie=F+"."+ae,pe=ve(n,ie);(l.array.has(F)||at(ne)||pe&&!pe._f)&&!aa(ne)?z(ie,ne,W):D(ie,ne,W)}},V=(F,I,W={})=>{const ae=ve(n,F),ne=l.array.has(F),ie=ut(I);ze(s,F,ie),ne?(f.array.next({name:F,values:ut(s)}),(d.isDirty||d.dirtyFields||u.isDirty||u.dirtyFields)&&W.shouldDirty&&f.state.next({name:F,dirtyFields:Ya(a,s),isDirty:E(F,ie)})):ae&&!ae._f&&!Ft(ie)?z(F,ie,W):D(F,ie,W),vy(F,l)?f.state.next(de(X({},r),{name:F,values:ut(s)})):f.state.next({name:o.mount?F:void 0,values:ut(s)})},G=F=>P(this,null,function*(){o.mount=!0;const I=F.target;let W=I.name,ae=!0;const ne=ve(n,W),ie=je=>{ae=Number.isNaN(je)||aa(je)&&isNaN(je.getTime())||Cn(je,ve(s,W,je))},pe=gy(t.mode),ye=gy(t.reValidateMode);if(ne){let je,Ne;const Ze=I.type?my(ne._f):AN(F),wr=F.type===ay.BLUR||F.type===ay.FOCUS_OUT,jl=!WN(ne._f)&&!t.resolver&&!ve(r.errors,W)&&!ne._f.deps||JN(wr,ve(r.touchedFields,W),r.isSubmitted,ye,pe),Pn=vy(W,l,wr);ze(s,W,Ze),wr?(!I||!I.readOnly)&&(ne._f.onBlur&&ne._f.onBlur(F),c&&c(0)):ne._f.onChange&&ne._f.onChange(F);const ef=O(W,Ze,wr),sC=!Rt(ef)||Pn;if(!wr&&f.state.next({name:W,type:F.type,values:ut(s)}),jl)return(d.isValid||u.isValid)&&(t.mode==="onBlur"?wr&&w():wr||w()),sC&&f.state.next(X({name:W},Pn?{}:ef));if(!wr&&Pn&&f.state.next(X({},r)),t.resolver){const{errors:bv}=yield j([W]);if(g([W]),ie(Ze),ae){const iC=xy(r.errors,n,W),wv=xy(bv,n,iC.name||W);je=wv.error,W=wv.name,Ne=Rt(bv)}}else g([W],!0),je=(yield wy(ne,l.disabled,s,x,t.shouldUseNativeValidation))[W],g([W]),ie(Ze),ae&&(je?Ne=!1:(d.isValid||u.isValid)&&(Ne=yield S(n,!0)));ae&&(ne._f.deps&&(!Array.isArray(ne._f.deps)||ne._f.deps.length>0)&&M(ne._f.deps),A(W,Ne,je,ef))}}),U=(F,I)=>{if(ve(r.errors,I)&&F.focus)return F.focus(),1},M=(W,...ae)=>P(this,[W,...ae],function*(F,I={}){let ne,ie;const pe=pi(F);if(t.resolver){const ye=yield k(Ge(F)?F:pe);ne=Rt(ye),ie=F?!pe.some(je=>ve(ye,je)):ne}else F?(ie=(yield Promise.all(pe.map(ye=>P(this,null,function*(){const je=ve(n,ye);return yield S(je&&je._f?{[ye]:je}:je)})))).every(Boolean),!(!ie&&!r.isValid)&&w()):ie=ne=yield S(n);return f.state.next(de(X(X({},!Zt(F)||(d.isValid||u.isValid)&&ne!==r.isValid?{}:{name:F}),t.resolver||!F?{isValid:ne}:{}),{errors:r.errors})),I.shouldFocus&&!ie&&gi(n,U,F?pe:l.mount),ie}),R=(F,I)=>{let W=X({},o.mount?s:a);return I&&(W=iy(I.dirtyFields?r.dirtyFields:r.touchedFields,W)),Ge(F)?W:Zt(F)?ve(W,F):F.map(ae=>ve(W,ae))},L=(F,I)=>({invalid:!!ve((I||r).errors,F),isDirty:!!ve((I||r).dirtyFields,F),error:ve((I||r).errors,F),isValidating:!!ve(r.validatingFields,F),isTouched:!!ve((I||r).touchedFields,F)}),$=F=>{F&&pi(F).forEach(I=>st(r.errors,I)),f.state.next({errors:F?r.errors:{}})},Q=(F,I,W)=>{const ae=(ve(n,F,{_f:{}})._f||{}).ref,Ne=ve(r.errors,F)||{},{ref:ie,message:pe,type:ye}=Ne,je=Lr(Ne,["ref","message","type"]);ze(r.errors,F,de(X(X({},je),I),{ref:ae})),f.state.next({name:F,errors:r.errors,isValid:!1}),W&&W.shouldFocus&&ae&&ae.focus&&ae.focus()},Y=(F,I)=>xr(F)?f.state.subscribe({next:W=>"values"in W&&F(T(void 0,I),W)}):T(F,I,!0),q=F=>f.state.subscribe({next:I=>{GN(F.name,I.name,F.exact)&&KN(I,F.formState||d,re,F.reRenderRoot)&&F.callback(de(X(X({values:X({},s)},r),I),{defaultValues:a}))}}).unsubscribe,K=F=>(o.mount=!0,u=X(X({},u),F.formState),q(de(X({},F),{formState:X(X({},p),F.formState)}))),H=(F,I={})=>{for(const W of F?pi(F):l.mount)l.mount.delete(W),l.array.delete(W),I.keepValue||(st(n,W),st(s,W)),!I.keepError&&st(r.errors,W),!I.keepDirty&&st(r.dirtyFields,W),!I.keepTouched&&st(r.touchedFields,W),!I.keepIsValidating&&st(r.validatingFields,W),!t.shouldUnregister&&!I.keepDefaultValue&&st(a,W);f.state.next({values:ut(s)}),f.state.next(X(X({},r),I.keepDirty?{isDirty:E()}:{})),!I.keepIsValid&&w()},J=({disabled:F,name:I})=>{if(Cr(F)&&o.mount||F||l.disabled.has(I)){const ne=l.disabled.has(I)!==!!F;F?l.disabled.add(I):l.disabled.delete(I),ne&&o.mount&&!o.action&&w()}},Z=(F,I={})=>{let W=ve(n,F);const ae=Cr(I.disabled)||Cr(t.disabled);return ze(n,F,de(X({},W||{}),{_f:X(de(X({},W&&W._f?W._f:{ref:{name:F}}),{name:F,mount:!0}),I)})),l.mount.add(F),W?J({disabled:Cr(I.disabled)?I.disabled:t.disabled,name:F}):_(F,!0,I.value),de(X(X({},ae?{disabled:I.disabled||t.disabled}:{}),t.progressive?{required:!!I.required,min:mi(I.min),max:mi(I.max),minLength:mi(I.minLength),maxLength:mi(I.maxLength),pattern:mi(I.pattern)}:{}),{name:F,onChange:G,onBlur:G,ref:ne=>{if(ne){Z(F,I),W=ve(n,F);const ie=Ge(ne.value)&&ne.querySelectorAll&&ne.querySelectorAll("input,select,textarea")[0]||ne,pe=qN(ie),ye=W._f.refs||[];if(pe?ye.find(je=>je===ie):ie===W._f.ref)return;ze(n,F,{_f:X(X({},W._f),pe?{refs:[...ye.filter(Ld),ie,...Array.isArray(ve(a,F))?[{}]:[]],ref:{type:ie.type,name:F}}:{ref:ie})}),_(F,!1,void 0,ie)}else W=ve(n,F,{}),W._f&&(W._f.mount=!1),(t.shouldUnregister||I.shouldUnregister)&&!(PN(l.array,F)&&o.action)&&l.unMount.add(F)}})},ee=()=>t.shouldFocusError&&gi(n,U,l.mount),ue=F=>{Cr(F)&&(f.state.next({disabled:F}),gi(n,(I,W)=>{const ae=ve(n,W);ae&&(I.disabled=ae._f.disabled||F,Array.isArray(ae._f.refs)&&ae._f.refs.forEach(ne=>{ne.disabled=ae._f.disabled||F}))},0,!1))},oe=(F,I)=>W=>P(this,null,function*(){let ae;W&&(W.preventDefault&&W.preventDefault(),W.persist&&W.persist());let ne=ut(s);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:ie,values:pe}=yield j();g(),r.errors=ie,ne=ut(pe)}else yield S(n);if(l.disabled.size)for(const ie of l.disabled)st(ne,ie);if(st(r.errors,"root"),Rt(r.errors)){f.state.next({errors:{}});try{yield F(ne,W)}catch(ie){ae=ie}}else I&&(yield I(X({},r.errors),W)),ee(),setTimeout(ee);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Rt(r.errors)&&!ae,submitCount:r.submitCount+1,errors:r.errors}),ae)throw ae}),le=(F,I={})=>{ve(n,F)&&(Ge(I.defaultValue)?V(F,ut(ve(a,F))):(V(F,I.defaultValue),ze(a,F,ut(I.defaultValue))),I.keepTouched||st(r.touchedFields,F),I.keepDirty||(st(r.dirtyFields,F),r.isDirty=I.defaultValue?E(F,ut(ve(a,F))):E()),I.keepError||(st(r.errors,F),d.isValid&&w()),f.state.next(X({},r)))},ge=(F,I={})=>{const W=F?ut(F):a,ae=ut(W),ne=Rt(F),ie=ne?a:ae;if(I.keepDefaultValues||(a=W),!I.keepValues){if(I.keepDirtyValues){const pe=new Set([...l.mount,...Object.keys(Ya(a,s))]);for(const ye of Array.from(pe)){const je=ve(r.dirtyFields,ye),Ne=ve(s,ye),Ze=ve(ie,ye);je&&!Ge(Ne)?ze(ie,ye,Ne):!je&&!Ge(Ze)&&V(ye,Ze)}}else{if(Od&&Ge(F))for(const pe of l.mount){const ye=ve(n,pe);if(ye&&ye._f){const je=Array.isArray(ye._f.refs)?ye._f.refs[0]:ye._f.ref;if(sl(je)){const Ne=je.closest("form");if(Ne){Ne.reset();break}}}}if(I.keepFieldsRef)for(const pe of l.mount)V(pe,ve(ie,pe));else n={}}s=t.shouldUnregister?I.keepDefaultValues?ut(a):{}:ut(ie),f.array.next({values:X({},ie)}),f.state.next({values:X({},ie)})}l={mount:I.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!I.keepIsValid||!!I.keepDirtyValues||!t.shouldUnregister&&!Rt(ie),o.watch=!!t.shouldUnregister,o.keepIsValid=!!I.keepIsValid,o.action=!1,I.keepErrors||(r.errors={}),f.state.next({submitCount:I.keepSubmitCount?r.submitCount:0,isDirty:ne?!1:I.keepDirty?r.isDirty:!!(I.keepDefaultValues&&!Cn(F,a)),isSubmitted:I.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ne?{}:I.keepDirtyValues?I.keepDefaultValues&&s?Ya(a,s):r.dirtyFields:I.keepDefaultValues&&F?Ya(a,F):I.keepDirty?r.dirtyFields:{},touchedFields:I.keepTouched?r.touchedFields:{},errors:I.keepErrors?r.errors:{},isSubmitSuccessful:I.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ke=(F,I)=>ge(xr(F)?F(s):F,X(X({},t.resetOptions),I)),Ae=(F,I={})=>{const W=ve(n,F),ae=W&&W._f;if(ae){const ne=ae.refs?ae.refs[0]:ae.ref;ne.focus&&setTimeout(()=>{ne.focus(),I.shouldSelect&&xr(ne.select)&&ne.select()})}},re=F=>{r=X(X({},r),F)},fe={control:{register:Z,unregister:H,getFieldState:L,handleSubmit:oe,setError:Q,_subscribe:q,_runSchema:j,_updateIsValidating:g,_focusError:ee,_getWatch:T,_getDirty:E,_setValid:w,_setFieldArray:m,_setDisabledField:J,_setErrors:v,_getFieldArray:C,_reset:ge,_resetDefaultValues:()=>xr(t.defaultValues)&&t.defaultValues().then(F=>{ke(F,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:N,_disableForm:ue,_subjects:f,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(F){o=F},get _defaultValues(){return a},get _names(){return l},set _names(F){l=F},get _formState(){return r},get _options(){return t},set _options(F){t=X(X({},t),F)}},subscribe:K,trigger:M,register:Z,handleSubmit:oe,watch:Y,setValue:V,getValues:R,reset:ke,resetField:le,clearErrors:$,unregister:H,setError:Q,setFocus:Ae,getFieldState:L};return de(X({},fe),{formControl:fe})}function ol(e={}){const t=pt.useRef(void 0),r=pt.useRef(void 0),[n,a]=pt.useState({isDirty:!1,isValidating:!1,isLoading:xr(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:xr(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current=de(X({},e.formControl),{formState:n}),e.defaultValues&&!xr(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const o=ZN(e),{formControl:l}=o,c=Lr(o,["formControl"]);t.current=de(X({},c),{formState:n})}const s=t.current.control;return s._options=e,DN(()=>{const l=s._subscribe({formState:s._proxyFormState,callback:()=>a(X({},s._formState)),reRenderRoot:!0});return a(c=>de(X({},c),{isReady:!0})),s._formState.isReady=!0,l},[s]),pt.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),pt.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),pt.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),pt.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),pt.useEffect(()=>{if(s._proxyFormState.isDirty){const l=s._getDirty();l!==n.isDirty&&s._subjects.state.next({isDirty:l})}},[s,n.isDirty]),pt.useEffect(()=>{var l;e.values&&!Cn(e.values,r.current)?(s._reset(e.values,X({keepFieldsRef:!0},s._options.resetOptions)),!((l=s._options.resetOptions)===null||l===void 0)&&l.keepIsValid||s._setValid(),r.current=e.values,a(c=>X({},c))):s._resetDefaultValues()},[s,e.values]),pt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next(X({},s._formState))),s._removeUnmounted()}),t.current.formState=pt.useMemo(()=>IN(n,s),[s,n]),t.current}function eS(){this.__data__=[],this.size=0}var tS=eS;function rS(e,t){return e===t||e!==e&&t!==t}var _y=rS,nS=_y;function aS(e,t){for(var r=e.length;r--;)if(nS(e[r][0],t))return r;return-1}var ll=aS,sS=ll,iS=Array.prototype,oS=iS.splice;function lS(e){var t=this.__data__,r=sS(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():oS.call(t,r,1),--this.size,!0}var cS=lS,uS=ll;function dS(e){var t=this.__data__,r=uS(t,e);return r<0?void 0:t[r][1]}var fS=dS,hS=ll;function pS(e){return hS(this.__data__,e)>-1}var mS=pS,gS=ll;function yS(e,t){var r=this.__data__,n=gS(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var vS=yS,xS=tS,bS=cS,wS=fS,_S=mS,jS=vS;function Xa(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Xa.prototype.clear=xS,Xa.prototype.delete=bS,Xa.prototype.get=wS,Xa.prototype.has=_S,Xa.prototype.set=jS;var cl=Xa,NS=cl;function SS(){this.__data__=new NS,this.size=0}var ES=SS;function kS(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var OS=kS;function TS(e){return this.__data__.get(e)}var AS=TS;function CS(e){return this.__data__.has(e)}var PS=CS,RS=typeof Oe=="object"&&Oe&&Oe.Object===Object&&Oe,jy=RS,LS=jy,IS=typeof self=="object"&&self&&self.Object===Object&&self,DS=LS||IS||Function("return this")(),tn=DS,MS=tn,$S=MS.Symbol,Dd=$S,Ny=Dd,Sy=Object.prototype,US=Sy.hasOwnProperty,qS=Sy.toString,yi=Ny?Ny.toStringTag:void 0;function BS(e){var t=US.call(e,yi),r=e[yi];try{e[yi]=void 0;var n=!0}catch(s){}var a=qS.call(e);return n&&(t?e[yi]=r:delete e[yi]),a}var FS=BS,zS=Object.prototype,VS=zS.toString;function HS(e){return VS.call(e)}var WS=HS,Ey=Dd,KS=FS,GS=WS,JS="[object Null]",YS="[object Undefined]",ky=Ey?Ey.toStringTag:void 0;function QS(e){return e==null?e===void 0?YS:JS:ky&&ky in Object(e)?KS(e):GS(e)}var ul=QS;function XS(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Oy=XS,ZS=ul,eE=Oy,tE="[object AsyncFunction]",rE="[object Function]",nE="[object GeneratorFunction]",aE="[object Proxy]";function sE(e){if(!eE(e))return!1;var t=ZS(e);return t==rE||t==nE||t==tE||t==aE}var Ty=sE,iE=tn,oE=iE["__core-js_shared__"],lE=oE,Md=lE,Ay=function(){var e=/[^.]+$/.exec(Md&&Md.keys&&Md.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function cE(e){return!!Ay&&Ay in e}var uE=cE,dE=Function.prototype,fE=dE.toString;function hE(e){if(e!=null){try{return fE.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Cy=hE,pE=Ty,mE=uE,gE=Oy,yE=Cy,vE=/[\\^$.*+?()[\]{}|]/g,xE=/^\[object .+?Constructor\]$/,bE=Function.prototype,wE=Object.prototype,_E=bE.toString,jE=wE.hasOwnProperty,NE=RegExp("^"+_E.call(jE).replace(vE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SE(e){if(!gE(e)||mE(e))return!1;var t=pE(e)?NE:xE;return t.test(yE(e))}var EE=SE;function kE(e,t){return e==null?void 0:e[t]}var OE=kE,TE=EE,AE=OE;function CE(e,t){var r=AE(e,t);return TE(r)?r:void 0}var Za=CE,PE=Za,RE=tn,LE=PE(RE,"Map"),$d=LE,IE=Za,DE=IE(Object,"create"),dl=DE,Py=dl;function ME(){this.__data__=Py?Py(null):{},this.size=0}var $E=ME;function UE(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var qE=UE,BE=dl,FE="__lodash_hash_undefined__",zE=Object.prototype,VE=zE.hasOwnProperty;function HE(e){var t=this.__data__;if(BE){var r=t[e];return r===FE?void 0:r}return VE.call(t,e)?t[e]:void 0}var WE=HE,KE=dl,GE=Object.prototype,JE=GE.hasOwnProperty;function YE(e){var t=this.__data__;return KE?t[e]!==void 0:JE.call(t,e)}var QE=YE,XE=dl,ZE="__lodash_hash_undefined__";function ek(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=XE&&t===void 0?ZE:t,this}var tk=ek,rk=$E,nk=qE,ak=WE,sk=QE,ik=tk;function es(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}es.prototype.clear=rk,es.prototype.delete=nk,es.prototype.get=ak,es.prototype.has=sk,es.prototype.set=ik;var ok=es,Ry=ok,lk=cl,ck=$d;function uk(){this.size=0,this.__data__={hash:new Ry,map:new(ck||lk),string:new Ry}}var dk=uk;function fk(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var hk=fk,pk=hk;function mk(e,t){var r=e.__data__;return pk(t)?r[typeof t=="string"?"string":"hash"]:r.map}var fl=mk,gk=fl;function yk(e){var t=gk(this,e).delete(e);return this.size-=t?1:0,t}var vk=yk,xk=fl;function bk(e){return xk(this,e).get(e)}var wk=bk,_k=fl;function jk(e){return _k(this,e).has(e)}var Nk=jk,Sk=fl;function Ek(e,t){var r=Sk(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var kk=Ek,Ok=dk,Tk=vk,Ak=wk,Ck=Nk,Pk=kk;function ts(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ts.prototype.clear=Ok,ts.prototype.delete=Tk,ts.prototype.get=Ak,ts.prototype.has=Ck,ts.prototype.set=Pk;var Ly=ts,Rk=cl,Lk=$d,Ik=Ly,Dk=200;function Mk(e,t){var r=this.__data__;if(r instanceof Rk){var n=r.__data__;if(!Lk||n.length<Dk-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ik(n)}return r.set(e,t),this.size=r.size,this}var $k=Mk,Uk=cl,qk=ES,Bk=OS,Fk=AS,zk=PS,Vk=$k;function rs(e){var t=this.__data__=new Uk(e);this.size=t.size}rs.prototype.clear=qk,rs.prototype.delete=Bk,rs.prototype.get=Fk,rs.prototype.has=zk,rs.prototype.set=Vk;var Hk=rs,Wk="__lodash_hash_undefined__";function Kk(e){return this.__data__.set(e,Wk),this}var Gk=Kk;function Jk(e){return this.__data__.has(e)}var Yk=Jk,Qk=Ly,Xk=Gk,Zk=Yk;function hl(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Qk;++t<r;)this.add(e[t])}hl.prototype.add=hl.prototype.push=Xk,hl.prototype.has=Zk;var e2=hl;function t2(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var r2=t2;function n2(e,t){return e.has(t)}var a2=n2,s2=e2,i2=r2,o2=a2,l2=1,c2=2;function u2(e,t,r,n,a,s){var o=r&l2,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var h=s.get(e),p=s.get(t);if(h&&p)return h==t&&p==e;var d=-1,u=!0,f=r&c2?new s2:void 0;for(s.set(e,t),s.set(t,e);++d<l;){var x=e[d],b=t[d];if(n)var w=o?n(b,x,d,t,e,s):n(x,b,d,e,t,s);if(w!==void 0){if(w)continue;u=!1;break}if(f){if(!i2(t,function(g,m){if(!o2(f,m)&&(x===g||a(x,g,r,n,s)))return f.push(m)})){u=!1;break}}else if(!(x===b||a(x,b,r,n,s))){u=!1;break}}return s.delete(e),s.delete(t),u}var Iy=u2,d2=tn,f2=d2.Uint8Array,h2=f2;function p2(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var m2=p2;function g2(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var y2=g2,Dy=Dd,My=h2,v2=_y,x2=Iy,b2=m2,w2=y2,_2=1,j2=2,N2="[object Boolean]",S2="[object Date]",E2="[object Error]",k2="[object Map]",O2="[object Number]",T2="[object RegExp]",A2="[object Set]",C2="[object String]",P2="[object Symbol]",R2="[object ArrayBuffer]",L2="[object DataView]",$y=Dy?Dy.prototype:void 0,Ud=$y?$y.valueOf:void 0;function I2(e,t,r,n,a,s,o){switch(r){case L2:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R2:return!(e.byteLength!=t.byteLength||!s(new My(e),new My(t)));case N2:case S2:case O2:return v2(+e,+t);case E2:return e.name==t.name&&e.message==t.message;case T2:case C2:return e==t+"";case k2:var l=b2;case A2:var c=n&_2;if(l||(l=w2),e.size!=t.size&&!c)return!1;var h=o.get(e);if(h)return h==t;n|=j2,o.set(e,t);var p=x2(l(e),l(t),n,a,s,o);return o.delete(e),p;case P2:if(Ud)return Ud.call(e)==Ud.call(t)}return!1}var D2=I2;function M2(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var $2=M2,U2=Array.isArray,qd=U2,q2=$2,B2=qd;function F2(e,t,r){var n=t(e);return B2(e)?n:q2(n,r(e))}var z2=F2;function V2(e,t){for(var r=-1,n=e==null?0:e.length,a=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}var H2=V2;function W2(){return[]}var K2=W2,G2=H2,J2=K2,Y2=Object.prototype,Q2=Y2.propertyIsEnumerable,Uy=Object.getOwnPropertySymbols,X2=Uy?function(e){return e==null?[]:(e=Object(e),G2(Uy(e),function(t){return Q2.call(e,t)}))}:J2,Z2=X2;function eO(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var tO=eO;function rO(e){return e!=null&&typeof e=="object"}var pl=rO,nO=ul,aO=pl,sO="[object Arguments]";function iO(e){return aO(e)&&nO(e)==sO}var oO=iO,qy=oO,lO=pl,By=Object.prototype,cO=By.hasOwnProperty,uO=By.propertyIsEnumerable,dO=qy(function(){return arguments}())?qy:function(e){return lO(e)&&cO.call(e,"callee")&&!uO.call(e,"callee")},fO=dO,ml={exports:{}};function hO(){return!1}var pO=hO;ml.exports,function(e,t){var r=tn,n=pO,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,h=c||n;e.exports=h}(ml,ml.exports);var Fy=ml.exports,mO=9007199254740991,gO=/^(?:0|[1-9]\d*)$/;function yO(e,t){var r=typeof e;return t=t==null?mO:t,!!t&&(r=="number"||r!="symbol"&&gO.test(e))&&e>-1&&e%1==0&&e<t}var vO=yO,xO=9007199254740991;function bO(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=xO}var zy=bO,wO=ul,_O=zy,jO=pl,NO="[object Arguments]",SO="[object Array]",EO="[object Boolean]",kO="[object Date]",OO="[object Error]",TO="[object Function]",AO="[object Map]",CO="[object Number]",PO="[object Object]",RO="[object RegExp]",LO="[object Set]",IO="[object String]",DO="[object WeakMap]",MO="[object ArrayBuffer]",$O="[object DataView]",UO="[object Float32Array]",qO="[object Float64Array]",BO="[object Int8Array]",FO="[object Int16Array]",zO="[object Int32Array]",VO="[object Uint8Array]",HO="[object Uint8ClampedArray]",WO="[object Uint16Array]",KO="[object Uint32Array]",qe={};qe[UO]=qe[qO]=qe[BO]=qe[FO]=qe[zO]=qe[VO]=qe[HO]=qe[WO]=qe[KO]=!0,qe[NO]=qe[SO]=qe[MO]=qe[EO]=qe[$O]=qe[kO]=qe[OO]=qe[TO]=qe[AO]=qe[CO]=qe[PO]=qe[RO]=qe[LO]=qe[IO]=qe[DO]=!1;function GO(e){return jO(e)&&_O(e.length)&&!!qe[wO(e)]}var JO=GO;function YO(e){return function(t){return e(t)}}var QO=YO,gl={exports:{}};gl.exports,function(e,t){var r=jy,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,o=s&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch(h){}}();e.exports=l}(gl,gl.exports);var XO=gl.exports,ZO=JO,eT=QO,Vy=XO,Hy=Vy&&Vy.isTypedArray,tT=Hy?eT(Hy):ZO,Wy=tT,rT=tO,nT=fO,aT=qd,sT=Fy,iT=vO,oT=Wy,lT=Object.prototype,cT=lT.hasOwnProperty;function uT(e,t){var r=aT(e),n=!r&&nT(e),a=!r&&!n&&sT(e),s=!r&&!n&&!a&&oT(e),o=r||n||a||s,l=o?rT(e.length,String):[],c=l.length;for(var h in e)(t||cT.call(e,h))&&!(o&&(h=="length"||a&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||iT(h,c)))&&l.push(h);return l}var dT=uT,fT=Object.prototype;function hT(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||fT;return e===r}var pT=hT;function mT(e,t){return function(r){return e(t(r))}}var gT=mT,yT=gT,vT=yT(Object.keys,Object),xT=vT,bT=pT,wT=xT,_T=Object.prototype,jT=_T.hasOwnProperty;function NT(e){if(!bT(e))return wT(e);var t=[];for(var r in Object(e))jT.call(e,r)&&r!="constructor"&&t.push(r);return t}var ST=NT,ET=Ty,kT=zy;function OT(e){return e!=null&&kT(e.length)&&!ET(e)}var TT=OT,AT=dT,CT=ST,PT=TT;function RT(e){return PT(e)?AT(e):CT(e)}var LT=RT,IT=z2,DT=Z2,MT=LT;function $T(e){return IT(e,MT,DT)}var UT=$T,Ky=UT,qT=1,BT=Object.prototype,FT=BT.hasOwnProperty;function zT(e,t,r,n,a,s){var o=r&qT,l=Ky(e),c=l.length,h=Ky(t),p=h.length;if(c!=p&&!o)return!1;for(var d=c;d--;){var u=l[d];if(!(o?u in t:FT.call(t,u)))return!1}var f=s.get(e),x=s.get(t);if(f&&x)return f==t&&x==e;var b=!0;s.set(e,t),s.set(t,e);for(var w=o;++d<c;){u=l[d];var g=e[u],m=t[u];if(n)var y=o?n(m,g,u,t,e,s):n(g,m,u,e,t,s);if(!(y===void 0?g===m||a(g,m,r,n,s):y)){b=!1;break}w||(w=u=="constructor")}if(b&&!w){var v=e.constructor,_=t.constructor;v!=_&&"constructor"in e&&"constructor"in t&&!(typeof v=="function"&&v instanceof v&&typeof _=="function"&&_ instanceof _)&&(b=!1)}return s.delete(e),s.delete(t),b}var VT=zT,HT=Za,WT=tn,KT=HT(WT,"DataView"),GT=KT,JT=Za,YT=tn,QT=JT(YT,"Promise"),XT=QT,ZT=Za,eA=tn,tA=ZT(eA,"Set"),rA=tA,nA=Za,aA=tn,sA=nA(aA,"WeakMap"),iA=sA,Bd=GT,Fd=$d,zd=XT,Vd=rA,Hd=iA,Gy=ul,ns=Cy,Jy="[object Map]",oA="[object Object]",Yy="[object Promise]",Qy="[object Set]",Xy="[object WeakMap]",Zy="[object DataView]",lA=ns(Bd),cA=ns(Fd),uA=ns(zd),dA=ns(Vd),fA=ns(Hd),sa=Gy;(Bd&&sa(new Bd(new ArrayBuffer(1)))!=Zy||Fd&&sa(new Fd)!=Jy||zd&&sa(zd.resolve())!=Yy||Vd&&sa(new Vd)!=Qy||Hd&&sa(new Hd)!=Xy)&&(sa=function(e){var t=Gy(e),r=t==oA?e.constructor:void 0,n=r?ns(r):"";if(n)switch(n){case lA:return Zy;case cA:return Jy;case uA:return Yy;case dA:return Qy;case fA:return Xy}return t});var hA=sa,Wd=Hk,pA=Iy,mA=D2,gA=VT,ev=hA,tv=qd,rv=Fy,yA=Wy,vA=1,nv="[object Arguments]",av="[object Array]",yl="[object Object]",xA=Object.prototype,sv=xA.hasOwnProperty;function bA(e,t,r,n,a,s){var o=tv(e),l=tv(t),c=o?av:ev(e),h=l?av:ev(t);c=c==nv?yl:c,h=h==nv?yl:h;var p=c==yl,d=h==yl,u=c==h;if(u&&rv(e)){if(!rv(t))return!1;o=!0,p=!1}if(u&&!p)return s||(s=new Wd),o||yA(e)?pA(e,t,r,n,a,s):mA(e,t,c,r,n,a,s);if(!(r&vA)){var f=p&&sv.call(e,"__wrapped__"),x=d&&sv.call(t,"__wrapped__");if(f||x){var b=f?e.value():e,w=x?t.value():t;return s||(s=new Wd),a(b,w,r,n,s)}}return u?(s||(s=new Wd),gA(e,t,r,n,a,s)):!1}var wA=bA,_A=wA,iv=pl;function ov(e,t,r,n,a){return e===t?!0:e==null||t==null||!iv(e)&&!iv(t)?e!==e&&t!==t:_A(e,t,r,n,ov,a)}var jA=ov,NA=jA;function SA(e,t){return NA(e,t)}var EA=SA,lv={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(n,a){e.exports=a()})(typeof self!="undefined"?self:Oe,function(){return function(r){var n={};function a(s){if(n[s])return n[s].exports;var o=n[s]={i:s,l:!1,exports:{}};return r[s].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.d=function(s,o,l){a.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:l})},a.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(o,"a",o),o},a.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},a.p="",a(a.s=109)}([function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(17),o=a(18),l=a(19),c=a(45),h=a(46),p=a(47),d=a(48),u=a(49),f=a(12),x=a(32),b=a(33),w=a(31),g=a(1),m={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:s.default,Format:o.default,Leaf:l.default,Embed:d.default,Scroll:c.default,Block:p.default,Inline:h.default,Text:u.default,Attributor:{Attribute:f.default,Class:x.default,Style:b.default,Store:w.default}};n.default=m},function(r,n,a){var s=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var y in m)m.hasOwnProperty(y)&&(g[y]=m[y])};return function(g,m){w(g,m);function y(){this.constructor=g}g.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(w){s(g,w);function g(m){var y=this;return m="[Parchment] "+m,y=w.call(this,m)||this,y.message=m,y.name=y.constructor.name,y}return g}(Error);n.ParchmentError=o;var l={},c={},h={},p={};n.DATA_KEY="__blot";var d;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(d=n.Scope||(n.Scope={}));function u(w,g){var m=x(w);if(m==null)throw new o("Unable to create "+w+" blot");var y=m,v=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:y.create(g);return new y(v,g)}n.create=u;function f(w,g){return g===void 0&&(g=!1),w==null?null:w[n.DATA_KEY]!=null?w[n.DATA_KEY].blot:g?f(w.parentNode,g):null}n.find=f;function x(w,g){g===void 0&&(g=d.ANY);var m;if(typeof w=="string")m=p[w]||l[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)m=p.text;else if(typeof w=="number")w&d.LEVEL&d.BLOCK?m=p.block:w&d.LEVEL&d.INLINE&&(m=p.inline);else if(w instanceof HTMLElement){var y=(w.getAttribute("class")||"").split(/\s+/);for(var v in y)if(m=c[y[v]],m)break;m=m||h[w.tagName]}return m==null?null:g&d.LEVEL&m.scope&&g&d.TYPE&m.scope?m:null}n.query=x;function b(){for(var w=[],g=0;g<arguments.length;g++)w[g]=arguments[g];if(w.length>1)return w.map(function(v){return b(v)});var m=w[0];if(typeof m.blotName!="string"&&typeof m.attrName!="string")throw new o("Invalid definition");if(m.blotName==="abstract")throw new o("Cannot register abstract class");if(p[m.blotName||m.attrName]=m,typeof m.keyName=="string")l[m.keyName]=m;else if(m.className!=null&&(c[m.className]=m),m.tagName!=null){Array.isArray(m.tagName)?m.tagName=m.tagName.map(function(v){return v.toUpperCase()}):m.tagName=m.tagName.toUpperCase();var y=Array.isArray(m.tagName)?m.tagName:[m.tagName];y.forEach(function(v){(h[v]==null||m.className==null)&&(h[v]=m)})}return m}n.register=b},function(r,n,a){var s=a(51),o=a(11),l=a(3),c=a(20),h="\0",p=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};p.prototype.insert=function(d,u){var f={};return d.length===0?this:(f.insert=d,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(f.attributes=u),this.push(f))},p.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},p.prototype.retain=function(d,u){if(d<=0)return this;var f={retain:d};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(f.attributes=u),this.push(f)},p.prototype.push=function(d){var u=this.ops.length,f=this.ops[u-1];if(d=l(!0,{},d),typeof f=="object"){if(typeof d.delete=="number"&&typeof f.delete=="number")return this.ops[u-1]={delete:f.delete+d.delete},this;if(typeof f.delete=="number"&&d.insert!=null&&(u-=1,f=this.ops[u-1],typeof f!="object"))return this.ops.unshift(d),this;if(o(d.attributes,f.attributes)){if(typeof d.insert=="string"&&typeof f.insert=="string")return this.ops[u-1]={insert:f.insert+d.insert},typeof d.attributes=="object"&&(this.ops[u-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof f.retain=="number")return this.ops[u-1]={retain:f.retain+d.retain},typeof d.attributes=="object"&&(this.ops[u-1].attributes=d.attributes),this}}return u===this.ops.length?this.ops.push(d):this.ops.splice(u,0,d),this},p.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},p.prototype.filter=function(d){return this.ops.filter(d)},p.prototype.forEach=function(d){this.ops.forEach(d)},p.prototype.map=function(d){return this.ops.map(d)},p.prototype.partition=function(d){var u=[],f=[];return this.forEach(function(x){var b=d(x)?u:f;b.push(x)}),[u,f]},p.prototype.reduce=function(d,u){return this.ops.reduce(d,u)},p.prototype.changeLength=function(){return this.reduce(function(d,u){return u.insert?d+c.length(u):u.delete?d-u.delete:d},0)},p.prototype.length=function(){return this.reduce(function(d,u){return d+c.length(u)},0)},p.prototype.slice=function(d,u){d=d||0,typeof u!="number"&&(u=1/0);for(var f=[],x=c.iterator(this.ops),b=0;b<u&&x.hasNext();){var w;b<d?w=x.next(d-b):(w=x.next(u-b),f.push(w)),b+=c.length(w)}return new p(f)},p.prototype.compose=function(d){var u=c.iterator(this.ops),f=c.iterator(d.ops),x=[],b=f.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var w=b.retain;u.peekType()==="insert"&&u.peekLength()<=w;)w-=u.peekLength(),x.push(u.next());b.retain-w>0&&f.next(b.retain-w)}for(var g=new p(x);u.hasNext()||f.hasNext();)if(f.peekType()==="insert")g.push(f.next());else if(u.peekType()==="delete")g.push(u.next());else{var m=Math.min(u.peekLength(),f.peekLength()),y=u.next(m),v=f.next(m);if(typeof v.retain=="number"){var _={};typeof y.retain=="number"?_.retain=m:_.insert=y.insert;var O=c.attributes.compose(y.attributes,v.attributes,typeof y.retain=="number");if(O&&(_.attributes=O),g.push(_),!f.hasNext()&&o(g.ops[g.ops.length-1],_)){var A=new p(u.rest());return g.concat(A).chop()}}else typeof v.delete=="number"&&typeof y.retain=="number"&&g.push(v)}return g.chop()},p.prototype.concat=function(d){var u=new p(this.ops.slice());return d.ops.length>0&&(u.push(d.ops[0]),u.ops=u.ops.concat(d.ops.slice(1))),u},p.prototype.diff=function(d,u){if(this.ops===d.ops)return new p;var f=[this,d].map(function(m){return m.map(function(y){if(y.insert!=null)return typeof y.insert=="string"?y.insert:h;var v=m===d?"on":"with";throw new Error("diff() called "+v+" non-document")}).join("")}),x=new p,b=s(f[0],f[1],u),w=c.iterator(this.ops),g=c.iterator(d.ops);return b.forEach(function(m){for(var y=m[1].length;y>0;){var v=0;switch(m[0]){case s.INSERT:v=Math.min(g.peekLength(),y),x.push(g.next(v));break;case s.DELETE:v=Math.min(y,w.peekLength()),w.next(v),x.delete(v);break;case s.EQUAL:v=Math.min(w.peekLength(),g.peekLength(),y);var _=w.next(v),O=g.next(v);o(_.insert,O.insert)?x.retain(v,c.attributes.diff(_.attributes,O.attributes)):x.push(O).delete(v);break}y-=v}}),x.chop()},p.prototype.eachLine=function(d,u){u=u||`
`;for(var f=c.iterator(this.ops),x=new p,b=0;f.hasNext();){if(f.peekType()!=="insert")return;var w=f.peek(),g=c.length(w)-f.peekLength(),m=typeof w.insert=="string"?w.insert.indexOf(u,g)-g:-1;if(m<0)x.push(f.next());else if(m>0)x.push(f.next(m));else{if(d(x,f.next(1).attributes||{},b)===!1)return;b+=1,x=new p}}x.length()>0&&d(x,{},b)},p.prototype.transform=function(d,u){if(u=!!u,typeof d=="number")return this.transformPosition(d,u);for(var f=c.iterator(this.ops),x=c.iterator(d.ops),b=new p;f.hasNext()||x.hasNext();)if(f.peekType()==="insert"&&(u||x.peekType()!=="insert"))b.retain(c.length(f.next()));else if(x.peekType()==="insert")b.push(x.next());else{var w=Math.min(f.peekLength(),x.peekLength()),g=f.next(w),m=x.next(w);if(g.delete)continue;m.delete?b.push(m):b.retain(w,c.attributes.transform(g.attributes,m.attributes,u))}return b.chop()},p.prototype.transformPosition=function(d,u){u=!!u;for(var f=c.iterator(this.ops),x=0;f.hasNext()&&x<=d;){var b=f.peekLength(),w=f.peekType();if(f.next(),w==="delete"){d-=Math.min(b,d-x);continue}else w==="insert"&&(x<d||!u)&&(d+=b);x+=b}return d},r.exports=p},function(r,n){var a=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(f){return typeof Array.isArray=="function"?Array.isArray(f):s.call(f)==="[object Array]"},h=function(f){if(!f||s.call(f)!=="[object Object]")return!1;var x=a.call(f,"constructor"),b=f.constructor&&f.constructor.prototype&&a.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!x&&!b)return!1;var w;for(w in f);return typeof w=="undefined"||a.call(f,w)},p=function(f,x){o&&x.name==="__proto__"?o(f,x.name,{enumerable:!0,configurable:!0,value:x.newValue,writable:!0}):f[x.name]=x.newValue},d=function(f,x){if(x==="__proto__")if(a.call(f,x)){if(l)return l(f,x).value}else return;return f[x]};r.exports=function u(){var f,x,b,w,g,m,y=arguments[0],v=1,_=arguments.length,O=!1;for(typeof y=="boolean"&&(O=y,y=arguments[1]||{},v=2),(y==null||typeof y!="object"&&typeof y!="function")&&(y={});v<_;++v)if(f=arguments[v],f!=null)for(x in f)b=d(y,x),w=d(f,x),y!==w&&(O&&w&&(h(w)||(g=c(w)))?(g?(g=!1,m=b&&c(b)?b:[]):m=b&&h(b)?b:{},p(y,{name:x,newValue:u(O,m,w)})):typeof w!="undefined"&&p(y,{name:x,newValue:w}));return y}},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var s=function(){function N(E,T){for(var C=0;C<T.length;C++){var D=T[C];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(E,D.key,D)}}return function(E,T,C){return T&&N(E.prototype,T),C&&N(E,C),E}}(),o=function N(E,T,C){E===null&&(E=Function.prototype);var D=Object.getOwnPropertyDescriptor(E,T);if(D===void 0){var z=Object.getPrototypeOf(E);return z===null?void 0:N(z,T,C)}else{if("value"in D)return D.value;var V=D.get;return V===void 0?void 0:V.call(C)}},l=a(3),c=y(l),h=a(2),p=y(h),d=a(0),u=y(d),f=a(16),x=y(f),b=a(6),w=y(b),g=a(7),m=y(g);function y(N){return N&&N.__esModule?N:{default:N}}function v(N,E){if(!(N instanceof E))throw new TypeError("Cannot call a class as a function")}function _(N,E){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:N}function O(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);N.prototype=Object.create(E&&E.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(N,E):N.__proto__=E)}var A=1,j=function(N){O(E,N);function E(){return v(this,E),_(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return s(E,[{key:"attach",value:function(){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"attach",this).call(this),this.attributes=new u.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new p.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(C,D){var z=u.default.query(C,u.default.Scope.BLOCK_ATTRIBUTE);z!=null&&this.attributes.attribute(z,D)}},{key:"formatAt",value:function(C,D,z,V){this.format(z,V)}},{key:"insertAt",value:function(C,D,z){if(typeof D=="string"&&D.endsWith(`
`)){var V=u.default.create(k.blotName);this.parent.insertBefore(V,C===0?this:this.next),V.insertAt(0,D.slice(0,-1))}else o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,C,D,z)}}]),E}(u.default.Embed);j.scope=u.default.Scope.BLOCK_BLOT;var k=function(N){O(E,N);function E(T){v(this,E);var C=_(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,T));return C.cache={},C}return s(E,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(u.default.Leaf).reduce(function(C,D){return D.length()===0?C:C.insert(D.value(),S(D))},new p.default).insert(`
`,S(this))),this.cache.delta}},{key:"deleteAt",value:function(C,D){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,C,D),this.cache={}}},{key:"formatAt",value:function(C,D,z,V){D<=0||(u.default.query(z,u.default.Scope.BLOCK)?C+D===this.length()&&this.format(z,V):o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,C,Math.min(D,this.length()-C-1),z,V),this.cache={})}},{key:"insertAt",value:function(C,D,z){if(z!=null)return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,C,D,z);if(D.length!==0){var V=D.split(`
`),G=V.shift();G.length>0&&(C<this.length()-1||this.children.tail==null?o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,Math.min(C,this.length()-1),G):this.children.tail.insertAt(this.children.tail.length(),G),this.cache={});var U=this;V.reduce(function(M,R){return U=U.split(M,!0),U.insertAt(0,R),R.length},C+G.length)}}},{key:"insertBefore",value:function(C,D){var z=this.children.head;o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,C,D),z instanceof x.default&&z.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(C,D){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"moveChildren",this).call(this,C,D),this.cache={}}},{key:"optimize",value:function(C){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,C),this.cache={}}},{key:"path",value:function(C){return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,C,!0)}},{key:"removeChild",value:function(C){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"removeChild",this).call(this,C),this.cache={}}},{key:"split",value:function(C){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(D&&(C===0||C>=this.length()-A)){var z=this.clone();return C===0?(this.parent.insertBefore(z,this),this):(this.parent.insertBefore(z,this.next),z)}else{var V=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"split",this).call(this,C,D);return this.cache={},V}}}]),E}(u.default.Block);k.blotName="block",k.tagName="P",k.defaultChild="break",k.allowedChildren=[w.default,u.default.Embed,m.default];function S(N){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return N==null||(typeof N.formats=="function"&&(E=(0,c.default)(E,N.formats())),N.parent==null||N.parent.blotName=="scroll"||N.parent.statics.scope!==N.statics.scope)?E:S(N.parent,E)}n.bubbleFormats=S,n.BlockEmbed=j,n.default=k},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(M,R){var L=[],$=!0,Q=!1,Y=void 0;try{for(var q=M[Symbol.iterator](),K;!($=(K=q.next()).done)&&(L.push(K.value),!(R&&L.length===R));$=!0);}catch(H){Q=!0,Y=H}finally{try{!$&&q.return&&q.return()}finally{if(Q)throw Y}}return L}return function(M,R){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return U(M,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function U(M,R){for(var L=0;L<R.length;L++){var $=R[L];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(M,$.key,$)}}return function(M,R,L){return R&&U(M.prototype,R),L&&U(M,L),M}}();a(50);var c=a(2),h=S(c),p=a(14),d=S(p),u=a(8),f=S(u),x=a(9),b=S(x),w=a(0),g=S(w),m=a(15),y=S(m),v=a(3),_=S(v),O=a(10),A=S(O),j=a(34),k=S(j);function S(U){return U&&U.__esModule?U:{default:U}}function N(U,M,R){return M in U?Object.defineProperty(U,M,{value:R,enumerable:!0,configurable:!0,writable:!0}):U[M]=R,U}function E(U,M){if(!(U instanceof M))throw new TypeError("Cannot call a class as a function")}var T=(0,A.default)("quill"),C=function(){l(U,null,[{key:"debug",value:function(R){R===!0&&(R="log"),A.default.level(R)}},{key:"find",value:function(R){return R.__quill||g.default.find(R)}},{key:"import",value:function(R){return this.imports[R]==null&&T.error("Cannot import "+R+". Are you sure it was registered?"),this.imports[R]}},{key:"register",value:function(R,L){var $=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof R!="string"){var Y=R.attrName||R.blotName;typeof Y=="string"?this.register("formats/"+Y,R,L):Object.keys(R).forEach(function(q){$.register(q,R[q],L)})}else this.imports[R]!=null&&!Q&&T.warn("Overwriting "+R+" with",L),this.imports[R]=L,(R.startsWith("blots/")||R.startsWith("formats/"))&&L.blotName!=="abstract"?g.default.register(L):R.startsWith("modules")&&typeof L.register=="function"&&L.register()}}]);function U(M){var R=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E(this,U),this.options=D(M,L),this.container=this.options.container,this.container==null)return T.error("Invalid Quill container",M);this.options.debug&&U.debug(this.options.debug);var $=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new f.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new y.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(f.default.events.EDITOR_CHANGE,function(Y){Y===f.default.events.TEXT_CHANGE&&R.root.classList.toggle("ql-blank",R.editor.isBlank())}),this.emitter.on(f.default.events.SCROLL_UPDATE,function(Y,q){var K=R.selection.lastRange,H=K&&K.length===0?K.index:void 0;z.call(R,function(){return R.editor.update(null,q,H)},Y)});var Q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+$+"<p><br></p></div>");this.setContents(Q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(U,[{key:"addContainer",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof R=="string"){var $=R;R=document.createElement("div"),R.classList.add($)}return this.container.insertBefore(R,L),R}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(R,L,$){var Q=this,Y=V(R,L,$),q=o(Y,4);return R=q[0],L=q[1],$=q[3],z.call(this,function(){return Q.editor.deleteText(R,L)},$,R,-1*L)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(R),this.container.classList.toggle("ql-disabled",!R)}},{key:"focus",value:function(){var R=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=R,this.scrollIntoView()}},{key:"format",value:function(R,L){var $=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.default.sources.API;return z.call(this,function(){var Y=$.getSelection(!0),q=new h.default;if(Y==null)return q;if(g.default.query(R,g.default.Scope.BLOCK))q=$.editor.formatLine(Y.index,Y.length,N({},R,L));else{if(Y.length===0)return $.selection.format(R,L),q;q=$.editor.formatText(Y.index,Y.length,N({},R,L))}return $.setSelection(Y,f.default.sources.SILENT),q},Q)}},{key:"formatLine",value:function(R,L,$,Q,Y){var q=this,K=void 0,H=V(R,L,$,Q,Y),J=o(H,4);return R=J[0],L=J[1],K=J[2],Y=J[3],z.call(this,function(){return q.editor.formatLine(R,L,K)},Y,R,0)}},{key:"formatText",value:function(R,L,$,Q,Y){var q=this,K=void 0,H=V(R,L,$,Q,Y),J=o(H,4);return R=J[0],L=J[1],K=J[2],Y=J[3],z.call(this,function(){return q.editor.formatText(R,L,K)},Y,R,0)}},{key:"getBounds",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,$=void 0;typeof R=="number"?$=this.selection.getBounds(R,L):$=this.selection.getBounds(R.index,R.length);var Q=this.container.getBoundingClientRect();return{bottom:$.bottom-Q.top,height:$.height,left:$.left-Q.left,right:$.right-Q.left,top:$.top-Q.top,width:$.width}}},{key:"getContents",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,$=V(R,L),Q=o($,2);return R=Q[0],L=Q[1],this.editor.getContents(R,L)}},{key:"getFormat",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof R=="number"?this.editor.getFormat(R,L):this.editor.getFormat(R.index,R.length)}},{key:"getIndex",value:function(R){return R.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(R){return this.scroll.leaf(R)}},{key:"getLine",value:function(R){return this.scroll.line(R)}},{key:"getLines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof R!="number"?this.scroll.lines(R.index,R.length):this.scroll.lines(R,L)}},{key:"getModule",value:function(R){return this.theme.modules[R]}},{key:"getSelection",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return R&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,$=V(R,L),Q=o($,2);return R=Q[0],L=Q[1],this.editor.getText(R,L)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(R,L,$){var Q=this,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:U.sources.API;return z.call(this,function(){return Q.editor.insertEmbed(R,L,$)},Y,R)}},{key:"insertText",value:function(R,L,$,Q,Y){var q=this,K=void 0,H=V(R,0,$,Q,Y),J=o(H,4);return R=J[0],K=J[2],Y=J[3],z.call(this,function(){return q.editor.insertText(R,L,K)},Y,R,L.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(R,L,$){this.clipboard.dangerouslyPasteHTML(R,L,$)}},{key:"removeFormat",value:function(R,L,$){var Q=this,Y=V(R,L,$),q=o(Y,4);return R=q[0],L=q[1],$=q[3],z.call(this,function(){return Q.editor.removeFormat(R,L)},$,R)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(R){var L=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.default.sources.API;return z.call(this,function(){R=new h.default(R);var Q=L.getLength(),Y=L.editor.deleteText(0,Q),q=L.editor.applyDelta(R),K=q.ops[q.ops.length-1];K!=null&&typeof K.insert=="string"&&K.insert[K.insert.length-1]===`
`&&(L.editor.deleteText(L.getLength()-1,1),q.delete(1));var H=Y.compose(q);return H},$)}},{key:"setSelection",value:function(R,L,$){if(R==null)this.selection.setRange(null,L||U.sources.API);else{var Q=V(R,L,$),Y=o(Q,4);R=Y[0],L=Y[1],$=Y[3],this.selection.setRange(new m.Range(R,L),$),$!==f.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.default.sources.API,$=new h.default().insert(R);return this.setContents($,L)}},{key:"update",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.default.sources.USER,L=this.scroll.update(R);return this.selection.update(R),L}},{key:"updateContents",value:function(R){var L=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f.default.sources.API;return z.call(this,function(){return R=new h.default(R),L.editor.applyDelta(R,$)},$,!0)}}]),U}();C.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},C.events=f.default.events,C.sources=f.default.sources,C.version="1.3.7",C.imports={delta:h.default,parchment:g.default,"core/module":b.default,"core/theme":k.default};function D(U,M){if(M=(0,_.default)(!0,{container:U,modules:{clipboard:!0,keyboard:!0,history:!0}},M),!M.theme||M.theme===C.DEFAULTS.theme)M.theme=k.default;else if(M.theme=C.import("themes/"+M.theme),M.theme==null)throw new Error("Invalid theme "+M.theme+". Did you register it?");var R=(0,_.default)(!0,{},M.theme.DEFAULTS);[R,M].forEach(function(Q){Q.modules=Q.modules||{},Object.keys(Q.modules).forEach(function(Y){Q.modules[Y]===!0&&(Q.modules[Y]={})})});var L=Object.keys(R.modules).concat(Object.keys(M.modules)),$=L.reduce(function(Q,Y){var q=C.import("modules/"+Y);return q==null?T.error("Cannot load "+Y+" module. Are you sure you registered it?"):Q[Y]=q.DEFAULTS||{},Q},{});return M.modules!=null&&M.modules.toolbar&&M.modules.toolbar.constructor!==Object&&(M.modules.toolbar={container:M.modules.toolbar}),M=(0,_.default)(!0,{},C.DEFAULTS,{modules:$},R,M),["bounds","container","scrollingContainer"].forEach(function(Q){typeof M[Q]=="string"&&(M[Q]=document.querySelector(M[Q]))}),M.modules=Object.keys(M.modules).reduce(function(Q,Y){return M.modules[Y]&&(Q[Y]=M.modules[Y]),Q},{}),M}function z(U,M,R,L){if(this.options.strict&&!this.isEnabled()&&M===f.default.sources.USER)return new h.default;var $=R==null?null:this.getSelection(),Q=this.editor.delta,Y=U();if($!=null&&(R===!0&&(R=$.index),L==null?$=G($,Y,M):L!==0&&($=G($,R,L,M)),this.setSelection($,f.default.sources.SILENT)),Y.length()>0){var q,K=[f.default.events.TEXT_CHANGE,Y,Q,M];if((q=this.emitter).emit.apply(q,[f.default.events.EDITOR_CHANGE].concat(K)),M!==f.default.sources.SILENT){var H;(H=this.emitter).emit.apply(H,K)}}return Y}function V(U,M,R,L,$){var Q={};return typeof U.index=="number"&&typeof U.length=="number"?typeof M!="number"?($=L,L=R,R=M,M=U.length,U=U.index):(M=U.length,U=U.index):typeof M!="number"&&($=L,L=R,R=M,M=0),(typeof R=="undefined"?"undefined":s(R))==="object"?(Q=R,$=L):typeof R=="string"&&(L!=null?Q[R]=L:$=R),$=$||f.default.sources.API,[U,M,Q,$]}function G(U,M,R,L){if(U==null)return null;var $=void 0,Q=void 0;if(M instanceof h.default){var Y=[U.index,U.index+U.length].map(function(J){return M.transformPosition(J,L!==f.default.sources.USER)}),q=o(Y,2);$=q[0],Q=q[1]}else{var K=[U.index,U.index+U.length].map(function(J){return J<M||J===M&&L===f.default.sources.USER?J:R>=0?J+R:Math.max(M,J+R)}),H=o(K,2);$=H[0],Q=H[1]}return new m.Range($,Q-$)}n.expandConfig=D,n.overload=V,n.default=C},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function w(g,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,m,y){return m&&w(g.prototype,m),y&&w(g,y),g}}(),o=function w(g,m,y){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,m);if(v===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:w(_,m,y)}else{if("value"in v)return v.value;var O=v.get;return O===void 0?void 0:O.call(y)}},l=a(7),c=d(l),h=a(0),p=d(h);function d(w){return w&&w.__esModule?w:{default:w}}function u(w,g){if(!(w instanceof g))throw new TypeError("Cannot call a class as a function")}function f(w,g){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:w}function x(w,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);w.prototype=Object.create(g&&g.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(w,g):w.__proto__=g)}var b=function(w){x(g,w);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"formatAt",value:function(y,v,_,O){if(g.compare(this.statics.blotName,_)<0&&p.default.query(_,p.default.Scope.BLOT)){var A=this.isolate(y,v);O&&A.wrap(_,O)}else o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,y,v,_,O)}},{key:"optimize",value:function(y){if(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,y),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var v=this.parent.isolate(this.offset(),this.length());this.moveChildren(v),v.wrap(this)}}}],[{key:"compare",value:function(y,v){var _=g.order.indexOf(y),O=g.order.indexOf(v);return _>=0||O>=0?_-O:y===v?0:y<v?-1:1}}]),g}(p.default.Inline);b.allowedChildren=[b,p.default.Embed,c.default],b.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=b},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(0),o=l(s);function l(u){return u&&u.__esModule?u:{default:u}}function c(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function h(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function p(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var d=function(u){p(f,u);function f(){return c(this,f),h(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default.Text);n.default=d},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function m(y,v){for(var _=0;_<v.length;_++){var O=v[_];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(y,O.key,O)}}return function(y,v,_){return v&&m(y.prototype,v),_&&m(y,_),y}}(),o=function m(y,v,_){y===null&&(y=Function.prototype);var O=Object.getOwnPropertyDescriptor(y,v);if(O===void 0){var A=Object.getPrototypeOf(y);return A===null?void 0:m(A,v,_)}else{if("value"in O)return O.value;var j=O.get;return j===void 0?void 0:j.call(_)}},l=a(54),c=d(l),h=a(10),p=d(h);function d(m){return m&&m.__esModule?m:{default:m}}function u(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function f(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function x(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var b=(0,p.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(m){document.addEventListener(m,function(){for(var y=arguments.length,v=Array(y),_=0;_<y;_++)v[_]=arguments[_];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(O){if(O.__quill&&O.__quill.emitter){var A;(A=O.__quill.emitter).handleDOM.apply(A,v)}})})});var g=function(m){x(y,m);function y(){u(this,y);var v=f(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));return v.listeners={},v.on("error",b.error),v}return s(y,[{key:"emit",value:function(){b.log.apply(b,arguments),o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(_){for(var O=arguments.length,A=Array(O>1?O-1:0),j=1;j<O;j++)A[j-1]=arguments[j];(this.listeners[_.type]||[]).forEach(function(k){var S=k.node,N=k.handler;(_.target===S||S.contains(_.target))&&N.apply(void 0,[_].concat(A))})}},{key:"listenDOM",value:function(_,O,A){this.listeners[_]||(this.listeners[_]=[]),this.listeners[_].push({node:O,handler:A})}}]),y}(c.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},n.default=g},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function l(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,l),this.quill=c,this.options=h};o.DEFAULTS={},n.default=o},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function l(h){if(s.indexOf(h)<=s.indexOf(o)){for(var p,d=arguments.length,u=Array(d>1?d-1:0),f=1;f<d;f++)u[f-1]=arguments[f];(p=console)[h].apply(p,u)}}function c(h){return s.reduce(function(p,d){return p[d]=l.bind(console,d,h),p},{})}l.level=c.level=function(h){o=h},n.default=c},function(r,n,a){var s=Array.prototype.slice,o=a(52),l=a(53),c=r.exports=function(u,f,x){return x||(x={}),u===f?!0:u instanceof Date&&f instanceof Date?u.getTime()===f.getTime():!u||!f||typeof u!="object"&&typeof f!="object"?x.strict?u===f:u==f:d(u,f,x)};function h(u){return u==null}function p(u){return!(!u||typeof u!="object"||typeof u.length!="number"||typeof u.copy!="function"||typeof u.slice!="function"||u.length>0&&typeof u[0]!="number")}function d(u,f,x){var b,w;if(h(u)||h(f)||u.prototype!==f.prototype)return!1;if(l(u))return l(f)?(u=s.call(u),f=s.call(f),c(u,f,x)):!1;if(p(u)){if(!p(f)||u.length!==f.length)return!1;for(b=0;b<u.length;b++)if(u[b]!==f[b])return!1;return!0}try{var g=o(u),m=o(f)}catch(y){return!1}if(g.length!=m.length)return!1;for(g.sort(),m.sort(),b=g.length-1;b>=0;b--)if(g[b]!=m[b])return!1;for(b=g.length-1;b>=0;b--)if(w=g[b],!c(u[w],f[w],x))return!1;return typeof u==typeof f}},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(1),o=function(){function l(c,h,p){p===void 0&&(p={}),this.attrName=c,this.keyName=h;var d=s.Scope.TYPE&s.Scope.ATTRIBUTE;p.scope!=null?this.scope=p.scope&s.Scope.LEVEL|d:this.scope=s.Scope.ATTRIBUTE,p.whitelist!=null&&(this.whitelist=p.whitelist)}return l.keys=function(c){return[].map.call(c.attributes,function(h){return h.name})},l.prototype.add=function(c,h){return this.canAdd(c,h)?(c.setAttribute(this.keyName,h),!0):!1},l.prototype.canAdd=function(c,h){var p=s.query(c,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return p==null?!1:this.whitelist==null?!0:typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1},l.prototype.remove=function(c){c.removeAttribute(this.keyName)},l.prototype.value=function(c){var h=c.getAttribute(this.keyName);return this.canAdd(c,h)&&h?h:""},l}();n.default=o},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var s=function(){function j(k,S){var N=[],E=!0,T=!1,C=void 0;try{for(var D=k[Symbol.iterator](),z;!(E=(z=D.next()).done)&&(N.push(z.value),!(S&&N.length===S));E=!0);}catch(V){T=!0,C=V}finally{try{!E&&D.return&&D.return()}finally{if(T)throw C}}return N}return function(k,S){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return j(k,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function j(k,S){for(var N=0;N<S.length;N++){var E=S[N];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(k,E.key,E)}}return function(k,S,N){return S&&j(k.prototype,S),N&&j(k,N),k}}(),l=function j(k,S,N){k===null&&(k=Function.prototype);var E=Object.getOwnPropertyDescriptor(k,S);if(E===void 0){var T=Object.getPrototypeOf(k);return T===null?void 0:j(T,S,N)}else{if("value"in E)return E.value;var C=E.get;return C===void 0?void 0:C.call(N)}},c=a(2),h=m(c),p=a(0),d=m(p),u=a(4),f=m(u),x=a(6),b=m(x),w=a(7),g=m(w);function m(j){return j&&j.__esModule?j:{default:j}}function y(j,k){if(!(j instanceof k))throw new TypeError("Cannot call a class as a function")}function v(j,k){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:j}function _(j,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);j.prototype=Object.create(k&&k.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(j,k):j.__proto__=k)}var O=function(j){_(k,j);function k(){return y(this,k),v(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return k}(b.default);O.blotName="code",O.tagName="CODE";var A=function(j){_(k,j);function k(){return y(this,k),v(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return o(k,[{key:"delta",value:function(){var N=this,E=this.domNode.textContent;return E.endsWith(`
`)&&(E=E.slice(0,-1)),E.split(`
`).reduce(function(T,C){return T.insert(C).insert(`
`,N.formats())},new h.default)}},{key:"format",value:function(N,E){if(!(N===this.statics.blotName&&E)){var T=this.descendant(g.default,this.length()-1),C=s(T,1),D=C[0];D!=null&&D.deleteAt(D.length()-1,1),l(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,N,E)}}},{key:"formatAt",value:function(N,E,T,C){if(E!==0&&!(d.default.query(T,d.default.Scope.BLOCK)==null||T===this.statics.blotName&&C===this.statics.formats(this.domNode))){var D=this.newlineIndex(N);if(!(D<0||D>=N+E)){var z=this.newlineIndex(N,!0)+1,V=D-z+1,G=this.isolate(z,V),U=G.next;G.format(T,C),U instanceof k&&U.formatAt(0,N-z+E-V,T,C)}}}},{key:"insertAt",value:function(N,E,T){if(T==null){var C=this.descendant(g.default,N),D=s(C,2),z=D[0],V=D[1];z.insertAt(V,E)}}},{key:"length",value:function(){var N=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?N:N+1}},{key:"newlineIndex",value:function(N){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return this.domNode.textContent.slice(0,N).lastIndexOf(`
`);var T=this.domNode.textContent.slice(N).indexOf(`
`);return T>-1?N+T:-1}},{key:"optimize",value:function(N){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),l(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,N);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===E.statics.formats(E.domNode)&&(E.optimize(N),E.moveChildren(this),E.remove())}},{key:"replace",value:function(N){l(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,N),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(E){var T=d.default.find(E);T==null?E.parentNode.removeChild(E):T instanceof d.default.Embed?T.remove():T.unwrap()})}}],[{key:"create",value:function(N){var E=l(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,N);return E.setAttribute("spellcheck",!1),E}},{key:"formats",value:function(){return!0}}]),k}(f.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",n.Code=O,n.default=A},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(M,R){var L=[],$=!0,Q=!1,Y=void 0;try{for(var q=M[Symbol.iterator](),K;!($=(K=q.next()).done)&&(L.push(K.value),!(R&&L.length===R));$=!0);}catch(H){Q=!0,Y=H}finally{try{!$&&q.return&&q.return()}finally{if(Q)throw Y}}return L}return function(M,R){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return U(M,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function U(M,R){for(var L=0;L<R.length;L++){var $=R[L];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(M,$.key,$)}}return function(M,R,L){return R&&U(M.prototype,R),L&&U(M,L),M}}(),c=a(2),h=E(c),p=a(20),d=E(p),u=a(0),f=E(u),x=a(13),b=E(x),w=a(24),g=E(w),m=a(4),y=E(m),v=a(16),_=E(v),O=a(21),A=E(O),j=a(11),k=E(j),S=a(3),N=E(S);function E(U){return U&&U.__esModule?U:{default:U}}function T(U,M,R){return M in U?Object.defineProperty(U,M,{value:R,enumerable:!0,configurable:!0,writable:!0}):U[M]=R,U}function C(U,M){if(!(U instanceof M))throw new TypeError("Cannot call a class as a function")}var D=/^[ -~]*$/,z=function(){function U(M){C(this,U),this.scroll=M,this.delta=this.getDelta()}return l(U,[{key:"applyDelta",value:function(R){var L=this,$=!1;this.scroll.update();var Q=this.scroll.length();return this.scroll.batchStart(),R=G(R),R.reduce(function(Y,q){var K=q.retain||q.delete||q.insert.length||1,H=q.attributes||{};if(q.insert!=null){if(typeof q.insert=="string"){var J=q.insert;J.endsWith(`
`)&&$&&($=!1,J=J.slice(0,-1)),Y>=Q&&!J.endsWith(`
`)&&($=!0),L.scroll.insertAt(Y,J);var Z=L.scroll.line(Y),ee=o(Z,2),ue=ee[0],oe=ee[1],le=(0,N.default)({},(0,m.bubbleFormats)(ue));if(ue instanceof y.default){var ge=ue.descendant(f.default.Leaf,oe),ke=o(ge,1),Ae=ke[0];le=(0,N.default)(le,(0,m.bubbleFormats)(Ae))}H=d.default.attributes.diff(le,H)||{}}else if(s(q.insert)==="object"){var re=Object.keys(q.insert)[0];if(re==null)return Y;L.scroll.insertAt(Y,re,q.insert[re])}Q+=K}return Object.keys(H).forEach(function(se){L.scroll.formatAt(Y,K,se,H[se])}),Y+K},0),R.reduce(function(Y,q){return typeof q.delete=="number"?(L.scroll.deleteAt(Y,q.delete),Y):Y+(q.retain||q.insert.length||1)},0),this.scroll.batchEnd(),this.update(R)}},{key:"deleteText",value:function(R,L){return this.scroll.deleteAt(R,L),this.update(new h.default().retain(R).delete(L))}},{key:"formatLine",value:function(R,L){var $=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Q).forEach(function(Y){if(!($.scroll.whitelist!=null&&!$.scroll.whitelist[Y])){var q=$.scroll.lines(R,Math.max(L,1)),K=L;q.forEach(function(H){var J=H.length();if(!(H instanceof b.default))H.format(Y,Q[Y]);else{var Z=R-H.offset($.scroll),ee=H.newlineIndex(Z+K)-Z+1;H.formatAt(Z,ee,Y,Q[Y])}K-=J})}}),this.scroll.optimize(),this.update(new h.default().retain(R).retain(L,(0,A.default)(Q)))}},{key:"formatText",value:function(R,L){var $=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Q).forEach(function(Y){$.scroll.formatAt(R,L,Y,Q[Y])}),this.update(new h.default().retain(R).retain(L,(0,A.default)(Q)))}},{key:"getContents",value:function(R,L){return this.delta.slice(R,R+L)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(R,L){return R.concat(L.delta())},new h.default)}},{key:"getFormat",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,$=[],Q=[];L===0?this.scroll.path(R).forEach(function(q){var K=o(q,1),H=K[0];H instanceof y.default?$.push(H):H instanceof f.default.Leaf&&Q.push(H)}):($=this.scroll.lines(R,L),Q=this.scroll.descendants(f.default.Leaf,R,L));var Y=[$,Q].map(function(q){if(q.length===0)return{};for(var K=(0,m.bubbleFormats)(q.shift());Object.keys(K).length>0;){var H=q.shift();if(H==null)return K;K=V((0,m.bubbleFormats)(H),K)}return K});return N.default.apply(N.default,Y)}},{key:"getText",value:function(R,L){return this.getContents(R,L).filter(function($){return typeof $.insert=="string"}).map(function($){return $.insert}).join("")}},{key:"insertEmbed",value:function(R,L,$){return this.scroll.insertAt(R,L,$),this.update(new h.default().retain(R).insert(T({},L,$)))}},{key:"insertText",value:function(R,L){var $=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(R,L),Object.keys(Q).forEach(function(Y){$.scroll.formatAt(R,L.length,Y,Q[Y])}),this.update(new h.default().retain(R).insert(L,(0,A.default)(Q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var R=this.scroll.children.head;return R.statics.blotName!==y.default.blotName||R.children.length>1?!1:R.children.head instanceof _.default}},{key:"removeFormat",value:function(R,L){var $=this.getText(R,L),Q=this.scroll.line(R+L),Y=o(Q,2),q=Y[0],K=Y[1],H=0,J=new h.default;q!=null&&(q instanceof b.default?H=q.newlineIndex(K)-K+1:H=q.length()-K,J=q.delta().slice(K,K+H-1).insert(`
`));var Z=this.getContents(R,L+H),ee=Z.diff(new h.default().insert($).concat(J)),ue=new h.default().retain(R).concat(ee);return this.applyDelta(ue)}},{key:"update",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Q=this.delta;if(L.length===1&&L[0].type==="characterData"&&L[0].target.data.match(D)&&f.default.find(L[0].target)){var Y=f.default.find(L[0].target),q=(0,m.bubbleFormats)(Y),K=Y.offset(this.scroll),H=L[0].oldValue.replace(g.default.CONTENTS,""),J=new h.default().insert(H),Z=new h.default().insert(Y.value()),ee=new h.default().retain(K).concat(J.diff(Z,$));R=ee.reduce(function(ue,oe){return oe.insert?ue.insert(oe.insert,q):ue.push(oe)},new h.default),this.delta=Q.compose(R)}else this.delta=this.getDelta(),(!R||!(0,k.default)(Q.compose(R),this.delta))&&(R=Q.diff(this.delta,$));return R}}]),U}();function V(U,M){return Object.keys(M).reduce(function(R,L){return U[L]==null||(M[L]===U[L]?R[L]=M[L]:Array.isArray(M[L])?M[L].indexOf(U[L])<0&&(R[L]=M[L].concat([U[L]])):R[L]=[M[L],U[L]]),R},{})}function G(U){return U.reduce(function(M,R){if(R.insert===1){var L=(0,A.default)(R.attributes);return delete L.image,M.insert({image:R.attributes.image},L)}if(R.attributes!=null&&(R.attributes.list===!0||R.attributes.bullet===!0)&&(R=(0,A.default)(R),R.attributes.list?R.attributes.list="ordered":(R.attributes.list="bullet",delete R.attributes.bullet)),typeof R.insert=="string"){var $=R.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return M.insert($,R.attributes)}return M.push(R)},new h.default)}n.default=z},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var s=function(){function j(k,S){var N=[],E=!0,T=!1,C=void 0;try{for(var D=k[Symbol.iterator](),z;!(E=(z=D.next()).done)&&(N.push(z.value),!(S&&N.length===S));E=!0);}catch(V){T=!0,C=V}finally{try{!E&&D.return&&D.return()}finally{if(T)throw C}}return N}return function(k,S){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return j(k,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function j(k,S){for(var N=0;N<S.length;N++){var E=S[N];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(k,E.key,E)}}return function(k,S,N){return S&&j(k.prototype,S),N&&j(k,N),k}}(),l=a(0),c=g(l),h=a(21),p=g(h),d=a(11),u=g(d),f=a(8),x=g(f),b=a(10),w=g(b);function g(j){return j&&j.__esModule?j:{default:j}}function m(j){if(Array.isArray(j)){for(var k=0,S=Array(j.length);k<j.length;k++)S[k]=j[k];return S}else return Array.from(j)}function y(j,k){if(!(j instanceof k))throw new TypeError("Cannot call a class as a function")}var v=(0,w.default)("quill:selection"),_=function j(k){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;y(this,j),this.index=k,this.length=S},O=function(){function j(k,S){var N=this;y(this,j),this.emitter=S,this.scroll=k,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new _(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){N.mouseDown||setTimeout(N.update.bind(N,x.default.sources.USER),1)}),this.emitter.on(x.default.events.EDITOR_CHANGE,function(E,T){E===x.default.events.TEXT_CHANGE&&T.length()>0&&N.update(x.default.sources.SILENT)}),this.emitter.on(x.default.events.SCROLL_BEFORE_UPDATE,function(){if(N.hasFocus()){var E=N.getNativeRange();E!=null&&E.start.node!==N.cursor.textNode&&N.emitter.once(x.default.events.SCROLL_UPDATE,function(){try{N.setNativeRange(E.start.node,E.start.offset,E.end.node,E.end.offset)}catch(T){}})}}),this.emitter.on(x.default.events.SCROLL_OPTIMIZE,function(E,T){if(T.range){var C=T.range,D=C.startNode,z=C.startOffset,V=C.endNode,G=C.endOffset;N.setNativeRange(D,z,V,G)}}),this.update(x.default.sources.SILENT)}return o(j,[{key:"handleComposition",value:function(){var S=this;this.root.addEventListener("compositionstart",function(){S.composing=!0}),this.root.addEventListener("compositionend",function(){if(S.composing=!1,S.cursor.parent){var N=S.cursor.restore();if(!N)return;setTimeout(function(){S.setNativeRange(N.startNode,N.startOffset,N.endNode,N.endOffset)},1)}})}},{key:"handleDragging",value:function(){var S=this;this.emitter.listenDOM("mousedown",document.body,function(){S.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){S.mouseDown=!1,S.update(x.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(S,N){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[S])){this.scroll.update();var E=this.getNativeRange();if(!(E==null||!E.native.collapsed||c.default.query(S,c.default.Scope.BLOCK))){if(E.start.node!==this.cursor.textNode){var T=c.default.find(E.start.node,!1);if(T==null)return;if(T instanceof c.default.Leaf){var C=T.split(E.start.offset);T.parent.insertBefore(this.cursor,C)}else T.insertBefore(this.cursor,E.start.node);this.cursor.attach()}this.cursor.format(S,N),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(S){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=this.scroll.length();S=Math.min(S,E-1),N=Math.min(S+N,E-1)-S;var T=void 0,C=this.scroll.leaf(S),D=s(C,2),z=D[0],V=D[1];if(z==null)return null;var G=z.position(V,!0),U=s(G,2);T=U[0],V=U[1];var M=document.createRange();if(N>0){M.setStart(T,V);var R=this.scroll.leaf(S+N),L=s(R,2);if(z=L[0],V=L[1],z==null)return null;var $=z.position(V,!0),Q=s($,2);return T=Q[0],V=Q[1],M.setEnd(T,V),M.getBoundingClientRect()}else{var Y="left",q=void 0;return T instanceof Text?(V<T.data.length?(M.setStart(T,V),M.setEnd(T,V+1)):(M.setStart(T,V-1),M.setEnd(T,V),Y="right"),q=M.getBoundingClientRect()):(q=z.domNode.getBoundingClientRect(),V>0&&(Y="right")),{bottom:q.top+q.height,height:q.height,left:q[Y],right:q[Y],top:q.top,width:0}}}},{key:"getNativeRange",value:function(){var S=document.getSelection();if(S==null||S.rangeCount<=0)return null;var N=S.getRangeAt(0);if(N==null)return null;var E=this.normalizeNative(N);return v.info("getNativeRange",E),E}},{key:"getRange",value:function(){var S=this.getNativeRange();if(S==null)return[null,null];var N=this.normalizedToRange(S);return[N,S]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(S){var N=this,E=[[S.start.node,S.start.offset]];S.native.collapsed||E.push([S.end.node,S.end.offset]);var T=E.map(function(z){var V=s(z,2),G=V[0],U=V[1],M=c.default.find(G,!0),R=M.offset(N.scroll);return U===0?R:M instanceof c.default.Container?R+M.length():R+M.index(G,U)}),C=Math.min(Math.max.apply(Math,m(T)),this.scroll.length()-1),D=Math.min.apply(Math,[C].concat(m(T)));return new _(D,C-D)}},{key:"normalizeNative",value:function(S){if(!A(this.root,S.startContainer)||!S.collapsed&&!A(this.root,S.endContainer))return null;var N={start:{node:S.startContainer,offset:S.startOffset},end:{node:S.endContainer,offset:S.endOffset},native:S};return[N.start,N.end].forEach(function(E){for(var T=E.node,C=E.offset;!(T instanceof Text)&&T.childNodes.length>0;)if(T.childNodes.length>C)T=T.childNodes[C],C=0;else if(T.childNodes.length===C)T=T.lastChild,C=T instanceof Text?T.data.length:T.childNodes.length+1;else break;E.node=T,E.offset=C}),N}},{key:"rangeToNative",value:function(S){var N=this,E=S.collapsed?[S.index]:[S.index,S.index+S.length],T=[],C=this.scroll.length();return E.forEach(function(D,z){D=Math.min(C-1,D);var V=void 0,G=N.scroll.leaf(D),U=s(G,2),M=U[0],R=U[1],L=M.position(R,z!==0),$=s(L,2);V=$[0],R=$[1],T.push(V,R)}),T.length<2&&(T=T.concat(T)),T}},{key:"scrollIntoView",value:function(S){var N=this.lastRange;if(N!=null){var E=this.getBounds(N.index,N.length);if(E!=null){var T=this.scroll.length()-1,C=this.scroll.line(Math.min(N.index,T)),D=s(C,1),z=D[0],V=z;if(N.length>0){var G=this.scroll.line(Math.min(N.index+N.length,T)),U=s(G,1);V=U[0]}if(!(z==null||V==null)){var M=S.getBoundingClientRect();E.top<M.top?S.scrollTop-=M.top-E.top:E.bottom>M.bottom&&(S.scrollTop+=E.bottom-M.bottom)}}}}},{key:"setNativeRange",value:function(S,N){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:N,C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(v.info("setNativeRange",S,N,E,T),!(S!=null&&(this.root.parentNode==null||S.parentNode==null||E.parentNode==null))){var D=document.getSelection();if(D!=null)if(S!=null){this.hasFocus()||this.root.focus();var z=(this.getNativeRange()||{}).native;if(z==null||C||S!==z.startContainer||N!==z.startOffset||E!==z.endContainer||T!==z.endOffset){S.tagName=="BR"&&(N=[].indexOf.call(S.parentNode.childNodes,S),S=S.parentNode),E.tagName=="BR"&&(T=[].indexOf.call(E.parentNode.childNodes,E),E=E.parentNode);var V=document.createRange();V.setStart(S,N),V.setEnd(E,T),D.removeAllRanges(),D.addRange(V)}}else D.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(S){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;if(typeof N=="string"&&(E=N,N=!1),v.info("setRange",S),S!=null){var T=this.rangeToNative(S);this.setNativeRange.apply(this,m(T).concat([N]))}else this.setNativeRange(null);this.update(E)}},{key:"update",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.default.sources.USER,N=this.lastRange,E=this.getRange(),T=s(E,2),C=T[0],D=T[1];if(this.lastRange=C,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,u.default)(N,this.lastRange)){var z;!this.composing&&D!=null&&D.native.collapsed&&D.start.node!==this.cursor.textNode&&this.cursor.restore();var V=[x.default.events.SELECTION_CHANGE,(0,p.default)(this.lastRange),(0,p.default)(N),S];if((z=this.emitter).emit.apply(z,[x.default.events.EDITOR_CHANGE].concat(V)),S!==x.default.sources.SILENT){var G;(G=this.emitter).emit.apply(G,V)}}}}]),j}();function A(j,k){try{k.parentNode}catch(S){return!1}return k instanceof Text&&(k=k.parentNode),j.contains(k)}n.Range=_,n.default=O},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(b,w){for(var g=0;g<w.length;g++){var m=w[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,w,g){return w&&x(b.prototype,w),g&&x(b,g),b}}(),o=function x(b,w,g){b===null&&(b=Function.prototype);var m=Object.getOwnPropertyDescriptor(b,w);if(m===void 0){var y=Object.getPrototypeOf(b);return y===null?void 0:x(y,w,g)}else{if("value"in m)return m.value;var v=m.get;return v===void 0?void 0:v.call(g)}},l=a(0),c=h(l);function h(x){return x&&x.__esModule?x:{default:x}}function p(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function d(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function u(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var f=function(x){u(b,x);function b(){return p(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"insertInto",value:function(g,m){g.children.length===0?o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertInto",this).call(this,g,m):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),b}(c.default.Embed);f.blotName="break",f.tagName="BR",n.default=f},function(r,n,a){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var x in f)f.hasOwnProperty(x)&&(u[x]=f[x])};return function(u,f){d(u,f);function x(){this.constructor=u}u.prototype=f===null?Object.create(f):(x.prototype=f.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(44),l=a(30),c=a(1),h=function(d){s(u,d);function u(f){var x=d.call(this,f)||this;return x.build(),x}return u.prototype.appendChild=function(f){this.insertBefore(f)},u.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(f){f.attach()})},u.prototype.build=function(){var f=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(x){try{var b=p(x);f.insertBefore(b,f.children.head||void 0)}catch(w){if(w instanceof c.ParchmentError)return;throw w}})},u.prototype.deleteAt=function(f,x){if(f===0&&x===this.length())return this.remove();this.children.forEachAt(f,x,function(b,w,g){b.deleteAt(w,g)})},u.prototype.descendant=function(f,x){var b=this.children.find(x),w=b[0],g=b[1];return f.blotName==null&&f(w)||f.blotName!=null&&w instanceof f?[w,g]:w instanceof u?w.descendant(f,g):[null,-1]},u.prototype.descendants=function(f,x,b){x===void 0&&(x=0),b===void 0&&(b=Number.MAX_VALUE);var w=[],g=b;return this.children.forEachAt(x,b,function(m,y,v){(f.blotName==null&&f(m)||f.blotName!=null&&m instanceof f)&&w.push(m),m instanceof u&&(w=w.concat(m.descendants(f,y,g))),g-=v}),w},u.prototype.detach=function(){this.children.forEach(function(f){f.detach()}),d.prototype.detach.call(this)},u.prototype.formatAt=function(f,x,b,w){this.children.forEachAt(f,x,function(g,m,y){g.formatAt(m,y,b,w)})},u.prototype.insertAt=function(f,x,b){var w=this.children.find(f),g=w[0],m=w[1];if(g)g.insertAt(m,x,b);else{var y=b==null?c.create("text",x):c.create(x,b);this.appendChild(y)}},u.prototype.insertBefore=function(f,x){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(b){return f instanceof b}))throw new c.ParchmentError("Cannot insert "+f.statics.blotName+" into "+this.statics.blotName);f.insertInto(this,x)},u.prototype.length=function(){return this.children.reduce(function(f,x){return f+x.length()},0)},u.prototype.moveChildren=function(f,x){this.children.forEach(function(b){f.insertBefore(b,x)})},u.prototype.optimize=function(f){if(d.prototype.optimize.call(this,f),this.children.length===0)if(this.statics.defaultChild!=null){var x=c.create(this.statics.defaultChild);this.appendChild(x),x.optimize(f)}else this.remove()},u.prototype.path=function(f,x){x===void 0&&(x=!1);var b=this.children.find(f,x),w=b[0],g=b[1],m=[[this,f]];return w instanceof u?m.concat(w.path(g,x)):(w!=null&&m.push([w,g]),m)},u.prototype.removeChild=function(f){this.children.remove(f)},u.prototype.replace=function(f){f instanceof u&&f.moveChildren(this),d.prototype.replace.call(this,f)},u.prototype.split=function(f,x){if(x===void 0&&(x=!1),!x){if(f===0)return this;if(f===this.length())return this.next}var b=this.clone();return this.parent.insertBefore(b,this.next),this.children.forEachAt(f,this.length(),function(w,g,m){w=w.split(g,x),b.appendChild(w)}),b},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(f,x){var b=this,w=[],g=[];f.forEach(function(m){m.target===b.domNode&&m.type==="childList"&&(w.push.apply(w,m.addedNodes),g.push.apply(g,m.removedNodes))}),g.forEach(function(m){if(!(m.parentNode!=null&&m.tagName!=="IFRAME"&&document.body.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var y=c.find(m);y!=null&&(y.domNode.parentNode==null||y.domNode.parentNode===b.domNode)&&y.detach()}}),w.filter(function(m){return m.parentNode==b.domNode}).sort(function(m,y){return m===y?0:m.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(m){var y=null;m.nextSibling!=null&&(y=c.find(m.nextSibling));var v=p(m);(v.next!=y||v.next==null)&&(v.parent!=null&&v.parent.removeChild(b),b.insertBefore(v,y||void 0))})},u}(l.default);function p(d){var u=c.find(d);if(u==null)try{u=c.create(d)}catch(f){u=c.create(c.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(x){u.domNode.appendChild(x)}),d.parentNode&&d.parentNode.replaceChild(u.domNode,d),u.attach()}return u}n.default=h},function(r,n,a){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var x in f)f.hasOwnProperty(x)&&(u[x]=f[x])};return function(u,f){d(u,f);function x(){this.constructor=u}u.prototype=f===null?Object.create(f):(x.prototype=f.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(12),l=a(31),c=a(17),h=a(1),p=function(d){s(u,d);function u(f){var x=d.call(this,f)||this;return x.attributes=new l.default(x.domNode),x}return u.formats=function(f){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return f.tagName.toLowerCase()},u.prototype.format=function(f,x){var b=h.query(f);b instanceof o.default?this.attributes.attribute(b,x):x&&b!=null&&(f!==this.statics.blotName||this.formats()[f]!==x)&&this.replaceWith(f,x)},u.prototype.formats=function(){var f=this.attributes.values(),x=this.statics.formats(this.domNode);return x!=null&&(f[this.statics.blotName]=x),f},u.prototype.replaceWith=function(f,x){var b=d.prototype.replaceWith.call(this,f,x);return this.attributes.copy(b),b},u.prototype.update=function(f,x){var b=this;d.prototype.update.call(this,f,x),f.some(function(w){return w.target===b.domNode&&w.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(f,x){var b=d.prototype.wrap.call(this,f,x);return b instanceof u&&b.statics.scope===this.statics.scope&&this.attributes.move(b),b},u}(c.default);n.default=p},function(r,n,a){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var u in d)d.hasOwnProperty(u)&&(p[u]=d[u])};return function(p,d){h(p,d);function u(){this.constructor=p}p.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(30),l=a(1),c=function(h){s(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.value=function(d){return!0},p.prototype.index=function(d,u){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},p.prototype.position=function(d,u){var f=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(f+=1),[this.parent.domNode,f]},p.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},p.scope=l.Scope.INLINE_BLOT,p}(o.default);n.default=c},function(r,n,a){var s=a(11),o=a(3),l={attributes:{compose:function(h,p,d){typeof h!="object"&&(h={}),typeof p!="object"&&(p={});var u=o(!0,{},p);d||(u=Object.keys(u).reduce(function(x,b){return u[b]!=null&&(x[b]=u[b]),x},{}));for(var f in h)h[f]!==void 0&&p[f]===void 0&&(u[f]=h[f]);return Object.keys(u).length>0?u:void 0},diff:function(h,p){typeof h!="object"&&(h={}),typeof p!="object"&&(p={});var d=Object.keys(h).concat(Object.keys(p)).reduce(function(u,f){return s(h[f],p[f])||(u[f]=p[f]===void 0?null:p[f]),u},{});return Object.keys(d).length>0?d:void 0},transform:function(h,p,d){if(typeof h!="object")return p;if(typeof p=="object"){if(!d)return p;var u=Object.keys(p).reduce(function(f,x){return h[x]===void 0&&(f[x]=p[x]),f},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(h){return new c(h)},length:function(h){return typeof h.delete=="number"?h.delete:typeof h.retain=="number"?h.retain:typeof h.insert=="string"?h.insert.length:1}};function c(h){this.ops=h,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(h){h||(h=1/0);var p=this.ops[this.index];if(p){var d=this.offset,u=l.length(p);if(h>=u-d?(h=u-d,this.index+=1,this.offset=0):this.offset+=h,typeof p.delete=="number")return{delete:h};var f={};return p.attributes&&(f.attributes=p.attributes),typeof p.retain=="number"?f.retain=h:typeof p.insert=="string"?f.insert=p.insert.substr(d,h):f.insert=p.insert,f}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var h=this.offset,p=this.index,d=this.next(),u=this.ops.slice(this.index);return this.offset=h,this.index=p,[d].concat(u)}else return[]},r.exports=l},function(r,n){var a=function(){function s(b,w){return w!=null&&b instanceof w}var o;try{o=Map}catch(b){o=function(){}}var l;try{l=Set}catch(b){l=function(){}}var c;try{c=Promise}catch(b){c=function(){}}function h(b,w,g,m,y){typeof w=="object"&&(g=w.depth,m=w.prototype,y=w.includeNonEnumerable,w=w.circular);var v=[],_=[],O=typeof Buffer!="undefined";typeof w=="undefined"&&(w=!0),typeof g=="undefined"&&(g=1/0);function A(j,k){if(j===null)return null;if(k===0)return j;var S,N;if(typeof j!="object")return j;if(s(j,o))S=new o;else if(s(j,l))S=new l;else if(s(j,c))S=new c(function(M,R){j.then(function(L){M(A(L,k-1))},function(L){R(A(L,k-1))})});else if(h.__isArray(j))S=[];else if(h.__isRegExp(j))S=new RegExp(j.source,x(j)),j.lastIndex&&(S.lastIndex=j.lastIndex);else if(h.__isDate(j))S=new Date(j.getTime());else{if(O&&Buffer.isBuffer(j))return Buffer.allocUnsafe?S=Buffer.allocUnsafe(j.length):S=new Buffer(j.length),j.copy(S),S;s(j,Error)?S=Object.create(j):typeof m=="undefined"?(N=Object.getPrototypeOf(j),S=Object.create(N)):(S=Object.create(m),N=m)}if(w){var E=v.indexOf(j);if(E!=-1)return _[E];v.push(j),_.push(S)}s(j,o)&&j.forEach(function(M,R){var L=A(R,k-1),$=A(M,k-1);S.set(L,$)}),s(j,l)&&j.forEach(function(M){var R=A(M,k-1);S.add(R)});for(var T in j){var C;N&&(C=Object.getOwnPropertyDescriptor(N,T)),!(C&&C.set==null)&&(S[T]=A(j[T],k-1))}if(Object.getOwnPropertySymbols)for(var D=Object.getOwnPropertySymbols(j),T=0;T<D.length;T++){var z=D[T],V=Object.getOwnPropertyDescriptor(j,z);V&&!V.enumerable&&!y||(S[z]=A(j[z],k-1),V.enumerable||Object.defineProperty(S,z,{enumerable:!1}))}if(y)for(var G=Object.getOwnPropertyNames(j),T=0;T<G.length;T++){var U=G[T],V=Object.getOwnPropertyDescriptor(j,U);V&&V.enumerable||(S[U]=A(j[U],k-1),Object.defineProperty(S,U,{enumerable:!1}))}return S}return A(b,g)}h.clonePrototype=function(w){if(w===null)return null;var g=function(){};return g.prototype=w,new g};function p(b){return Object.prototype.toString.call(b)}h.__objToStr=p;function d(b){return typeof b=="object"&&p(b)==="[object Date]"}h.__isDate=d;function u(b){return typeof b=="object"&&p(b)==="[object Array]"}h.__isArray=u;function f(b){return typeof b=="object"&&p(b)==="[object RegExp]"}h.__isRegExp=f;function x(b){var w="";return b.global&&(w+="g"),b.ignoreCase&&(w+="i"),b.multiline&&(w+="m"),w}return h.__getRegExpFlags=x,h}();typeof r=="object"&&r.exports&&(r.exports=a)},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function S(N,E){var T=[],C=!0,D=!1,z=void 0;try{for(var V=N[Symbol.iterator](),G;!(C=(G=V.next()).done)&&(T.push(G.value),!(E&&T.length===E));C=!0);}catch(U){D=!0,z=U}finally{try{!C&&V.return&&V.return()}finally{if(D)throw z}}return T}return function(N,E){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return S(N,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function S(N,E){for(var T=0;T<E.length;T++){var C=E[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(N,C.key,C)}}return function(N,E,T){return E&&S(N.prototype,E),T&&S(N,T),N}}(),l=function S(N,E,T){N===null&&(N=Function.prototype);var C=Object.getOwnPropertyDescriptor(N,E);if(C===void 0){var D=Object.getPrototypeOf(N);return D===null?void 0:S(D,E,T)}else{if("value"in C)return C.value;var z=C.get;return z===void 0?void 0:z.call(T)}},c=a(0),h=v(c),p=a(8),d=v(p),u=a(4),f=v(u),x=a(16),b=v(x),w=a(13),g=v(w),m=a(25),y=v(m);function v(S){return S&&S.__esModule?S:{default:S}}function _(S,N){if(!(S instanceof N))throw new TypeError("Cannot call a class as a function")}function O(S,N){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:S}function A(S,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);S.prototype=Object.create(N&&N.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(S,N):S.__proto__=N)}function j(S){return S instanceof f.default||S instanceof u.BlockEmbed}var k=function(S){A(N,S);function N(E,T){_(this,N);var C=O(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,E));return C.emitter=T.emitter,Array.isArray(T.whitelist)&&(C.whitelist=T.whitelist.reduce(function(D,z){return D[z]=!0,D},{})),C.domNode.addEventListener("DOMNodeInserted",function(){}),C.optimize(),C.enable(),C}return o(N,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(T,C){var D=this.line(T),z=s(D,2),V=z[0],G=z[1],U=this.line(T+C),M=s(U,1),R=M[0];if(l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"deleteAt",this).call(this,T,C),R!=null&&V!==R&&G>0){if(V instanceof u.BlockEmbed||R instanceof u.BlockEmbed){this.optimize();return}if(V instanceof g.default){var L=V.newlineIndex(V.length(),!0);if(L>-1&&(V=V.split(L+1),V===R)){this.optimize();return}}else if(R instanceof g.default){var $=R.newlineIndex(0);$>-1&&R.split($+1)}var Q=R.children.head instanceof b.default?null:R.children.head;V.moveChildren(R,Q),V.remove()}this.optimize()}},{key:"enable",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",T)}},{key:"formatAt",value:function(T,C,D,z){this.whitelist!=null&&!this.whitelist[D]||(l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,T,C,D,z),this.optimize())}},{key:"insertAt",value:function(T,C,D){if(!(D!=null&&this.whitelist!=null&&!this.whitelist[C])){if(T>=this.length())if(D==null||h.default.query(C,h.default.Scope.BLOCK)==null){var z=h.default.create(this.statics.defaultChild);this.appendChild(z),D==null&&C.endsWith(`
`)&&(C=C.slice(0,-1)),z.insertAt(0,C,D)}else{var V=h.default.create(C,D);this.appendChild(V)}else l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,T,C,D);this.optimize()}}},{key:"insertBefore",value:function(T,C){if(T.statics.scope===h.default.Scope.INLINE_BLOT){var D=h.default.create(this.statics.defaultChild);D.appendChild(T),T=D}l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,T,C)}},{key:"leaf",value:function(T){return this.path(T).pop()||[null,-1]}},{key:"line",value:function(T){return T===this.length()?this.line(T-1):this.descendant(j,T)}},{key:"lines",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,D=function z(V,G,U){var M=[],R=U;return V.children.forEachAt(G,U,function(L,$,Q){j(L)?M.push(L):L instanceof h.default.Container&&(M=M.concat(z(L,$,R))),R-=Q}),M};return D(this,T,C)}},{key:"optimize",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,T,C),T.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,T,C))}},{key:"path",value:function(T){return l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"path",this).call(this,T).slice(1)}},{key:"update",value:function(T){if(this.batch!==!0){var C=d.default.sources.USER;typeof T=="string"&&(C=T),Array.isArray(T)||(T=this.observer.takeRecords()),T.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,C,T),l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"update",this).call(this,T.concat([])),T.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,C,T)}}}]),N}(h.default.Scroll);k.blotName="scroll",k.className="ql-editor",k.tagName="DIV",k.defaultChild="block",k.allowedChildren=[f.default,u.BlockEmbed,y.default],n.default=k},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},o=function(){function q(K,H){var J=[],Z=!0,ee=!1,ue=void 0;try{for(var oe=K[Symbol.iterator](),le;!(Z=(le=oe.next()).done)&&(J.push(le.value),!(H&&J.length===H));Z=!0);}catch(ge){ee=!0,ue=ge}finally{try{!Z&&oe.return&&oe.return()}finally{if(ee)throw ue}}return J}return function(K,H){if(Array.isArray(K))return K;if(Symbol.iterator in Object(K))return q(K,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function q(K,H){for(var J=0;J<H.length;J++){var Z=H[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(K,Z.key,Z)}}return function(K,H,J){return H&&q(K.prototype,H),J&&q(K,J),K}}(),c=a(21),h=S(c),p=a(11),d=S(p),u=a(3),f=S(u),x=a(2),b=S(x),w=a(20),g=S(w),m=a(0),y=S(m),v=a(5),_=S(v),O=a(10),A=S(O),j=a(9),k=S(j);function S(q){return q&&q.__esModule?q:{default:q}}function N(q,K,H){return K in q?Object.defineProperty(q,K,{value:H,enumerable:!0,configurable:!0,writable:!0}):q[K]=H,q}function E(q,K){if(!(q instanceof K))throw new TypeError("Cannot call a class as a function")}function T(q,K){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:q}function C(q,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);q.prototype=Object.create(K&&K.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(q,K):q.__proto__=K)}var D=(0,A.default)("quill:keyboard"),z=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",V=function(q){C(K,q),l(K,null,[{key:"match",value:function(J,Z){return Z=Y(Z),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ee){return!!Z[ee]!==J[ee]&&Z[ee]!==null})?!1:Z.key===(J.which||J.keyCode)}}]);function K(H,J){E(this,K);var Z=T(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,H,J));return Z.bindings={},Object.keys(Z.options.bindings).forEach(function(ee){ee==="list autofill"&&H.scroll.whitelist!=null&&!H.scroll.whitelist.list||Z.options.bindings[ee]&&Z.addBinding(Z.options.bindings[ee])}),Z.addBinding({key:K.keys.ENTER,shiftKey:null},L),Z.addBinding({key:K.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Z.addBinding({key:K.keys.BACKSPACE},{collapsed:!0},U),Z.addBinding({key:K.keys.DELETE},{collapsed:!0},M)):(Z.addBinding({key:K.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},U),Z.addBinding({key:K.keys.DELETE},{collapsed:!0,suffix:/^.?$/},M)),Z.addBinding({key:K.keys.BACKSPACE},{collapsed:!1},R),Z.addBinding({key:K.keys.DELETE},{collapsed:!1},R),Z.addBinding({key:K.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},U),Z.listen(),Z}return l(K,[{key:"addBinding",value:function(J){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ue=Y(J);if(ue==null||ue.key==null)return D.warn("Attempted to add invalid keyboard binding",ue);typeof Z=="function"&&(Z={handler:Z}),typeof ee=="function"&&(ee={handler:ee}),ue=(0,f.default)(ue,Z,ee),this.bindings[ue.key]=this.bindings[ue.key]||[],this.bindings[ue.key].push(ue)}},{key:"listen",value:function(){var J=this;this.quill.root.addEventListener("keydown",function(Z){if(!Z.defaultPrevented){var ee=Z.which||Z.keyCode,ue=(J.bindings[ee]||[]).filter(function(Ne){return K.match(Z,Ne)});if(ue.length!==0){var oe=J.quill.getSelection();if(!(oe==null||!J.quill.hasFocus())){var le=J.quill.getLine(oe.index),ge=o(le,2),ke=ge[0],Ae=ge[1],re=J.quill.getLeaf(oe.index),se=o(re,2),fe=se[0],F=se[1],I=oe.length===0?[fe,F]:J.quill.getLeaf(oe.index+oe.length),W=o(I,2),ae=W[0],ne=W[1],ie=fe instanceof y.default.Text?fe.value().slice(0,F):"",pe=ae instanceof y.default.Text?ae.value().slice(ne):"",ye={collapsed:oe.length===0,empty:oe.length===0&&ke.length()<=1,format:J.quill.getFormat(oe),offset:Ae,prefix:ie,suffix:pe},je=ue.some(function(Ne){if(Ne.collapsed!=null&&Ne.collapsed!==ye.collapsed||Ne.empty!=null&&Ne.empty!==ye.empty||Ne.offset!=null&&Ne.offset!==ye.offset)return!1;if(Array.isArray(Ne.format)){if(Ne.format.every(function(Ze){return ye.format[Ze]==null}))return!1}else if(s(Ne.format)==="object"&&!Object.keys(Ne.format).every(function(Ze){return Ne.format[Ze]===!0?ye.format[Ze]!=null:Ne.format[Ze]===!1?ye.format[Ze]==null:(0,d.default)(Ne.format[Ze],ye.format[Ze])}))return!1;return Ne.prefix!=null&&!Ne.prefix.test(ye.prefix)||Ne.suffix!=null&&!Ne.suffix.test(ye.suffix)?!1:Ne.handler.call(J,oe,ye)!==!0});je&&Z.preventDefault()}}}})}}]),K}(k.default);V.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},V.DEFAULTS={bindings:{bold:Q("bold"),italic:Q("italic"),underline:Q("underline"),indent:{key:V.keys.TAB,format:["blockquote","indent","list"],handler:function(K,H){if(H.collapsed&&H.offset!==0)return!0;this.quill.format("indent","+1",_.default.sources.USER)}},outdent:{key:V.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(K,H){if(H.collapsed&&H.offset!==0)return!0;this.quill.format("indent","-1",_.default.sources.USER)}},"outdent backspace":{key:V.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(K,H){H.format.indent!=null?this.quill.format("indent","-1",_.default.sources.USER):H.format.list!=null&&this.quill.format("list",!1,_.default.sources.USER)}},"indent code-block":$(!0),"outdent code-block":$(!1),"remove tab":{key:V.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(K){this.quill.deleteText(K.index-1,1,_.default.sources.USER)}},tab:{key:V.keys.TAB,handler:function(K){this.quill.history.cutoff();var H=new b.default().retain(K.index).delete(K.length).insert("	");this.quill.updateContents(H,_.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(K.index+1,_.default.sources.SILENT)}},"list empty enter":{key:V.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(K,H){this.quill.format("list",!1,_.default.sources.USER),H.format.indent&&this.quill.format("indent",!1,_.default.sources.USER)}},"checklist enter":{key:V.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(K){var H=this.quill.getLine(K.index),J=o(H,2),Z=J[0],ee=J[1],ue=(0,f.default)({},Z.formats(),{list:"checked"}),oe=new b.default().retain(K.index).insert(`
`,ue).retain(Z.length()-ee-1).retain(1,{list:"unchecked"});this.quill.updateContents(oe,_.default.sources.USER),this.quill.setSelection(K.index+1,_.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:V.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(K,H){var J=this.quill.getLine(K.index),Z=o(J,2),ee=Z[0],ue=Z[1],oe=new b.default().retain(K.index).insert(`
`,H.format).retain(ee.length()-ue-1).retain(1,{header:null});this.quill.updateContents(oe,_.default.sources.USER),this.quill.setSelection(K.index+1,_.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(K,H){var J=H.prefix.length,Z=this.quill.getLine(K.index),ee=o(Z,2),ue=ee[0],oe=ee[1];if(oe>J)return!0;var le=void 0;switch(H.prefix.trim()){case"[]":case"[ ]":le="unchecked";break;case"[x]":le="checked";break;case"-":case"*":le="bullet";break;default:le="ordered"}this.quill.insertText(K.index," ",_.default.sources.USER),this.quill.history.cutoff();var ge=new b.default().retain(K.index-oe).delete(J+1).retain(ue.length()-2-oe).retain(1,{list:le});this.quill.updateContents(ge,_.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(K.index-J,_.default.sources.SILENT)}},"code exit":{key:V.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(K){var H=this.quill.getLine(K.index),J=o(H,2),Z=J[0],ee=J[1],ue=new b.default().retain(K.index+Z.length()-ee-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ue,_.default.sources.USER)}},"embed left":G(V.keys.LEFT,!1),"embed left shift":G(V.keys.LEFT,!0),"embed right":G(V.keys.RIGHT,!1),"embed right shift":G(V.keys.RIGHT,!0)}};function G(q,K){var H,J=q===V.keys.LEFT?"prefix":"suffix";return H={key:q,shiftKey:K,altKey:null},N(H,J,/^$/),N(H,"handler",function(ee){var ue=ee.index;q===V.keys.RIGHT&&(ue+=ee.length+1);var oe=this.quill.getLeaf(ue),le=o(oe,1),ge=le[0];return ge instanceof y.default.Embed?(q===V.keys.LEFT?K?this.quill.setSelection(ee.index-1,ee.length+1,_.default.sources.USER):this.quill.setSelection(ee.index-1,_.default.sources.USER):K?this.quill.setSelection(ee.index,ee.length+1,_.default.sources.USER):this.quill.setSelection(ee.index+ee.length+1,_.default.sources.USER),!1):!0}),H}function U(q,K){if(!(q.index===0||this.quill.getLength()<=1)){var H=this.quill.getLine(q.index),J=o(H,1),Z=J[0],ee={};if(K.offset===0){var ue=this.quill.getLine(q.index-1),oe=o(ue,1),le=oe[0];if(le!=null&&le.length()>1){var ge=Z.formats(),ke=this.quill.getFormat(q.index-1,1);ee=g.default.attributes.diff(ge,ke)||{}}}var Ae=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(K.prefix)?2:1;this.quill.deleteText(q.index-Ae,Ae,_.default.sources.USER),Object.keys(ee).length>0&&this.quill.formatLine(q.index-Ae,Ae,ee,_.default.sources.USER),this.quill.focus()}}function M(q,K){var H=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(K.suffix)?2:1;if(!(q.index>=this.quill.getLength()-H)){var J={},Z=0,ee=this.quill.getLine(q.index),ue=o(ee,1),oe=ue[0];if(K.offset>=oe.length()-1){var le=this.quill.getLine(q.index+1),ge=o(le,1),ke=ge[0];if(ke){var Ae=oe.formats(),re=this.quill.getFormat(q.index,1);J=g.default.attributes.diff(Ae,re)||{},Z=ke.length()}}this.quill.deleteText(q.index,H,_.default.sources.USER),Object.keys(J).length>0&&this.quill.formatLine(q.index+Z-1,H,J,_.default.sources.USER)}}function R(q){var K=this.quill.getLines(q),H={};if(K.length>1){var J=K[0].formats(),Z=K[K.length-1].formats();H=g.default.attributes.diff(Z,J)||{}}this.quill.deleteText(q,_.default.sources.USER),Object.keys(H).length>0&&this.quill.formatLine(q.index,1,H,_.default.sources.USER),this.quill.setSelection(q.index,_.default.sources.SILENT),this.quill.focus()}function L(q,K){var H=this;q.length>0&&this.quill.scroll.deleteAt(q.index,q.length);var J=Object.keys(K.format).reduce(function(Z,ee){return y.default.query(ee,y.default.Scope.BLOCK)&&!Array.isArray(K.format[ee])&&(Z[ee]=K.format[ee]),Z},{});this.quill.insertText(q.index,`
`,J,_.default.sources.USER),this.quill.setSelection(q.index+1,_.default.sources.SILENT),this.quill.focus(),Object.keys(K.format).forEach(function(Z){J[Z]==null&&(Array.isArray(K.format[Z])||Z!=="link"&&H.quill.format(Z,K.format[Z],_.default.sources.USER))})}function $(q){return{key:V.keys.TAB,shiftKey:!q,format:{"code-block":!0},handler:function(H){var J=y.default.query("code-block"),Z=H.index,ee=H.length,ue=this.quill.scroll.descendant(J,Z),oe=o(ue,2),le=oe[0],ge=oe[1];if(le!=null){var ke=this.quill.getIndex(le),Ae=le.newlineIndex(ge,!0)+1,re=le.newlineIndex(ke+ge+ee),se=le.domNode.textContent.slice(Ae,re).split(`
`);ge=0,se.forEach(function(fe,F){q?(le.insertAt(Ae+ge,J.TAB),ge+=J.TAB.length,F===0?Z+=J.TAB.length:ee+=J.TAB.length):fe.startsWith(J.TAB)&&(le.deleteAt(Ae+ge,J.TAB.length),ge-=J.TAB.length,F===0?Z-=J.TAB.length:ee-=J.TAB.length),ge+=fe.length+1}),this.quill.update(_.default.sources.USER),this.quill.setSelection(Z,ee,_.default.sources.SILENT)}}}}function Q(q){return{key:q[0].toUpperCase(),shortKey:!0,handler:function(H,J){this.quill.format(q,!J.format[q],_.default.sources.USER)}}}function Y(q){if(typeof q=="string"||typeof q=="number")return Y({key:q});if((typeof q=="undefined"?"undefined":s(q))==="object"&&(q=(0,h.default)(q,!1)),typeof q.key=="string")if(V.keys[q.key.toUpperCase()]!=null)q.key=V.keys[q.key.toUpperCase()];else if(q.key.length===1)q.key=q.key.toUpperCase().charCodeAt(0);else return null;return q.shortKey&&(q[z]=q.shortKey,delete q.shortKey),q}n.default=V,n.SHORTKEY=z},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function g(m,y){var v=[],_=!0,O=!1,A=void 0;try{for(var j=m[Symbol.iterator](),k;!(_=(k=j.next()).done)&&(v.push(k.value),!(y&&v.length===y));_=!0);}catch(S){O=!0,A=S}finally{try{!_&&j.return&&j.return()}finally{if(O)throw A}}return v}return function(m,y){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return g(m,y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function g(m,y,v){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,y);if(_===void 0){var O=Object.getPrototypeOf(m);return O===null?void 0:g(O,y,v)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(v)}},l=function(){function g(m,y){for(var v=0;v<y.length;v++){var _=y[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,y,v){return y&&g(m.prototype,y),v&&g(m,v),m}}(),c=a(0),h=u(c),p=a(7),d=u(p);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function x(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function b(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var w=function(g){b(m,g),l(m,null,[{key:"value",value:function(){}}]);function m(y,v){f(this,m);var _=x(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,y));return _.selection=v,_.textNode=document.createTextNode(m.CONTENTS),_.domNode.appendChild(_.textNode),_._length=0,_}return l(m,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(v,_){if(this._length!==0)return o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,v,_);for(var O=this,A=0;O!=null&&O.statics.scope!==h.default.Scope.BLOCK_BLOT;)A+=O.offset(O.parent),O=O.parent;O!=null&&(this._length=m.CONTENTS.length,O.optimize(),O.formatAt(A,m.CONTENTS.length,v,_),this._length=0)}},{key:"index",value:function(v,_){return v===this.textNode?0:o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,v,_)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var v=this.textNode,_=this.selection.getNativeRange(),O=void 0,A=void 0,j=void 0;if(_!=null&&_.start.node===v&&_.end.node===v){var k=[v,_.start.offset,_.end.offset];O=k[0],A=k[1],j=k[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==m.CONTENTS){var S=this.textNode.data.split(m.CONTENTS).join("");this.next instanceof d.default?(O=this.next.domNode,this.next.insertAt(0,S),this.textNode.data=m.CONTENTS):(this.textNode.data=S,this.parent.insertBefore(h.default.create(this.textNode),this),this.textNode=document.createTextNode(m.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var N=[A,j].map(function(T){return Math.max(0,Math.min(O.data.length,T-1))}),E=s(N,2);return A=E[0],j=E[1],{startNode:O,startOffset:A,endNode:O,endOffset:j}}}}},{key:"update",value:function(v,_){var O=this;if(v.some(function(j){return j.type==="characterData"&&j.target===O.textNode})){var A=this.restore();A&&(_.range=A)}}},{key:"value",value:function(){return""}}]),m}(h.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",n.default=w},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(0),o=h(s),l=a(4),c=h(l);function h(x){return x&&x.__esModule?x:{default:x}}function p(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function d(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function u(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var f=function(x){u(b,x);function b(){return p(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b}(o.default.Container);f.allowedChildren=[c.default,l.BlockEmbed,f],n.default=f},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var s=function(){function w(g,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,m,y){return m&&w(g.prototype,m),y&&w(g,y),g}}(),o=function w(g,m,y){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,m);if(v===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:w(_,m,y)}else{if("value"in v)return v.value;var O=v.get;return O===void 0?void 0:O.call(y)}},l=a(0),c=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function p(w,g){if(!(w instanceof g))throw new TypeError("Cannot call a class as a function")}function d(w,g){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:w}function u(w,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);w.prototype=Object.create(g&&g.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(w,g):w.__proto__=g)}var f=function(w){u(g,w);function g(){return p(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"value",value:function(y){var v=o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,y);return v.startsWith("rgb(")?(v=v.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+v.split(",").map(function(_){return("00"+parseInt(_).toString(16)).slice(-2)}).join("")):v}}]),g}(c.default.Attributor.Style),x=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),b=new f("color","color",{scope:c.default.Scope.INLINE});n.ColorAttributor=f,n.ColorClass=x,n.ColorStyle=b},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var s=function(){function b(w,g){for(var m=0;m<g.length;m++){var y=g[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(w,y.key,y)}}return function(w,g,m){return g&&b(w.prototype,g),m&&b(w,m),w}}(),o=function b(w,g,m){w===null&&(w=Function.prototype);var y=Object.getOwnPropertyDescriptor(w,g);if(y===void 0){var v=Object.getPrototypeOf(w);return v===null?void 0:b(v,g,m)}else{if("value"in y)return y.value;var _=y.get;return _===void 0?void 0:_.call(m)}},l=a(6),c=h(l);function h(b){return b&&b.__esModule?b:{default:b}}function p(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function d(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function u(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var f=function(b){u(w,b);function w(){return p(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"format",value:function(m,y){if(m!==this.statics.blotName||!y)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,m,y);y=this.constructor.sanitize(y),this.domNode.setAttribute("href",y)}}],[{key:"create",value:function(m){var y=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,m);return m=this.sanitize(m),y.setAttribute("href",m),y.setAttribute("rel","noopener noreferrer"),y.setAttribute("target","_blank"),y}},{key:"formats",value:function(m){return m.getAttribute("href")}},{key:"sanitize",value:function(m){return x(m,this.PROTOCOL_WHITELIST)?m:this.SANITIZED_URL}}]),w}(c.default);f.blotName="link",f.tagName="A",f.SANITIZED_URL="about:blank",f.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function x(b,w){var g=document.createElement("a");g.href=b;var m=g.href.slice(0,g.href.indexOf(":"));return w.indexOf(m)>-1}n.default=f,n.sanitize=x},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},o=function(){function w(g,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,m,y){return m&&w(g.prototype,m),y&&w(g,y),g}}(),l=a(23),c=d(l),h=a(107),p=d(h);function d(w){return w&&w.__esModule?w:{default:w}}function u(w,g){if(!(w instanceof g))throw new TypeError("Cannot call a class as a function")}var f=0;function x(w,g){w.setAttribute(g,w.getAttribute(g)!=="true")}var b=function(){function w(g){var m=this;u(this,w),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){m.togglePicker()}),this.label.addEventListener("keydown",function(y){switch(y.keyCode){case c.default.keys.ENTER:m.togglePicker();break;case c.default.keys.ESCAPE:m.escape(),y.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),x(this.label,"aria-expanded"),x(this.options,"aria-hidden")}},{key:"buildItem",value:function(m){var y=this,v=document.createElement("span");return v.tabIndex="0",v.setAttribute("role","button"),v.classList.add("ql-picker-item"),m.hasAttribute("value")&&v.setAttribute("data-value",m.getAttribute("value")),m.textContent&&v.setAttribute("data-label",m.textContent),v.addEventListener("click",function(){y.selectItem(v,!0)}),v.addEventListener("keydown",function(_){switch(_.keyCode){case c.default.keys.ENTER:y.selectItem(v,!0),_.preventDefault();break;case c.default.keys.ESCAPE:y.escape(),_.preventDefault();break}}),v}},{key:"buildLabel",value:function(){var m=document.createElement("span");return m.classList.add("ql-picker-label"),m.innerHTML=p.default,m.tabIndex="0",m.setAttribute("role","button"),m.setAttribute("aria-expanded","false"),this.container.appendChild(m),m}},{key:"buildOptions",value:function(){var m=this,y=document.createElement("span");y.classList.add("ql-picker-options"),y.setAttribute("aria-hidden","true"),y.tabIndex="-1",y.id="ql-picker-options-"+f,f+=1,this.label.setAttribute("aria-controls",y.id),this.options=y,[].slice.call(this.select.options).forEach(function(v){var _=m.buildItem(v);y.appendChild(_),v.selected===!0&&m.selectItem(_)}),this.container.appendChild(y)}},{key:"buildPicker",value:function(){var m=this;[].slice.call(this.select.attributes).forEach(function(y){m.container.setAttribute(y.name,y.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var m=this;this.close(),setTimeout(function(){return m.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(m){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=this.container.querySelector(".ql-selected");if(m!==v&&(v!=null&&v.classList.remove("ql-selected"),m!=null&&(m.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(m.parentNode.children,m),m.hasAttribute("data-value")?this.label.setAttribute("data-value",m.getAttribute("data-value")):this.label.removeAttribute("data-value"),m.hasAttribute("data-label")?this.label.setAttribute("data-label",m.getAttribute("data-label")):this.label.removeAttribute("data-label"),y))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event=="undefined"?"undefined":s(Event))==="object"){var _=document.createEvent("Event");_.initEvent("change",!0,!0),this.select.dispatchEvent(_)}this.close()}}},{key:"update",value:function(){var m=void 0;if(this.select.selectedIndex>-1){var y=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];m=this.select.options[this.select.selectedIndex],this.selectItem(y)}else this.selectItem(null);var v=m!=null&&m!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",v)}}]),w}();n.default=b},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(0),o=D(s),l=a(5),c=D(l),h=a(4),p=D(h),d=a(16),u=D(d),f=a(25),x=D(f),b=a(24),w=D(b),g=a(35),m=D(g),y=a(6),v=D(y),_=a(22),O=D(_),A=a(7),j=D(A),k=a(55),S=D(k),N=a(42),E=D(N),T=a(23),C=D(T);function D(z){return z&&z.__esModule?z:{default:z}}c.default.register({"blots/block":p.default,"blots/block/embed":h.BlockEmbed,"blots/break":u.default,"blots/container":x.default,"blots/cursor":w.default,"blots/embed":m.default,"blots/inline":v.default,"blots/scroll":O.default,"blots/text":j.default,"modules/clipboard":S.default,"modules/history":E.default,"modules/keyboard":C.default}),o.default.register(p.default,u.default,w.default,v.default,O.default,j.default),n.default=c.default},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(1),o=function(){function l(c){this.domNode=c,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(c){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var h;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?h=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?h=document.createElement(c):h=document.createElement(this.tagName[0])):h=document.createElement(this.tagName),this.className&&h.classList.add(this.className),h},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return s.create(c)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},l.prototype.deleteAt=function(c,h){var p=this.isolate(c,h);p.remove()},l.prototype.formatAt=function(c,h,p,d){var u=this.isolate(c,h);if(s.query(p,s.Scope.BLOT)!=null&&d)u.wrap(p,d);else if(s.query(p,s.Scope.ATTRIBUTE)!=null){var f=s.create(this.statics.scope);u.wrap(f),f.format(p,d)}},l.prototype.insertAt=function(c,h,p){var d=p==null?s.create("text",h):s.create(h,p),u=this.split(c);this.parent.insertBefore(d,u)},l.prototype.insertInto=function(c,h){h===void 0&&(h=null),this.parent!=null&&this.parent.children.remove(this);var p=null;c.children.insertBefore(this,h),h!=null&&(p=h.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=p)&&c.domNode.insertBefore(this.domNode,p),this.parent=c,this.attach()},l.prototype.isolate=function(c,h){var p=this.split(c);return p.split(h),p},l.prototype.length=function(){return 1},l.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},l.prototype.optimize=function(c){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},l.prototype.replaceWith=function(c,h){var p=typeof c=="string"?s.create(c,h):c;return p.replace(this),p},l.prototype.split=function(c,h){return c===0?this:this.next},l.prototype.update=function(c,h){},l.prototype.wrap=function(c,h){var p=typeof c=="string"?s.create(c,h):c;return this.parent!=null&&this.parent.insertBefore(p,this.next),p.appendChild(this),p},l.blotName="abstract",l}();n.default=o},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(12),o=a(32),l=a(33),c=a(1),h=function(){function p(d){this.attributes={},this.domNode=d,this.build()}return p.prototype.attribute=function(d,u){u?d.add(this.domNode,u)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},p.prototype.build=function(){var d=this;this.attributes={};var u=s.default.keys(this.domNode),f=o.default.keys(this.domNode),x=l.default.keys(this.domNode);u.concat(f).concat(x).forEach(function(b){var w=c.query(b,c.Scope.ATTRIBUTE);w instanceof s.default&&(d.attributes[w.attrName]=w)})},p.prototype.copy=function(d){var u=this;Object.keys(this.attributes).forEach(function(f){var x=u.attributes[f].value(u.domNode);d.format(f,x)})},p.prototype.move=function(d){var u=this;this.copy(d),Object.keys(this.attributes).forEach(function(f){u.attributes[f].remove(u.domNode)}),this.attributes={}},p.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(u,f){return u[f]=d.attributes[f].value(d.domNode),u},{})},p}();n.default=h},function(r,n,a){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var u in d)d.hasOwnProperty(u)&&(p[u]=d[u])};return function(p,d){h(p,d);function u(){this.constructor=p}p.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(12);function l(h,p){var d=h.getAttribute("class")||"";return d.split(/\s+/).filter(function(u){return u.indexOf(p+"-")===0})}var c=function(h){s(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},p.prototype.add=function(d,u){return this.canAdd(d,u)?(this.remove(d),d.classList.add(this.keyName+"-"+u),!0):!1},p.prototype.remove=function(d){var u=l(d,this.keyName);u.forEach(function(f){d.classList.remove(f)}),d.classList.length===0&&d.removeAttribute("class")},p.prototype.value=function(d){var u=l(d,this.keyName)[0]||"",f=u.slice(this.keyName.length+1);return this.canAdd(d,f)?f:""},p}(o.default);n.default=c},function(r,n,a){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var u in d)d.hasOwnProperty(u)&&(p[u]=d[u])};return function(p,d){h(p,d);function u(){this.constructor=p}p.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(12);function l(h){var p=h.split("-"),d=p.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return p[0]+d}var c=function(h){s(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(u){var f=u.split(":");return f[0].trim()})},p.prototype.add=function(d,u){return this.canAdd(d,u)?(d.style[l(this.keyName)]=u,!0):!1},p.prototype.remove=function(d){d.style[l(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},p.prototype.value=function(d){var u=d.style[l(this.keyName)];return this.canAdd(d,u)?u:""},p}(o.default);n.default=c},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function c(h,p){for(var d=0;d<p.length;d++){var u=p[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(h,u.key,u)}}return function(h,p,d){return p&&c(h.prototype,p),d&&c(h,d),h}}();function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function(){function c(h,p){o(this,c),this.quill=h,this.options=p,this.modules={}}return s(c,[{key:"init",value:function(){var p=this;Object.keys(this.options.modules).forEach(function(d){p.modules[d]==null&&p.addModule(d)})}},{key:"addModule",value:function(p){var d=this.quill.constructor.import("modules/"+p);return this.modules[p]=new d(this.quill,this.options.modules[p]||{}),this.modules[p]}}]),c}();l.DEFAULTS={modules:{}},l.themes={default:l},n.default=l},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function g(m,y){for(var v=0;v<y.length;v++){var _=y[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,y,v){return y&&g(m.prototype,y),v&&g(m,v),m}}(),o=function g(m,y,v){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,y);if(_===void 0){var O=Object.getPrototypeOf(m);return O===null?void 0:g(O,y,v)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(v)}},l=a(0),c=d(l),h=a(7),p=d(h);function d(g){return g&&g.__esModule?g:{default:g}}function u(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function f(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function x(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var b="\uFEFF",w=function(g){x(m,g);function m(y){u(this,m);var v=f(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,y));return v.contentNode=document.createElement("span"),v.contentNode.setAttribute("contenteditable",!1),[].slice.call(v.domNode.childNodes).forEach(function(_){v.contentNode.appendChild(_)}),v.leftGuard=document.createTextNode(b),v.rightGuard=document.createTextNode(b),v.domNode.appendChild(v.leftGuard),v.domNode.appendChild(v.contentNode),v.domNode.appendChild(v.rightGuard),v}return s(m,[{key:"index",value:function(v,_){return v===this.leftGuard?0:v===this.rightGuard?1:o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,v,_)}},{key:"restore",value:function(v){var _=void 0,O=void 0,A=v.data.split(b).join("");if(v===this.leftGuard)if(this.prev instanceof p.default){var j=this.prev.length();this.prev.insertAt(j,A),_={startNode:this.prev.domNode,startOffset:j+A.length}}else O=document.createTextNode(A),this.parent.insertBefore(c.default.create(O),this),_={startNode:O,startOffset:A.length};else v===this.rightGuard&&(this.next instanceof p.default?(this.next.insertAt(0,A),_={startNode:this.next.domNode,startOffset:A.length}):(O=document.createTextNode(A),this.parent.insertBefore(c.default.create(O),this.next),_={startNode:O,startOffset:A.length}));return v.data=b,_}},{key:"update",value:function(v,_){var O=this;v.forEach(function(A){if(A.type==="characterData"&&(A.target===O.leftGuard||A.target===O.rightGuard)){var j=O.restore(A.target);j&&(_.range=j)}})}}]),m}(c.default.Embed);n.default=w},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var s=a(0),o=l(s);function l(u){return u&&u.__esModule?u:{default:u}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},h=new o.default.Attributor.Attribute("align","align",c),p=new o.default.Attributor.Class("align","ql-align",c),d=new o.default.Attributor.Style("align","text-align",c);n.AlignAttribute=h,n.AlignClass=p,n.AlignStyle=d},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var s=a(0),o=c(s),l=a(26);function c(d){return d&&d.__esModule?d:{default:d}}var h=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),p=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=h,n.BackgroundStyle=p},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var s=a(0),o=l(s);function l(u){return u&&u.__esModule?u:{default:u}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},h=new o.default.Attributor.Attribute("direction","dir",c),p=new o.default.Attributor.Class("direction","ql-direction",c),d=new o.default.Attributor.Style("direction","direction",c);n.DirectionAttribute=h,n.DirectionClass=p,n.DirectionStyle=d},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var s=function(){function g(m,y){for(var v=0;v<y.length;v++){var _=y[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,y,v){return y&&g(m.prototype,y),v&&g(m,v),m}}(),o=function g(m,y,v){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,y);if(_===void 0){var O=Object.getPrototypeOf(m);return O===null?void 0:g(O,y,v)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(v)}},l=a(0),c=h(l);function h(g){return g&&g.__esModule?g:{default:g}}function p(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function d(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function u(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var f={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},x=new c.default.Attributor.Class("font","ql-font",f),b=function(g){u(m,g);function m(){return p(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"value",value:function(v){return o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,v).replace(/["']/g,"")}}]),m}(c.default.Attributor.Style),w=new b("font","font-family",f);n.FontStyle=w,n.FontClass=x},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var s=a(0),o=l(s);function l(p){return p&&p.__esModule?p:{default:p}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),h=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=c,n.SizeStyle=h},function(r,n,a){r.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var s=function(){function y(v,_){for(var O=0;O<_.length;O++){var A=_[O];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}return function(v,_,O){return _&&y(v.prototype,_),O&&y(v,O),v}}(),o=a(0),l=u(o),c=a(5),h=u(c),p=a(9),d=u(p);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function x(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function b(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var w=function(y){b(v,y);function v(_,O){f(this,v);var A=x(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,_,O));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(h.default.events.EDITOR_CHANGE,function(j,k,S,N){j!==h.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||N===h.default.sources.USER?A.record(k,S):A.transform(k))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return s(v,[{key:"change",value:function(O,A){if(this.stack[O].length!==0){var j=this.stack[O].pop();this.stack[A].push(j),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(j[O],h.default.sources.USER),this.ignoreChange=!1;var k=m(j[O]);this.quill.setSelection(k)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(O,A){if(O.ops.length!==0){this.stack.redo=[];var j=this.quill.getContents().diff(A),k=Date.now();if(this.lastRecorded+this.options.delay>k&&this.stack.undo.length>0){var S=this.stack.undo.pop();j=j.compose(S.undo),O=S.redo.compose(O)}else this.lastRecorded=k;this.stack.undo.push({redo:O,undo:j}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(O){this.stack.undo.forEach(function(A){A.undo=O.transform(A.undo,!0),A.redo=O.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=O.transform(A.undo,!0),A.redo=O.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),v}(d.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(y){var v=y.ops[y.ops.length-1];return v==null?!1:v.insert!=null?typeof v.insert=="string"&&v.insert.endsWith(`
`):v.attributes!=null?Object.keys(v.attributes).some(function(_){return l.default.query(_,l.default.Scope.BLOCK)!=null}):!1}function m(y){var v=y.reduce(function(O,A){return O+=A.delete||0,O},0),_=y.length()-v;return g(y)&&(_-=1),_}n.default=w,n.getLastChangeIndex=m},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var s=function(){function L($,Q){for(var Y=0;Y<Q.length;Y++){var q=Q[Y];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty($,q.key,q)}}return function($,Q,Y){return Q&&L($.prototype,Q),Y&&L($,Y),$}}(),o=function L($,Q,Y){$===null&&($=Function.prototype);var q=Object.getOwnPropertyDescriptor($,Q);if(q===void 0){var K=Object.getPrototypeOf($);return K===null?void 0:L(K,Q,Y)}else{if("value"in q)return q.value;var H=q.get;return H===void 0?void 0:H.call(Y)}},l=a(3),c=k(l),h=a(2),p=k(h),d=a(8),u=k(d),f=a(23),x=k(f),b=a(34),w=k(b),g=a(59),m=k(g),y=a(60),v=k(y),_=a(28),O=k(_),A=a(61),j=k(A);function k(L){return L&&L.__esModule?L:{default:L}}function S(L,$){if(!(L instanceof $))throw new TypeError("Cannot call a class as a function")}function N(L,$){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:L}function E(L,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);L.prototype=Object.create($&&$.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(L,$):L.__proto__=$)}var T=[!1,"center","right","justify"],C=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],D=[!1,"serif","monospace"],z=["1","2","3",!1],V=["small",!1,"large","huge"],G=function(L){E($,L);function $(Q,Y){S(this,$);var q=N(this,($.__proto__||Object.getPrototypeOf($)).call(this,Q,Y)),K=function H(J){if(!document.body.contains(Q.root))return document.body.removeEventListener("click",H);q.tooltip!=null&&!q.tooltip.root.contains(J.target)&&document.activeElement!==q.tooltip.textbox&&!q.quill.hasFocus()&&q.tooltip.hide(),q.pickers!=null&&q.pickers.forEach(function(Z){Z.container.contains(J.target)||Z.close()})};return Q.emitter.listenDOM("click",document.body,K),q}return s($,[{key:"addModule",value:function(Y){var q=o($.prototype.__proto__||Object.getPrototypeOf($.prototype),"addModule",this).call(this,Y);return Y==="toolbar"&&this.extendToolbar(q),q}},{key:"buildButtons",value:function(Y,q){Y.forEach(function(K){var H=K.getAttribute("class")||"";H.split(/\s+/).forEach(function(J){if(J.startsWith("ql-")&&(J=J.slice(3),q[J]!=null))if(J==="direction")K.innerHTML=q[J][""]+q[J].rtl;else if(typeof q[J]=="string")K.innerHTML=q[J];else{var Z=K.value||"";Z!=null&&q[J][Z]&&(K.innerHTML=q[J][Z])}})})}},{key:"buildPickers",value:function(Y,q){var K=this;this.pickers=Y.map(function(J){if(J.classList.contains("ql-align"))return J.querySelector("option")==null&&R(J,T),new v.default(J,q.align);if(J.classList.contains("ql-background")||J.classList.contains("ql-color")){var Z=J.classList.contains("ql-background")?"background":"color";return J.querySelector("option")==null&&R(J,C,Z==="background"?"#ffffff":"#000000"),new m.default(J,q[Z])}else return J.querySelector("option")==null&&(J.classList.contains("ql-font")?R(J,D):J.classList.contains("ql-header")?R(J,z):J.classList.contains("ql-size")&&R(J,V)),new O.default(J)});var H=function(){K.pickers.forEach(function(Z){Z.update()})};this.quill.on(u.default.events.EDITOR_CHANGE,H)}}]),$}(w.default);G.DEFAULTS=(0,c.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var $=this,Q=this.container.querySelector("input.ql-image[type=file]");Q==null&&(Q=document.createElement("input"),Q.setAttribute("type","file"),Q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Q.classList.add("ql-image"),Q.addEventListener("change",function(){if(Q.files!=null&&Q.files[0]!=null){var Y=new FileReader;Y.onload=function(q){var K=$.quill.getSelection(!0);$.quill.updateContents(new p.default().retain(K.index).delete(K.length).insert({image:q.target.result}),u.default.sources.USER),$.quill.setSelection(K.index+1,u.default.sources.SILENT),Q.value=""},Y.readAsDataURL(Q.files[0])}}),this.container.appendChild(Q)),Q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var U=function(L){E($,L);function $(Q,Y){S(this,$);var q=N(this,($.__proto__||Object.getPrototypeOf($)).call(this,Q,Y));return q.textbox=q.root.querySelector('input[type="text"]'),q.listen(),q}return s($,[{key:"listen",value:function(){var Y=this;this.textbox.addEventListener("keydown",function(q){x.default.match(q,"enter")?(Y.save(),q.preventDefault()):x.default.match(q,"escape")&&(Y.cancel(),q.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),q!=null?this.textbox.value=q:Y!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Y)||""),this.root.setAttribute("data-mode",Y)}},{key:"restoreFocus",value:function(){var Y=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Y}},{key:"save",value:function(){var Y=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var q=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Y,u.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Y,u.default.sources.USER)),this.quill.root.scrollTop=q;break}case"video":Y=M(Y);case"formula":{if(!Y)break;var K=this.quill.getSelection(!0);if(K!=null){var H=K.index+K.length;this.quill.insertEmbed(H,this.root.getAttribute("data-mode"),Y,u.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(H+1," ",u.default.sources.USER),this.quill.setSelection(H+2,u.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),$}(j.default);function M(L){var $=L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return $?($[1]||"https")+"://www.youtube.com/embed/"+$[2]+"?showinfo=0":($=L.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?($[1]||"https")+"://player.vimeo.com/video/"+$[2]+"/":L}function R(L,$){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;$.forEach(function(Y){var q=document.createElement("option");Y===Q?q.setAttribute("selected","selected"):q.setAttribute("value",Y),L.appendChild(q)})}n.BaseTooltip=U,n.default=G},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var c,h=this.iterator();c=h();)if(c===l)return!0;return!1},o.prototype.insertBefore=function(l,c){l&&(l.next=c,c!=null?(l.prev=c.prev,c.prev!=null&&(c.prev.next=l),c.prev=l,c===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var c=0,h=this.head;h!=null;){if(h===l)return c;c+=h.length(),h=h.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var c=l;return l!=null&&(l=l.next),c}},o.prototype.find=function(l,c){c===void 0&&(c=!1);for(var h,p=this.iterator();h=p();){var d=h.length();if(l<d||c&&l===d&&(h.next==null||h.next.length()!==0))return[h,l];l-=d}return[null,0]},o.prototype.forEach=function(l){for(var c,h=this.iterator();c=h();)l(c)},o.prototype.forEachAt=function(l,c,h){if(!(c<=0))for(var p=this.find(l),d=p[0],u=p[1],f,x=l-u,b=this.iterator(d);(f=b())&&x<l+c;){var w=f.length();l>x?h(f,l-x,Math.min(c,x+w-l)):h(f,0,Math.min(w,l+c-x)),x+=w}},o.prototype.map=function(l){return this.reduce(function(c,h){return c.push(l(h)),c},[])},o.prototype.reduce=function(l,c){for(var h,p=this.iterator();h=p();)c=l(c,h);return c},o}();n.default=s},function(r,n,a){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var x in f)f.hasOwnProperty(x)&&(u[x]=f[x])};return function(u,f){d(u,f);function x(){this.constructor=u}u.prototype=f===null?Object.create(f):(x.prototype=f.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(17),l=a(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},h=100,p=function(d){s(u,d);function u(f){var x=d.call(this,f)||this;return x.scroll=x,x.observer=new MutationObserver(function(b){x.update(b)}),x.observer.observe(x.domNode,c),x.attach(),x}return u.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},u.prototype.deleteAt=function(f,x){this.update(),f===0&&x===this.length()?this.children.forEach(function(b){b.remove()}):d.prototype.deleteAt.call(this,f,x)},u.prototype.formatAt=function(f,x,b,w){this.update(),d.prototype.formatAt.call(this,f,x,b,w)},u.prototype.insertAt=function(f,x,b){this.update(),d.prototype.insertAt.call(this,f,x,b)},u.prototype.optimize=function(f,x){var b=this;f===void 0&&(f=[]),x===void 0&&(x={}),d.prototype.optimize.call(this,x);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)f.push(w.pop());for(var g=function(_,O){O===void 0&&(O=!0),!(_==null||_===b)&&_.domNode.parentNode!=null&&(_.domNode[l.DATA_KEY].mutations==null&&(_.domNode[l.DATA_KEY].mutations=[]),O&&g(_.parent))},m=function(_){_.domNode[l.DATA_KEY]==null||_.domNode[l.DATA_KEY].mutations==null||(_ instanceof o.default&&_.children.forEach(m),_.optimize(x))},y=f,v=0;y.length>0;v+=1){if(v>=h)throw new Error("[Parchment] Maximum optimize iterations reached");for(y.forEach(function(_){var O=l.find(_.target,!0);O!=null&&(O.domNode===_.target&&(_.type==="childList"?(g(l.find(_.previousSibling,!1)),[].forEach.call(_.addedNodes,function(A){var j=l.find(A,!1);g(j,!1),j instanceof o.default&&j.children.forEach(function(k){g(k,!1)})})):_.type==="attributes"&&g(O.prev)),g(O))}),this.children.forEach(m),y=[].slice.call(this.observer.takeRecords()),w=y.slice();w.length>0;)f.push(w.pop())}},u.prototype.update=function(f,x){var b=this;x===void 0&&(x={}),f=f||this.observer.takeRecords(),f.map(function(w){var g=l.find(w.target,!0);return g==null?null:g.domNode[l.DATA_KEY].mutations==null?(g.domNode[l.DATA_KEY].mutations=[w],g):(g.domNode[l.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===b||w.domNode[l.DATA_KEY]==null||w.update(w.domNode[l.DATA_KEY].mutations||[],x)}),this.domNode[l.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,x),this.optimize(f,x)},u.blotName="scroll",u.defaultChild="block",u.scope=l.Scope.BLOCK_BLOT,u.tagName="DIV",u}(o.default);n.default=p},function(r,n,a){var s=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var f in u)u.hasOwnProperty(f)&&(d[f]=u[f])};return function(d,u){p(d,u);function f(){this.constructor=d}d.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(18),l=a(1);function c(p,d){if(Object.keys(p).length!==Object.keys(d).length)return!1;for(var u in p)if(p[u]!==d[u])return!1;return!0}var h=function(p){s(d,p);function d(){return p!==null&&p.apply(this,arguments)||this}return d.formats=function(u){if(u.tagName!==d.tagName)return p.formats.call(this,u)},d.prototype.format=function(u,f){var x=this;u===this.statics.blotName&&!f?(this.children.forEach(function(b){b instanceof o.default||(b=b.wrap(d.blotName,!0)),x.attributes.copy(b)}),this.unwrap()):p.prototype.format.call(this,u,f)},d.prototype.formatAt=function(u,f,x,b){if(this.formats()[x]!=null||l.query(x,l.Scope.ATTRIBUTE)){var w=this.isolate(u,f);w.format(x,b)}else p.prototype.formatAt.call(this,u,f,x,b)},d.prototype.optimize=function(u){p.prototype.optimize.call(this,u);var f=this.formats();if(Object.keys(f).length===0)return this.unwrap();var x=this.next;x instanceof d&&x.prev===this&&c(f,x.formats())&&(x.moveChildren(this),x.remove())},d.blotName="inline",d.scope=l.Scope.INLINE_BLOT,d.tagName="SPAN",d}(o.default);n.default=h},function(r,n,a){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var u in d)d.hasOwnProperty(u)&&(p[u]=d[u])};return function(p,d){h(p,d);function u(){this.constructor=p}p.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(18),l=a(1),c=function(h){s(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.formats=function(d){var u=l.query(p.blotName).tagName;if(d.tagName!==u)return h.formats.call(this,d)},p.prototype.format=function(d,u){l.query(d,l.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!u?this.replaceWith(p.blotName):h.prototype.format.call(this,d,u))},p.prototype.formatAt=function(d,u,f,x){l.query(f,l.Scope.BLOCK)!=null?this.format(f,x):h.prototype.formatAt.call(this,d,u,f,x)},p.prototype.insertAt=function(d,u,f){if(f==null||l.query(u,l.Scope.INLINE)!=null)h.prototype.insertAt.call(this,d,u,f);else{var x=this.split(d),b=l.create(u,f);x.parent.insertBefore(b,x)}},p.prototype.update=function(d,u){navigator.userAgent.match(/Trident/)?this.build():h.prototype.update.call(this,d,u)},p.blotName="block",p.scope=l.Scope.BLOCK_BLOT,p.tagName="P",p}(o.default);n.default=c},function(r,n,a){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])};return function(h,p){c(h,p);function d(){this.constructor=h}h.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(19),l=function(c){s(h,c);function h(){return c!==null&&c.apply(this,arguments)||this}return h.formats=function(p){},h.prototype.format=function(p,d){c.prototype.formatAt.call(this,0,this.length(),p,d)},h.prototype.formatAt=function(p,d,u,f){p===0&&d===this.length()?this.format(u,f):c.prototype.formatAt.call(this,p,d,u,f)},h.prototype.formats=function(){return this.statics.formats(this.domNode)},h}(o.default);n.default=l},function(r,n,a){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var u in d)d.hasOwnProperty(u)&&(p[u]=d[u])};return function(p,d){h(p,d);function u(){this.constructor=p}p.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=a(19),l=a(1),c=function(h){s(p,h);function p(d){var u=h.call(this,d)||this;return u.text=u.statics.value(u.domNode),u}return p.create=function(d){return document.createTextNode(d)},p.value=function(d){var u=d.data;return u.normalize&&(u=u.normalize()),u},p.prototype.deleteAt=function(d,u){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+u)},p.prototype.index=function(d,u){return this.domNode===d?u:-1},p.prototype.insertAt=function(d,u,f){f==null?(this.text=this.text.slice(0,d)+u+this.text.slice(d),this.domNode.data=this.text):h.prototype.insertAt.call(this,d,u,f)},p.prototype.length=function(){return this.text.length},p.prototype.optimize=function(d){h.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof p&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},p.prototype.position=function(d,u){return[this.domNode,d]},p.prototype.split=function(d,u){if(u===void 0&&(u=!1),!u){if(d===0)return this;if(d===this.length())return this.next}var f=l.create(this.domNode.splitText(d));return this.parent.insertBefore(f,this.next),this.text=this.statics.value(this.domNode),f},p.prototype.update=function(d,u){var f=this;d.some(function(x){return x.type==="characterData"&&x.target===f.domNode})&&(this.text=this.statics.value(this.domNode))},p.prototype.value=function(){return this.text},p.blotName="text",p.scope=l.Scope.INLINE_BLOT,p}(o.default);n.default=c},function(r,n,a){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,c){return arguments.length>1&&!this.contains(l)==!c?c:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,c){return c=c||0,this.substr(c,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,c){var h=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>h.length)&&(c=h.length),c-=l.length;var p=h.indexOf(l,c);return p!==-1&&p===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var h=Object(this),p=h.length>>>0,d=arguments[1],u,f=0;f<p;f++)if(u=h[f],c.call(d,u,f,h))return u}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var a=-1,s=1,o=0;function l(v,_,O){if(v==_)return v?[[o,v]]:[];(O<0||v.length<O)&&(O=null);var A=d(v,_),j=v.substring(0,A);v=v.substring(A),_=_.substring(A),A=u(v,_);var k=v.substring(v.length-A);v=v.substring(0,v.length-A),_=_.substring(0,_.length-A);var S=c(v,_);return j&&S.unshift([o,j]),k&&S.push([o,k]),x(S),O!=null&&(S=g(S,O)),S=m(S),S}function c(v,_){var O;if(!v)return[[s,_]];if(!_)return[[a,v]];var A=v.length>_.length?v:_,j=v.length>_.length?_:v,k=A.indexOf(j);if(k!=-1)return O=[[s,A.substring(0,k)],[o,j],[s,A.substring(k+j.length)]],v.length>_.length&&(O[0][0]=O[2][0]=a),O;if(j.length==1)return[[a,v],[s,_]];var S=f(v,_);if(S){var N=S[0],E=S[1],T=S[2],C=S[3],D=S[4],z=l(N,T),V=l(E,C);return z.concat([[o,D]],V)}return h(v,_)}function h(v,_){for(var O=v.length,A=_.length,j=Math.ceil((O+A)/2),k=j,S=2*j,N=new Array(S),E=new Array(S),T=0;T<S;T++)N[T]=-1,E[T]=-1;N[k+1]=0,E[k+1]=0;for(var C=O-A,D=C%2!=0,z=0,V=0,G=0,U=0,M=0;M<j;M++){for(var R=-M+z;R<=M-V;R+=2){var L=k+R,$;R==-M||R!=M&&N[L-1]<N[L+1]?$=N[L+1]:$=N[L-1]+1;for(var Q=$-R;$<O&&Q<A&&v.charAt($)==_.charAt(Q);)$++,Q++;if(N[L]=$,$>O)V+=2;else if(Q>A)z+=2;else if(D){var Y=k+C-R;if(Y>=0&&Y<S&&E[Y]!=-1){var q=O-E[Y];if($>=q)return p(v,_,$,Q)}}}for(var K=-M+G;K<=M-U;K+=2){var Y=k+K,q;K==-M||K!=M&&E[Y-1]<E[Y+1]?q=E[Y+1]:q=E[Y-1]+1;for(var H=q-K;q<O&&H<A&&v.charAt(O-q-1)==_.charAt(A-H-1);)q++,H++;if(E[Y]=q,q>O)U+=2;else if(H>A)G+=2;else if(!D){var L=k+C-K;if(L>=0&&L<S&&N[L]!=-1){var $=N[L],Q=k+$-L;if(q=O-q,$>=q)return p(v,_,$,Q)}}}}return[[a,v],[s,_]]}function p(v,_,O,A){var j=v.substring(0,O),k=_.substring(0,A),S=v.substring(O),N=_.substring(A),E=l(j,k),T=l(S,N);return E.concat(T)}function d(v,_){if(!v||!_||v.charAt(0)!=_.charAt(0))return 0;for(var O=0,A=Math.min(v.length,_.length),j=A,k=0;O<j;)v.substring(k,j)==_.substring(k,j)?(O=j,k=O):A=j,j=Math.floor((A-O)/2+O);return j}function u(v,_){if(!v||!_||v.charAt(v.length-1)!=_.charAt(_.length-1))return 0;for(var O=0,A=Math.min(v.length,_.length),j=A,k=0;O<j;)v.substring(v.length-j,v.length-k)==_.substring(_.length-j,_.length-k)?(O=j,k=O):A=j,j=Math.floor((A-O)/2+O);return j}function f(v,_){var O=v.length>_.length?v:_,A=v.length>_.length?_:v;if(O.length<4||A.length*2<O.length)return null;function j(V,G,U){for(var M=V.substring(U,U+Math.floor(V.length/4)),R=-1,L="",$,Q,Y,q;(R=G.indexOf(M,R+1))!=-1;){var K=d(V.substring(U),G.substring(R)),H=u(V.substring(0,U),G.substring(0,R));L.length<H+K&&(L=G.substring(R-H,R)+G.substring(R,R+K),$=V.substring(0,U-H),Q=V.substring(U+K),Y=G.substring(0,R-H),q=G.substring(R+K))}return L.length*2>=V.length?[$,Q,Y,q,L]:null}var k=j(O,A,Math.ceil(O.length/4)),S=j(O,A,Math.ceil(O.length/2)),N;if(!k&&!S)return null;S?k?N=k[4].length>S[4].length?k:S:N=S:N=k;var E,T,C,D;v.length>_.length?(E=N[0],T=N[1],C=N[2],D=N[3]):(C=N[0],D=N[1],E=N[2],T=N[3]);var z=N[4];return[E,T,C,D,z]}function x(v){v.push([o,""]);for(var _=0,O=0,A=0,j="",k="",S;_<v.length;)switch(v[_][0]){case s:A++,k+=v[_][1],_++;break;case a:O++,j+=v[_][1],_++;break;case o:O+A>1?(O!==0&&A!==0&&(S=d(k,j),S!==0&&(_-O-A>0&&v[_-O-A-1][0]==o?v[_-O-A-1][1]+=k.substring(0,S):(v.splice(0,0,[o,k.substring(0,S)]),_++),k=k.substring(S),j=j.substring(S)),S=u(k,j),S!==0&&(v[_][1]=k.substring(k.length-S)+v[_][1],k=k.substring(0,k.length-S),j=j.substring(0,j.length-S))),O===0?v.splice(_-A,O+A,[s,k]):A===0?v.splice(_-O,O+A,[a,j]):v.splice(_-O-A,O+A,[a,j],[s,k]),_=_-O-A+(O?1:0)+(A?1:0)+1):_!==0&&v[_-1][0]==o?(v[_-1][1]+=v[_][1],v.splice(_,1)):_++,A=0,O=0,j="",k="";break}v[v.length-1][1]===""&&v.pop();var N=!1;for(_=1;_<v.length-1;)v[_-1][0]==o&&v[_+1][0]==o&&(v[_][1].substring(v[_][1].length-v[_-1][1].length)==v[_-1][1]?(v[_][1]=v[_-1][1]+v[_][1].substring(0,v[_][1].length-v[_-1][1].length),v[_+1][1]=v[_-1][1]+v[_+1][1],v.splice(_-1,1),N=!0):v[_][1].substring(0,v[_+1][1].length)==v[_+1][1]&&(v[_-1][1]+=v[_+1][1],v[_][1]=v[_][1].substring(v[_+1][1].length)+v[_+1][1],v.splice(_+1,1),N=!0)),_++;N&&x(v)}var b=l;b.INSERT=s,b.DELETE=a,b.EQUAL=o,r.exports=b;function w(v,_){if(_===0)return[o,v];for(var O=0,A=0;A<v.length;A++){var j=v[A];if(j[0]===a||j[0]===o){var k=O+j[1].length;if(_===k)return[A+1,v];if(_<k){v=v.slice();var S=_-O,N=[j[0],j[1].slice(0,S)],E=[j[0],j[1].slice(S)];return v.splice(A,1,N,E),[A+1,v]}else O=k}}throw new Error("cursor_pos is out of bounds!")}function g(v,_){var O=w(v,_),A=O[1],j=O[0],k=A[j],S=A[j+1];if(k==null)return v;if(k[0]!==o)return v;if(S!=null&&k[1]+S[1]===S[1]+k[1])return A.splice(j,2,S,k),y(A,j,2);if(S!=null&&S[1].indexOf(k[1])===0){A.splice(j,2,[S[0],k[1]],[0,k[1]]);var N=S[1].slice(k[1].length);return N.length>0&&A.splice(j+2,0,[S[0],N]),y(A,j,3)}else return v}function m(v){for(var _=!1,O=function(S){return S.charCodeAt(0)>=56320&&S.charCodeAt(0)<=57343},A=function(S){return S.charCodeAt(S.length-1)>=55296&&S.charCodeAt(S.length-1)<=56319},j=2;j<v.length;j+=1)v[j-2][0]===o&&A(v[j-2][1])&&v[j-1][0]===a&&O(v[j-1][1])&&v[j][0]===s&&O(v[j][1])&&(_=!0,v[j-1][1]=v[j-2][1].slice(-1)+v[j-1][1],v[j][1]=v[j-2][1].slice(-1)+v[j][1],v[j-2][1]=v[j-2][1].slice(0,-1));if(!_)return v;for(var k=[],j=0;j<v.length;j+=1)v[j][1].length>0&&k.push(v[j]);return k}function y(v,_,O){for(var A=_+O-1;A>=0&&A>=_-1;A--)if(A+1<v.length){var j=v[A],k=v[A+1];j[0]===k[1]&&v.splice(A,2,[j[0],j[1]+k[1]])}return v}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:a,n.shim=a;function a(s){var o=[];for(var l in s)o.push(l);return o}},function(r,n){var a=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=a?s:o,n.supported=s;function s(l){return Object.prototype.toString.call(l)=="[object Arguments]"}n.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(r,n){var a=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function l(h,p,d){this.fn=h,this.context=p,this.once=d||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var p=[],d,u;if(this._eventsCount===0)return p;for(u in d=this._events)a.call(d,u)&&p.push(s?u.slice(1):u);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(d)):p},c.prototype.listeners=function(p,d){var u=s?s+p:p,f=this._events[u];if(d)return!!f;if(!f)return[];if(f.fn)return[f.fn];for(var x=0,b=f.length,w=new Array(b);x<b;x++)w[x]=f[x].fn;return w},c.prototype.emit=function(p,d,u,f,x,b){var w=s?s+p:p;if(!this._events[w])return!1;var g=this._events[w],m=arguments.length,y,v;if(g.fn){switch(g.once&&this.removeListener(p,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,u),!0;case 4:return g.fn.call(g.context,d,u,f),!0;case 5:return g.fn.call(g.context,d,u,f,x),!0;case 6:return g.fn.call(g.context,d,u,f,x,b),!0}for(v=1,y=new Array(m-1);v<m;v++)y[v-1]=arguments[v];g.fn.apply(g.context,y)}else{var _=g.length,O;for(v=0;v<_;v++)switch(g[v].once&&this.removeListener(p,g[v].fn,void 0,!0),m){case 1:g[v].fn.call(g[v].context);break;case 2:g[v].fn.call(g[v].context,d);break;case 3:g[v].fn.call(g[v].context,d,u);break;case 4:g[v].fn.call(g[v].context,d,u,f);break;default:if(!y)for(O=1,y=new Array(m-1);O<m;O++)y[O-1]=arguments[O];g[v].fn.apply(g[v].context,y)}}return!0},c.prototype.on=function(p,d,u){var f=new l(d,u||this),x=s?s+p:p;return this._events[x]?this._events[x].fn?this._events[x]=[this._events[x],f]:this._events[x].push(f):(this._events[x]=f,this._eventsCount++),this},c.prototype.once=function(p,d,u){var f=new l(d,u||this,!0),x=s?s+p:p;return this._events[x]?this._events[x].fn?this._events[x]=[this._events[x],f]:this._events[x].push(f):(this._events[x]=f,this._eventsCount++),this},c.prototype.removeListener=function(p,d,u,f){var x=s?s+p:p;if(!this._events[x])return this;if(!d)return--this._eventsCount===0?this._events=new o:delete this._events[x],this;var b=this._events[x];if(b.fn)b.fn===d&&(!f||b.once)&&(!u||b.context===u)&&(--this._eventsCount===0?this._events=new o:delete this._events[x]);else{for(var w=0,g=[],m=b.length;w<m;w++)(b[w].fn!==d||f&&!b[w].once||u&&b[w].context!==u)&&g.push(b[w]);g.length?this._events[x]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new o:delete this._events[x]}return this},c.prototype.removeAllListeners=function(p){var d;return p?(d=s?s+p:p,this._events[d]&&(--this._eventsCount===0?this._events=new o:delete this._events[d])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=s,c.EventEmitter=c,typeof r!="undefined"&&(r.exports=c)},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},o=function(){function re(se,fe){var F=[],I=!0,W=!1,ae=void 0;try{for(var ne=se[Symbol.iterator](),ie;!(I=(ie=ne.next()).done)&&(F.push(ie.value),!(fe&&F.length===fe));I=!0);}catch(pe){W=!0,ae=pe}finally{try{!I&&ne.return&&ne.return()}finally{if(W)throw ae}}return F}return function(se,fe){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return re(se,fe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function re(se,fe){for(var F=0;F<fe.length;F++){var I=fe[F];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(se,I.key,I)}}return function(se,fe,F){return fe&&re(se.prototype,fe),F&&re(se,F),se}}(),c=a(3),h=E(c),p=a(2),d=E(p),u=a(0),f=E(u),x=a(5),b=E(x),w=a(10),g=E(w),m=a(9),y=E(m),v=a(36),_=a(37),O=a(13),A=E(O),j=a(26),k=a(38),S=a(39),N=a(40);function E(re){return re&&re.__esModule?re:{default:re}}function T(re,se,fe){return se in re?Object.defineProperty(re,se,{value:fe,enumerable:!0,configurable:!0,writable:!0}):re[se]=fe,re}function C(re,se){if(!(re instanceof se))throw new TypeError("Cannot call a class as a function")}function D(re,se){if(!re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:re}function z(re,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);re.prototype=Object.create(se&&se.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(re,se):re.__proto__=se)}var V=(0,g.default)("quill:clipboard"),G="__ql-matcher",U=[[Node.TEXT_NODE,Ae],[Node.TEXT_NODE,le],["br",ee],[Node.ELEMENT_NODE,le],[Node.ELEMENT_NODE,Z],[Node.ELEMENT_NODE,ge],[Node.ELEMENT_NODE,J],[Node.ELEMENT_NODE,ke],["li",oe],["b",H.bind(H,"bold")],["i",H.bind(H,"italic")],["style",ue]],M=[v.AlignAttribute,k.DirectionAttribute].reduce(function(re,se){return re[se.keyName]=se,re},{}),R=[v.AlignStyle,_.BackgroundStyle,j.ColorStyle,k.DirectionStyle,S.FontStyle,N.SizeStyle].reduce(function(re,se){return re[se.keyName]=se,re},{}),L=function(re){z(se,re);function se(fe,F){C(this,se);var I=D(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,fe,F));return I.quill.root.addEventListener("paste",I.onPaste.bind(I)),I.container=I.quill.addContainer("ql-clipboard"),I.container.setAttribute("contenteditable",!0),I.container.setAttribute("tabindex",-1),I.matchers=[],U.concat(I.options.matchers).forEach(function(W){var ae=o(W,2),ne=ae[0],ie=ae[1];!F.matchVisual&&ie===ge||I.addMatcher(ne,ie)}),I}return l(se,[{key:"addMatcher",value:function(F,I){this.matchers.push([F,I])}},{key:"convert",value:function(F){if(typeof F=="string")return this.container.innerHTML=F.replace(/\>\r?\n +\</g,"><"),this.convert();var I=this.quill.getFormat(this.quill.selection.savedRange.index);if(I[A.default.blotName]){var W=this.container.innerText;return this.container.innerHTML="",new d.default().insert(W,T({},A.default.blotName,I[A.default.blotName]))}var ae=this.prepareMatching(),ne=o(ae,2),ie=ne[0],pe=ne[1],ye=K(this.container,ie,pe);return Y(ye,`
`)&&ye.ops[ye.ops.length-1].attributes==null&&(ye=ye.compose(new d.default().retain(ye.length()-1).delete(1))),V.log("convert",this.container.innerHTML,ye),this.container.innerHTML="",ye}},{key:"dangerouslyPasteHTML",value:function(F,I){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof F=="string")this.quill.setContents(this.convert(F),I),this.quill.setSelection(0,b.default.sources.SILENT);else{var ae=this.convert(I);this.quill.updateContents(new d.default().retain(F).concat(ae),W),this.quill.setSelection(F+ae.length(),b.default.sources.SILENT)}}},{key:"onPaste",value:function(F){var I=this;if(!(F.defaultPrevented||!this.quill.isEnabled())){var W=this.quill.getSelection(),ae=new d.default().retain(W.index),ne=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(b.default.sources.SILENT),setTimeout(function(){ae=ae.concat(I.convert()).delete(W.length),I.quill.updateContents(ae,b.default.sources.USER),I.quill.setSelection(ae.length()-W.length,b.default.sources.SILENT),I.quill.scrollingContainer.scrollTop=ne,I.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var F=this,I=[],W=[];return this.matchers.forEach(function(ae){var ne=o(ae,2),ie=ne[0],pe=ne[1];switch(ie){case Node.TEXT_NODE:W.push(pe);break;case Node.ELEMENT_NODE:I.push(pe);break;default:[].forEach.call(F.container.querySelectorAll(ie),function(ye){ye[G]=ye[G]||[],ye[G].push(pe)});break}}),[I,W]}}]),se}(y.default);L.DEFAULTS={matchers:[],matchVisual:!0};function $(re,se,fe){return(typeof se=="undefined"?"undefined":s(se))==="object"?Object.keys(se).reduce(function(F,I){return $(F,I,se[I])},re):re.reduce(function(F,I){return I.attributes&&I.attributes[se]?F.push(I):F.insert(I.insert,(0,h.default)({},T({},se,fe),I.attributes))},new d.default)}function Q(re){if(re.nodeType!==Node.ELEMENT_NODE)return{};var se="__ql-computed-style";return re[se]||(re[se]=window.getComputedStyle(re))}function Y(re,se){for(var fe="",F=re.ops.length-1;F>=0&&fe.length<se.length;--F){var I=re.ops[F];if(typeof I.insert!="string")break;fe=I.insert+fe}return fe.slice(-1*se.length)===se}function q(re){if(re.childNodes.length===0)return!1;var se=Q(re);return["block","list-item"].indexOf(se.display)>-1}function K(re,se,fe){return re.nodeType===re.TEXT_NODE?fe.reduce(function(F,I){return I(re,F)},new d.default):re.nodeType===re.ELEMENT_NODE?[].reduce.call(re.childNodes||[],function(F,I){var W=K(I,se,fe);return I.nodeType===re.ELEMENT_NODE&&(W=se.reduce(function(ae,ne){return ne(I,ae)},W),W=(I[G]||[]).reduce(function(ae,ne){return ne(I,ae)},W)),F.concat(W)},new d.default):new d.default}function H(re,se,fe){return $(fe,re,!0)}function J(re,se){var fe=f.default.Attributor.Attribute.keys(re),F=f.default.Attributor.Class.keys(re),I=f.default.Attributor.Style.keys(re),W={};return fe.concat(F).concat(I).forEach(function(ae){var ne=f.default.query(ae,f.default.Scope.ATTRIBUTE);ne!=null&&(W[ne.attrName]=ne.value(re),W[ne.attrName])||(ne=M[ae],ne!=null&&(ne.attrName===ae||ne.keyName===ae)&&(W[ne.attrName]=ne.value(re)||void 0),ne=R[ae],ne!=null&&(ne.attrName===ae||ne.keyName===ae)&&(ne=R[ae],W[ne.attrName]=ne.value(re)||void 0))}),Object.keys(W).length>0&&(se=$(se,W)),se}function Z(re,se){var fe=f.default.query(re);if(fe==null)return se;if(fe.prototype instanceof f.default.Embed){var F={},I=fe.value(re);I!=null&&(F[fe.blotName]=I,se=new d.default().insert(F,fe.formats(re)))}else typeof fe.formats=="function"&&(se=$(se,fe.blotName,fe.formats(re)));return se}function ee(re,se){return Y(se,`
`)||se.insert(`
`),se}function ue(){return new d.default}function oe(re,se){var fe=f.default.query(re);if(fe==null||fe.blotName!=="list-item"||!Y(se,`
`))return se;for(var F=-1,I=re.parentNode;!I.classList.contains("ql-clipboard");)(f.default.query(I)||{}).blotName==="list"&&(F+=1),I=I.parentNode;return F<=0?se:se.compose(new d.default().retain(se.length()-1).retain(1,{indent:F}))}function le(re,se){return Y(se,`
`)||(q(re)||se.length()>0&&re.nextSibling&&q(re.nextSibling))&&se.insert(`
`),se}function ge(re,se){if(q(re)&&re.nextElementSibling!=null&&!Y(se,`

`)){var fe=re.offsetHeight+parseFloat(Q(re).marginTop)+parseFloat(Q(re).marginBottom);re.nextElementSibling.offsetTop>re.offsetTop+fe*1.5&&se.insert(`
`)}return se}function ke(re,se){var fe={},F=re.style||{};return F.fontStyle&&Q(re).fontStyle==="italic"&&(fe.italic=!0),F.fontWeight&&(Q(re).fontWeight.startsWith("bold")||parseInt(Q(re).fontWeight)>=700)&&(fe.bold=!0),Object.keys(fe).length>0&&(se=$(se,fe)),parseFloat(F.textIndent||0)>0&&(se=new d.default().insert("	").concat(se)),se}function Ae(re,se){var fe=re.data;if(re.parentNode.tagName==="O:P")return se.insert(fe.trim());if(fe.trim().length===0&&re.parentNode.classList.contains("ql-clipboard"))return se;if(!Q(re.parentNode).whiteSpace.startsWith("pre")){var F=function(W,ae){return ae=ae.replace(/[^\u00a0]/g,""),ae.length<1&&W?" ":ae};fe=fe.replace(/\r\n/g," ").replace(/\n/g," "),fe=fe.replace(/\s\s+/g,F.bind(F,!0)),(re.previousSibling==null&&q(re.parentNode)||re.previousSibling!=null&&q(re.previousSibling))&&(fe=fe.replace(/^\s+/,F.bind(F,!1))),(re.nextSibling==null&&q(re.parentNode)||re.nextSibling!=null&&q(re.nextSibling))&&(fe=fe.replace(/\s+$/,F.bind(F,!1)))}return se.insert(fe)}n.default=L,n.matchAttributor=J,n.matchBlot=Z,n.matchNewline=le,n.matchSpacing=ge,n.matchText=Ae},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(b,w){for(var g=0;g<w.length;g++){var m=w[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,w,g){return w&&x(b.prototype,w),g&&x(b,g),b}}(),o=function x(b,w,g){b===null&&(b=Function.prototype);var m=Object.getOwnPropertyDescriptor(b,w);if(m===void 0){var y=Object.getPrototypeOf(b);return y===null?void 0:x(y,w,g)}else{if("value"in m)return m.value;var v=m.get;return v===void 0?void 0:v.call(g)}},l=a(6),c=h(l);function h(x){return x&&x.__esModule?x:{default:x}}function p(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function d(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function u(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var f=function(x){u(b,x);function b(){return p(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"optimize",value:function(g){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),b}(c.default);f.blotName="bold",f.tagName=["STRONG","B"],n.default=f},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var s=function(){function N(E,T){var C=[],D=!0,z=!1,V=void 0;try{for(var G=E[Symbol.iterator](),U;!(D=(U=G.next()).done)&&(C.push(U.value),!(T&&C.length===T));D=!0);}catch(M){z=!0,V=M}finally{try{!D&&G.return&&G.return()}finally{if(z)throw V}}return C}return function(E,T){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return N(E,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function N(E,T){for(var C=0;C<T.length;C++){var D=T[C];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(E,D.key,D)}}return function(E,T,C){return T&&N(E.prototype,T),C&&N(E,C),E}}(),l=a(2),c=g(l),h=a(0),p=g(h),d=a(5),u=g(d),f=a(10),x=g(f),b=a(9),w=g(b);function g(N){return N&&N.__esModule?N:{default:N}}function m(N,E,T){return E in N?Object.defineProperty(N,E,{value:T,enumerable:!0,configurable:!0,writable:!0}):N[E]=T,N}function y(N,E){if(!(N instanceof E))throw new TypeError("Cannot call a class as a function")}function v(N,E){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:N}function _(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);N.prototype=Object.create(E&&E.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(N,E):N.__proto__=E)}var O=(0,x.default)("quill:toolbar"),A=function(N){_(E,N);function E(T,C){y(this,E);var D=v(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,T,C));if(Array.isArray(D.options.container)){var z=document.createElement("div");k(z,D.options.container),T.container.parentNode.insertBefore(z,T.container),D.container=z}else typeof D.options.container=="string"?D.container=document.querySelector(D.options.container):D.container=D.options.container;if(!(D.container instanceof HTMLElement)){var V;return V=O.error("Container required for toolbar",D.options),v(D,V)}return D.container.classList.add("ql-toolbar"),D.controls=[],D.handlers={},Object.keys(D.options.handlers).forEach(function(G){D.addHandler(G,D.options.handlers[G])}),[].forEach.call(D.container.querySelectorAll("button, select"),function(G){D.attach(G)}),D.quill.on(u.default.events.EDITOR_CHANGE,function(G,U){G===u.default.events.SELECTION_CHANGE&&D.update(U)}),D.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){var G=D.quill.selection.getRange(),U=s(G,1),M=U[0];D.update(M)}),D}return o(E,[{key:"addHandler",value:function(C,D){this.handlers[C]=D}},{key:"attach",value:function(C){var D=this,z=[].find.call(C.classList,function(G){return G.indexOf("ql-")===0});if(z){if(z=z.slice(3),C.tagName==="BUTTON"&&C.setAttribute("type","button"),this.handlers[z]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[z]==null){O.warn("ignoring attaching to disabled format",z,C);return}if(p.default.query(z)==null){O.warn("ignoring attaching to nonexistent format",z,C);return}}var V=C.tagName==="SELECT"?"change":"click";C.addEventListener(V,function(G){var U=void 0;if(C.tagName==="SELECT"){if(C.selectedIndex<0)return;var M=C.options[C.selectedIndex];M.hasAttribute("selected")?U=!1:U=M.value||!1}else C.classList.contains("ql-active")?U=!1:U=C.value||!C.hasAttribute("value"),G.preventDefault();D.quill.focus();var R=D.quill.selection.getRange(),L=s(R,1),$=L[0];if(D.handlers[z]!=null)D.handlers[z].call(D,U);else if(p.default.query(z).prototype instanceof p.default.Embed){if(U=prompt("Enter "+z),!U)return;D.quill.updateContents(new c.default().retain($.index).delete($.length).insert(m({},z,U)),u.default.sources.USER)}else D.quill.format(z,U,u.default.sources.USER);D.update($)}),this.controls.push([z,C])}}},{key:"update",value:function(C){var D=C==null?{}:this.quill.getFormat(C);this.controls.forEach(function(z){var V=s(z,2),G=V[0],U=V[1];if(U.tagName==="SELECT"){var M=void 0;if(C==null)M=null;else if(D[G]==null)M=U.querySelector("option[selected]");else if(!Array.isArray(D[G])){var R=D[G];typeof R=="string"&&(R=R.replace(/\"/g,'\\"')),M=U.querySelector('option[value="'+R+'"]')}M==null?(U.value="",U.selectedIndex=-1):M.selected=!0}else if(C==null)U.classList.remove("ql-active");else if(U.hasAttribute("value")){var L=D[G]===U.getAttribute("value")||D[G]!=null&&D[G].toString()===U.getAttribute("value")||D[G]==null&&!U.getAttribute("value");U.classList.toggle("ql-active",L)}else U.classList.toggle("ql-active",D[G]!=null)})}}]),E}(w.default);A.DEFAULTS={};function j(N,E,T){var C=document.createElement("button");C.setAttribute("type","button"),C.classList.add("ql-"+E),T!=null&&(C.value=T),N.appendChild(C)}function k(N,E){Array.isArray(E[0])||(E=[E]),E.forEach(function(T){var C=document.createElement("span");C.classList.add("ql-formats"),T.forEach(function(D){if(typeof D=="string")j(C,D);else{var z=Object.keys(D)[0],V=D[z];Array.isArray(V)?S(C,z,V):j(C,z,V)}}),N.appendChild(C)})}function S(N,E,T){var C=document.createElement("select");C.classList.add("ql-"+E),T.forEach(function(D){var z=document.createElement("option");D!==!1?z.setAttribute("value",D):z.setAttribute("selected","selected"),C.appendChild(z)}),N.appendChild(C)}A.DEFAULTS={container:null,handlers:{clean:function(){var E=this,T=this.quill.getSelection();if(T!=null)if(T.length==0){var C=this.quill.getFormat();Object.keys(C).forEach(function(D){p.default.query(D,p.default.Scope.INLINE)!=null&&E.quill.format(D,!1)})}else this.quill.removeFormat(T,u.default.sources.USER)},direction:function(E){var T=this.quill.getFormat().align;E==="rtl"&&T==null?this.quill.format("align","right",u.default.sources.USER):!E&&T==="right"&&this.quill.format("align",!1,u.default.sources.USER),this.quill.format("direction",E,u.default.sources.USER)},indent:function(E){var T=this.quill.getSelection(),C=this.quill.getFormat(T),D=parseInt(C.indent||0);if(E==="+1"||E==="-1"){var z=E==="+1"?1:-1;C.direction==="rtl"&&(z*=-1),this.quill.format("indent",D+z,u.default.sources.USER)}},link:function(E){E===!0&&(E=prompt("Enter link URL:")),this.quill.format("link",E,u.default.sources.USER)},list:function(E){var T=this.quill.getSelection(),C=this.quill.getFormat(T);E==="check"?C.list==="checked"||C.list==="unchecked"?this.quill.format("list",!1,u.default.sources.USER):this.quill.format("list","unchecked",u.default.sources.USER):this.quill.format("list",E,u.default.sources.USER)}}},n.default=A,n.addControls=k},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(b,w){for(var g=0;g<w.length;g++){var m=w[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,w,g){return w&&x(b.prototype,w),g&&x(b,g),b}}(),o=function x(b,w,g){b===null&&(b=Function.prototype);var m=Object.getOwnPropertyDescriptor(b,w);if(m===void 0){var y=Object.getPrototypeOf(b);return y===null?void 0:x(y,w,g)}else{if("value"in m)return m.value;var v=m.get;return v===void 0?void 0:v.call(g)}},l=a(28),c=h(l);function h(x){return x&&x.__esModule?x:{default:x}}function p(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function d(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function u(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var f=function(x){u(b,x);function b(w,g){p(this,b);var m=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return m.label.innerHTML=g,m.container.classList.add("ql-color-picker"),[].slice.call(m.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(y){y.classList.add("ql-primary")}),m}return s(b,[{key:"buildItem",value:function(g){var m=o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"buildItem",this).call(this,g);return m.style.backgroundColor=g.getAttribute("value")||"",m}},{key:"selectItem",value:function(g,m){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,g,m);var y=this.label.querySelector(".ql-color-label"),v=g&&g.getAttribute("data-value")||"";y&&(y.tagName==="line"?y.style.stroke=v:y.style.fill=v)}}]),b}(c.default);n.default=f},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(b,w){for(var g=0;g<w.length;g++){var m=w[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,w,g){return w&&x(b.prototype,w),g&&x(b,g),b}}(),o=function x(b,w,g){b===null&&(b=Function.prototype);var m=Object.getOwnPropertyDescriptor(b,w);if(m===void 0){var y=Object.getPrototypeOf(b);return y===null?void 0:x(y,w,g)}else{if("value"in m)return m.value;var v=m.get;return v===void 0?void 0:v.call(g)}},l=a(28),c=h(l);function h(x){return x&&x.__esModule?x:{default:x}}function p(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function d(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function u(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var f=function(x){u(b,x);function b(w,g){p(this,b);var m=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return m.container.classList.add("ql-icon-picker"),[].forEach.call(m.container.querySelectorAll(".ql-picker-item"),function(y){y.innerHTML=g[y.getAttribute("data-value")||""]}),m.defaultItem=m.container.querySelector(".ql-selected"),m.selectItem(m.defaultItem),m}return s(b,[{key:"selectItem",value:function(g,m){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,g,m),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),b}(c.default);n.default=f},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function c(h,p){for(var d=0;d<p.length;d++){var u=p[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(h,u.key,u)}}return function(h,p,d){return p&&c(h.prototype,p),d&&c(h,d),h}}();function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function(){function c(h,p){var d=this;o(this,c),this.quill=h,this.boundsContainer=p||document.body,this.root=h.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return s(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(p){var d=p.left+p.width/2-this.root.offsetWidth/2,u=p.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=u+"px",this.root.classList.remove("ql-flip");var f=this.boundsContainer.getBoundingClientRect(),x=this.root.getBoundingClientRect(),b=0;if(x.right>f.right&&(b=f.right-x.right,this.root.style.left=d+b+"px"),x.left<f.left&&(b=f.left-x.left,this.root.style.left=d+b+"px"),x.bottom>f.bottom){var w=x.bottom-x.top,g=p.bottom-p.top+w;this.root.style.top=u-g+"px",this.root.classList.add("ql-flip")}return b}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c}();n.default=l},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function S(N,E){var T=[],C=!0,D=!1,z=void 0;try{for(var V=N[Symbol.iterator](),G;!(C=(G=V.next()).done)&&(T.push(G.value),!(E&&T.length===E));C=!0);}catch(U){D=!0,z=U}finally{try{!C&&V.return&&V.return()}finally{if(D)throw z}}return T}return function(N,E){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return S(N,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function S(N,E,T){N===null&&(N=Function.prototype);var C=Object.getOwnPropertyDescriptor(N,E);if(C===void 0){var D=Object.getPrototypeOf(N);return D===null?void 0:S(D,E,T)}else{if("value"in C)return C.value;var z=C.get;return z===void 0?void 0:z.call(T)}},l=function(){function S(N,E){for(var T=0;T<E.length;T++){var C=E[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(N,C.key,C)}}return function(N,E,T){return E&&S(N.prototype,E),T&&S(N,T),N}}(),c=a(3),h=y(c),p=a(8),d=y(p),u=a(43),f=y(u),x=a(27),b=y(x),w=a(15),g=a(41),m=y(g);function y(S){return S&&S.__esModule?S:{default:S}}function v(S,N){if(!(S instanceof N))throw new TypeError("Cannot call a class as a function")}function _(S,N){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:S}function O(S,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);S.prototype=Object.create(N&&N.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(S,N):S.__proto__=N)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],j=function(S){O(N,S);function N(E,T){v(this,N),T.modules.toolbar!=null&&T.modules.toolbar.container==null&&(T.modules.toolbar.container=A);var C=_(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,E,T));return C.quill.container.classList.add("ql-snow"),C}return l(N,[{key:"extendToolbar",value:function(T){T.container.classList.add("ql-snow"),this.buildButtons([].slice.call(T.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(T.container.querySelectorAll("select")),m.default),this.tooltip=new k(this.quill,this.options.bounds),T.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(C,D){T.handlers.link.call(T,!D.format.link)})}}]),N}(f.default);j.DEFAULTS=(0,h.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(N){if(N){var E=this.quill.getSelection();if(E==null||E.length==0)return;var T=this.quill.getText(E);/^\S+@\S+\.\S+$/.test(T)&&T.indexOf("mailto:")!==0&&(T="mailto:"+T);var C=this.quill.theme.tooltip;C.edit("link",T)}else this.quill.format("link",!1)}}}}});var k=function(S){O(N,S);function N(E,T){v(this,N);var C=_(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,E,T));return C.preview=C.root.querySelector("a.ql-preview"),C}return l(N,[{key:"listen",value:function(){var T=this;o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(C){T.root.classList.contains("ql-editing")?T.save():T.edit("link",T.preview.textContent),C.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(C){if(T.linkRange!=null){var D=T.linkRange;T.restoreFocus(),T.quill.formatText(D,"link",!1,d.default.sources.USER),delete T.linkRange}C.preventDefault(),T.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(C,D,z){if(C!=null){if(C.length===0&&z===d.default.sources.USER){var V=T.quill.scroll.descendant(b.default,C.index),G=s(V,2),U=G[0],M=G[1];if(U!=null){T.linkRange=new w.Range(C.index-M,U.length());var R=b.default.formats(U.domNode);T.preview.textContent=R,T.preview.setAttribute("href",R),T.show(),T.position(T.quill.getBounds(T.linkRange));return}}else delete T.linkRange;T.hide()}})}},{key:"show",value:function(){o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),N}(u.BaseTooltip);k.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=j},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(29),o=I(s),l=a(36),c=a(38),h=a(64),p=a(65),d=I(p),u=a(66),f=I(u),x=a(67),b=I(x),w=a(37),g=a(26),m=a(39),y=a(40),v=a(56),_=I(v),O=a(68),A=I(O),j=a(27),k=I(j),S=a(69),N=I(S),E=a(70),T=I(E),C=a(71),D=I(C),z=a(72),V=I(z),G=a(73),U=I(G),M=a(13),R=I(M),L=a(74),$=I(L),Q=a(75),Y=I(Q),q=a(57),K=I(q),H=a(41),J=I(H),Z=a(28),ee=I(Z),ue=a(59),oe=I(ue),le=a(60),ge=I(le),ke=a(61),Ae=I(ke),re=a(108),se=I(re),fe=a(62),F=I(fe);function I(W){return W&&W.__esModule?W:{default:W}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":m.FontClass,"attributors/class/size":y.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":m.FontStyle,"attributors/style/size":y.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":h.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":m.FontClass,"formats/size":y.SizeClass,"formats/blockquote":d.default,"formats/code-block":R.default,"formats/header":f.default,"formats/list":b.default,"formats/bold":_.default,"formats/code":M.Code,"formats/italic":A.default,"formats/link":k.default,"formats/script":N.default,"formats/strike":T.default,"formats/underline":D.default,"formats/image":V.default,"formats/video":U.default,"formats/list/item":x.ListItem,"modules/formula":$.default,"modules/syntax":Y.default,"modules/toolbar":K.default,"themes/bubble":se.default,"themes/snow":F.default,"ui/icons":J.default,"ui/picker":ee.default,"ui/icon-picker":ge.default,"ui/color-picker":oe.default,"ui/tooltip":Ae.default},!0),n.default=o.default},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var s=function(){function b(w,g){for(var m=0;m<g.length;m++){var y=g[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(w,y.key,y)}}return function(w,g,m){return g&&b(w.prototype,g),m&&b(w,m),w}}(),o=function b(w,g,m){w===null&&(w=Function.prototype);var y=Object.getOwnPropertyDescriptor(w,g);if(y===void 0){var v=Object.getPrototypeOf(w);return v===null?void 0:b(v,g,m)}else{if("value"in y)return y.value;var _=y.get;return _===void 0?void 0:_.call(m)}},l=a(0),c=h(l);function h(b){return b&&b.__esModule?b:{default:b}}function p(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function d(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function u(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var f=function(b){u(w,b);function w(){return p(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"add",value:function(m,y){if(y==="+1"||y==="-1"){var v=this.value(m)||0;y=y==="+1"?v+1:v-1}return y===0?(this.remove(m),!0):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,m,y)}},{key:"canAdd",value:function(m,y){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,m,y)||o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,m,parseInt(y))}},{key:"value",value:function(m){return parseInt(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,m))||void 0}}]),w}(c.default.Attributor.Class),x=new f("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=x},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(4),o=l(s);function l(u){return u&&u.__esModule?u:{default:u}}function c(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function h(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function p(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var d=function(u){p(f,u);function f(){return c(this,f),h(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);d.blotName="blockquote",d.tagName="blockquote",n.default=d},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function f(x,b){for(var w=0;w<b.length;w++){var g=b[w];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(x,g.key,g)}}return function(x,b,w){return b&&f(x.prototype,b),w&&f(x,w),x}}(),o=a(4),l=c(o);function c(f){return f&&f.__esModule?f:{default:f}}function h(f,x){if(!(f instanceof x))throw new TypeError("Cannot call a class as a function")}function p(f,x){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:f}function d(f,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);f.prototype=Object.create(x&&x.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(f,x):f.__proto__=x)}var u=function(f){d(x,f);function x(){return h(this,x),p(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return s(x,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),x}(l.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],n.default=u},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var s=function(){function v(_,O){for(var A=0;A<O.length;A++){var j=O[A];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(_,j.key,j)}}return function(_,O,A){return O&&v(_.prototype,O),A&&v(_,A),_}}(),o=function v(_,O,A){_===null&&(_=Function.prototype);var j=Object.getOwnPropertyDescriptor(_,O);if(j===void 0){var k=Object.getPrototypeOf(_);return k===null?void 0:v(k,O,A)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(A)}},l=a(0),c=f(l),h=a(4),p=f(h),d=a(25),u=f(d);function f(v){return v&&v.__esModule?v:{default:v}}function x(v,_,O){return _ in v?Object.defineProperty(v,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):v[_]=O,v}function b(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function w(v,_){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:v}function g(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(v,_):v.__proto__=_)}var m=function(v){g(_,v);function _(){return b(this,_),w(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"format",value:function(A,j){A===y.blotName&&!j?this.replaceWith(c.default.create(this.statics.scope)):o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,A,j)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,j){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,j),this):(this.parent.unwrap(),o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"replaceWith",this).call(this,A,j))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:o(_.__proto__||Object.getPrototypeOf(_),"formats",this).call(this,A)}}]),_}(p.default);m.blotName="list-item",m.tagName="LI";var y=function(v){g(_,v),s(_,null,[{key:"create",value:function(A){var j=A==="ordered"?"OL":"UL",k=o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,j);return(A==="checked"||A==="unchecked")&&k.setAttribute("data-checked",A==="checked"),k}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function _(O){b(this,_);var A=w(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,O)),j=function(S){if(S.target.parentNode===O){var N=A.statics.formats(O),E=c.default.find(S.target);N==="checked"?E.format("list","unchecked"):N==="unchecked"&&E.format("list","checked")}};return O.addEventListener("touchstart",j),O.addEventListener("mousedown",j),A}return s(_,[{key:"format",value:function(A,j){this.children.length>0&&this.children.tail.format(A,j)}},{key:"formats",value:function(){return x({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,j){if(A instanceof m)o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertBefore",this).call(this,A,j);else{var k=j==null?this.length():j.offset(this),S=this.split(k);S.parent.insertBefore(A,S)}}},{key:"optimize",value:function(A){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,A);var j=this.next;j!=null&&j.prev===this&&j.statics.blotName===this.statics.blotName&&j.domNode.tagName===this.domNode.tagName&&j.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(j.moveChildren(this),j.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var j=c.default.create(this.statics.defaultChild);A.moveChildren(j),this.appendChild(j)}o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"replace",this).call(this,A)}}]),_}(u.default);y.blotName="list",y.scope=c.default.Scope.BLOCK_BLOT,y.tagName=["OL","UL"],y.defaultChild="list-item",y.allowedChildren=[m],n.ListItem=m,n.default=y},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(56),o=l(s);function l(u){return u&&u.__esModule?u:{default:u}}function c(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function h(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function p(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var d=function(u){p(f,u);function f(){return c(this,f),h(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);d.blotName="italic",d.tagName=["EM","I"],n.default=d},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(b,w){for(var g=0;g<w.length;g++){var m=w[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,w,g){return w&&x(b.prototype,w),g&&x(b,g),b}}(),o=function x(b,w,g){b===null&&(b=Function.prototype);var m=Object.getOwnPropertyDescriptor(b,w);if(m===void 0){var y=Object.getPrototypeOf(b);return y===null?void 0:x(y,w,g)}else{if("value"in m)return m.value;var v=m.get;return v===void 0?void 0:v.call(g)}},l=a(6),c=h(l);function h(x){return x&&x.__esModule?x:{default:x}}function p(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function d(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function u(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var f=function(x){u(b,x);function b(){return p(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),b}(c.default);f.blotName="script",f.tagName=["SUB","SUP"],n.default=f},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(6),o=l(s);function l(u){return u&&u.__esModule?u:{default:u}}function c(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function h(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function p(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var d=function(u){p(f,u);function f(){return c(this,f),h(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);d.blotName="strike",d.tagName="S",n.default=d},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=a(6),o=l(s);function l(u){return u&&u.__esModule?u:{default:u}}function c(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function h(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function p(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var d=function(u){p(f,u);function f(){return c(this,f),h(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return f}(o.default);d.blotName="underline",d.tagName="U",n.default=d},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function w(g,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,m,y){return m&&w(g.prototype,m),y&&w(g,y),g}}(),o=function w(g,m,y){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,m);if(v===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:w(_,m,y)}else{if("value"in v)return v.value;var O=v.get;return O===void 0?void 0:O.call(y)}},l=a(0),c=p(l),h=a(27);function p(w){return w&&w.__esModule?w:{default:w}}function d(w,g){if(!(w instanceof g))throw new TypeError("Cannot call a class as a function")}function u(w,g){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:w}function f(w,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);w.prototype=Object.create(g&&g.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(w,g):w.__proto__=g)}var x=["alt","height","width"],b=function(w){f(g,w);function g(){return d(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"format",value:function(y,v){x.indexOf(y)>-1?v?this.domNode.setAttribute(y,v):this.domNode.removeAttribute(y):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,y,v)}}],[{key:"create",value:function(y){var v=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,y);return typeof y=="string"&&v.setAttribute("src",this.sanitize(y)),v}},{key:"formats",value:function(y){return x.reduce(function(v,_){return y.hasAttribute(_)&&(v[_]=y.getAttribute(_)),v},{})}},{key:"match",value:function(y){return/\.(jpe?g|gif|png)$/.test(y)||/^data:image\/.+;base64/.test(y)}},{key:"sanitize",value:function(y){return(0,h.sanitize)(y,["http","https","data"])?y:"//:0"}},{key:"value",value:function(y){return y.getAttribute("src")}}]),g}(c.default.Embed);b.blotName="image",b.tagName="IMG",n.default=b},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function w(g,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,m,y){return m&&w(g.prototype,m),y&&w(g,y),g}}(),o=function w(g,m,y){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,m);if(v===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:w(_,m,y)}else{if("value"in v)return v.value;var O=v.get;return O===void 0?void 0:O.call(y)}},l=a(4),c=a(27),h=p(c);function p(w){return w&&w.__esModule?w:{default:w}}function d(w,g){if(!(w instanceof g))throw new TypeError("Cannot call a class as a function")}function u(w,g){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:w}function f(w,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);w.prototype=Object.create(g&&g.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(w,g):w.__proto__=g)}var x=["height","width"],b=function(w){f(g,w);function g(){return d(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"format",value:function(y,v){x.indexOf(y)>-1?v?this.domNode.setAttribute(y,v):this.domNode.removeAttribute(y):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,y,v)}}],[{key:"create",value:function(y){var v=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,y);return v.setAttribute("frameborder","0"),v.setAttribute("allowfullscreen",!0),v.setAttribute("src",this.sanitize(y)),v}},{key:"formats",value:function(y){return x.reduce(function(v,_){return y.hasAttribute(_)&&(v[_]=y.getAttribute(_)),v},{})}},{key:"sanitize",value:function(y){return h.default.sanitize(y)}},{key:"value",value:function(y){return y.getAttribute("src")}}]),g}(l.BlockEmbed);b.blotName="video",b.className="ql-video",b.tagName="IFRAME",n.default=b},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var s=function(){function y(v,_){for(var O=0;O<_.length;O++){var A=_[O];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}return function(v,_,O){return _&&y(v.prototype,_),O&&y(v,O),v}}(),o=function y(v,_,O){v===null&&(v=Function.prototype);var A=Object.getOwnPropertyDescriptor(v,_);if(A===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,_,O)}else{if("value"in A)return A.value;var k=A.get;return k===void 0?void 0:k.call(O)}},l=a(35),c=f(l),h=a(5),p=f(h),d=a(9),u=f(d);function f(y){return y&&y.__esModule?y:{default:y}}function x(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function b(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function w(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var g=function(y){w(v,y);function v(){return x(this,v),b(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,null,[{key:"create",value:function(O){var A=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,O);return typeof O=="string"&&(window.katex.render(O,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",O)),A}},{key:"value",value:function(O){return O.getAttribute("data-value")}}]),v}(c.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var m=function(y){w(v,y),s(v,null,[{key:"register",value:function(){p.default.register(g,!0)}}]);function v(){x(this,v);var _=b(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return _}return v}(u.default);n.FormulaBlot=g,n.default=m},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var s=function(){function O(A,j){for(var k=0;k<j.length;k++){var S=j[k];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(A,S.key,S)}}return function(A,j,k){return j&&O(A.prototype,j),k&&O(A,k),A}}(),o=function O(A,j,k){A===null&&(A=Function.prototype);var S=Object.getOwnPropertyDescriptor(A,j);if(S===void 0){var N=Object.getPrototypeOf(A);return N===null?void 0:O(N,j,k)}else{if("value"in S)return S.value;var E=S.get;return E===void 0?void 0:E.call(k)}},l=a(0),c=b(l),h=a(5),p=b(h),d=a(9),u=b(d),f=a(13),x=b(f);function b(O){return O&&O.__esModule?O:{default:O}}function w(O,A){if(!(O instanceof A))throw new TypeError("Cannot call a class as a function")}function g(O,A){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:O}function m(O,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);O.prototype=Object.create(A&&A.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(O,A):O.__proto__=A)}var y=function(O){m(A,O);function A(){return w(this,A),g(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"replaceWith",value:function(k){this.domNode.textContent=this.domNode.textContent,this.attach(),o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,k)}},{key:"highlight",value:function(k){var S=this.domNode.textContent;this.cachedText!==S&&((S.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=k(S),this.domNode.normalize(),this.attach()),this.cachedText=S)}}]),A}(x.default);y.className="ql-syntax";var v=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),_=function(O){m(A,O),s(A,null,[{key:"register",value:function(){p.default.register(v,!0),p.default.register(y,!0)}}]);function A(j,k){w(this,A);var S=g(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,j,k));if(typeof S.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var N=null;return S.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(N),N=setTimeout(function(){S.highlight(),N=null},S.options.interval)}),S.highlight(),S}return s(A,[{key:"highlight",value:function(){var k=this;if(!this.quill.selection.composing){this.quill.update(p.default.sources.USER);var S=this.quill.getSelection();this.quill.scroll.descendants(y).forEach(function(N){N.highlight(k.options.highlight)}),this.quill.update(p.default.sources.SILENT),S!=null&&this.quill.setSelection(S,p.default.sources.SILENT)}}}]),A}(u.default);_.DEFAULTS={highlight:function(){return window.hljs==null?null:function(O){var A=window.hljs.highlightAuto(O);return A.value}}(),interval:1e3},n.CodeBlock=y,n.CodeToken=v,n.default=_},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var s=function A(j,k,S){j===null&&(j=Function.prototype);var N=Object.getOwnPropertyDescriptor(j,k);if(N===void 0){var E=Object.getPrototypeOf(j);return E===null?void 0:A(E,k,S)}else{if("value"in N)return N.value;var T=N.get;return T===void 0?void 0:T.call(S)}},o=function(){function A(j,k){for(var S=0;S<k.length;S++){var N=k[S];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(j,N.key,N)}}return function(j,k,S){return k&&A(j.prototype,k),S&&A(j,S),j}}(),l=a(3),c=w(l),h=a(8),p=w(h),d=a(43),u=w(d),f=a(15),x=a(41),b=w(x);function w(A){return A&&A.__esModule?A:{default:A}}function g(A,j){if(!(A instanceof j))throw new TypeError("Cannot call a class as a function")}function m(A,j){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:A}function y(A,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);A.prototype=Object.create(j&&j.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(A,j):A.__proto__=j)}var v=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],_=function(A){y(j,A);function j(k,S){g(this,j),S.modules.toolbar!=null&&S.modules.toolbar.container==null&&(S.modules.toolbar.container=v);var N=m(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,k,S));return N.quill.container.classList.add("ql-bubble"),N}return o(j,[{key:"extendToolbar",value:function(S){this.tooltip=new O(this.quill,this.options.bounds),this.tooltip.root.appendChild(S.container),this.buildButtons([].slice.call(S.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(S.container.querySelectorAll("select")),b.default)}}]),j}(u.default);_.DEFAULTS=(0,c.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(j){j?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var O=function(A){y(j,A);function j(k,S){g(this,j);var N=m(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,k,S));return N.quill.on(p.default.events.EDITOR_CHANGE,function(E,T,C,D){if(E===p.default.events.SELECTION_CHANGE)if(T!=null&&T.length>0&&D===p.default.sources.USER){N.show(),N.root.style.left="0px",N.root.style.width="",N.root.style.width=N.root.offsetWidth+"px";var z=N.quill.getLines(T.index,T.length);if(z.length===1)N.position(N.quill.getBounds(T));else{var V=z[z.length-1],G=N.quill.getIndex(V),U=Math.min(V.length()-1,T.index+T.length-G),M=N.quill.getBounds(new f.Range(G,U));N.position(M)}}else document.activeElement!==N.textbox&&N.quill.hasFocus()&&N.hide()}),N}return o(j,[{key:"listen",value:function(){var S=this;s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){S.root.classList.remove("ql-editing")}),this.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!S.root.classList.contains("ql-hidden")){var N=S.quill.getSelection();N!=null&&S.position(S.quill.getBounds(N))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(S){var N=s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"position",this).call(this,S),E=this.root.querySelector(".ql-tooltip-arrow");if(E.style.marginLeft="",N===0)return N;E.style.marginLeft=-1*N-E.offsetWidth/2+"px"}}]),j}(d.BaseTooltip);O.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=O,n.default=_},function(r,n,a){r.exports=a(63)}]).default})})(lv);var kA=lv.exports,OA=Oe&&Oe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vl=Oe&&Oe.__assign||function(){return vl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},vl.apply(this,arguments)},TA=Oe&&Oe.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var s=arguments[t],o=0,l=s.length;o<l;o++,a++)n[a]=s[o];return n},xl=Oe&&Oe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Pr=xl(B),AA=xl(wm),vi=xl(EA),cv=xl(kA),CA=function(e){OA(t,e);function t(r){var n=e.call(this,r)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(s,o,l,c){var h,p,d,u;s==="text-change"?(p=(h=n).onEditorChangeText)===null||p===void 0||p.call(h,n.editor.root.innerHTML,o,c,n.unprivilegedEditor):s==="selection-change"&&((u=(d=n).onEditorChangeSelection)===null||u===void 0||u.call(d,o,c,n.unprivilegedEditor))};var a=n.isControlled()?r.value:r.defaultValue;return n.value=a!=null?a:"",n}return t.prototype.validateProps=function(r){var n;if(Pr.default.Children.count(r.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Pr.default.Children.count(r.children)){var a=Pr.default.Children.only(r.children);if(((n=a)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&r.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(r,n){var a=this,s;if(this.validateProps(r),!this.editor||this.state.generation!==n.generation)return!0;if("value"in r){var o=this.getEditorContents(),l=(s=r.value,s!=null?s:"");this.isEqualValue(l,o)||this.setEditorContents(this.editor,l)}return r.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,r.readOnly),TA(this.cleanProps,this.dirtyProps).some(function(c){return!vi.default(r[c],a.props[c])})},t.prototype.shouldComponentRegenerate=function(r){var n=this;return this.dirtyProps.some(function(a){return!vi.default(r[a],n.props[a])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(r,n){var a=this;if(this.editor&&this.shouldComponentRegenerate(r)){var s=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var l=this.regenerationSnapshot,s=l.delta,c=l.selection;delete this.regenerationSnapshot,this.instantiateEditor();var h=this.editor;h.setContents(s),uv(function(){return a.setEditorSelection(h,c)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(r,n){var a=new cv.default(r,n);return n.tabIndex!=null&&this.setEditorTabIndex(a,n.tabIndex),this.hookEditor(a),a},t.prototype.hookEditor=function(r){this.unprivilegedEditor=this.makeUnprivilegedEditor(r),r.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(r){r.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(r){return r&&r.ops},t.prototype.isEqualValue=function(r,n){return this.isDelta(r)&&this.isDelta(n)?vi.default(r.ops,n.ops):vi.default(r,n)},t.prototype.setEditorContents=function(r,n){var a=this;this.value=n;var s=this.getEditorSelection();typeof n=="string"?r.setContents(r.clipboard.convert(n)):r.setContents(n),uv(function(){return a.setEditorSelection(r,s)})},t.prototype.setEditorSelection=function(r,n){if(this.selection=n,n){var a=r.getLength();n.index=Math.max(0,Math.min(n.index,a-1)),n.length=Math.max(0,Math.min(n.length,a-1-n.index)),r.setSelection(n)}},t.prototype.setEditorTabIndex=function(r,n){var a,s;!((s=(a=r)===null||a===void 0?void 0:a.scroll)===null||s===void 0)&&s.domNode&&(r.scroll.domNode.tabIndex=n)},t.prototype.setEditorReadOnly=function(r,n){n?r.disable():r.enable()},t.prototype.makeUnprivilegedEditor=function(r){var n=r;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var r=AA.default.findDOMNode(this.editingArea);if(!r)throw new Error("Cannot find element for editing area");if(r.nodeType===3)throw new Error("Editing area cannot be a text node");return r},t.prototype.renderEditingArea=function(){var r=this,n=this.props,a=n.children,s=n.preserveWhitespace,o=this.state.generation,l={key:o,ref:function(c){r.editingArea=c}};return Pr.default.Children.count(a)?Pr.default.cloneElement(Pr.default.Children.only(a),l):s?Pr.default.createElement("pre",vl({},l)):Pr.default.createElement("div",vl({},l))},t.prototype.render=function(){var r;return Pr.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(r=this.props.className,r!=null?r:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(r,n,a,s){var o,l;if(this.editor){var c=this.isDelta(this.value)?s.getContents():s.getHTML();c!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=c,(l=(o=this.props).onChange)===null||l===void 0||l.call(o,r,n,a,s))}},t.prototype.onEditorChangeSelection=function(r,n,a){var s,o,l,c,h,p;if(this.editor){var d=this.getEditorSelection(),u=!d&&r,f=d&&!r;vi.default(r,d)||(this.selection=r,(o=(s=this.props).onChangeSelection)===null||o===void 0||o.call(s,r,n,a),u?(c=(l=this.props).onFocus)===null||c===void 0||c.call(l,r,n,a):f&&((p=(h=this.props).onBlur)===null||p===void 0||p.call(h,d,n,a)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=cv.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(Pr.default.Component);function uv(e){Promise.resolve().then(e)}var PA=CA;const RA=Le(PA);function Lt({value:e,onChange:t,placeholder:r,className:n=""}){const a=B.useRef(null),s={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["link"],["clean"]]},o=["header","bold","italic","underline","strike","list","bullet","color","background","align","link"];return i.jsx("div",{className:`html-editor-wrapper ${n}`,children:i.jsx(RA,{ref:a,theme:"snow",value:e||"",onChange:t,modules:s,formats:o,placeholder:r||"Escribe aqu..."})})}function Se({text:e,className:t=""}){return i.jsx("p",{className:`text-xs text-gray-500 mt-1 ${t}`,children:e})}function bl({value:e,onChange:t,options:r,placeholder:n="Seleccionar...",className:a="",disabled:s=!1,icon:o}){return i.jsxs("div",{className:`relative ${a}`,children:[o&&i.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none",children:o}),i.jsxs("select",{value:e,onChange:l=>t(l.target.value),disabled:s,className:`w-full input-field appearance-none cursor-pointer ${o?"pl-9":""} ${s?"opacity-50 cursor-not-allowed":""}`,children:[n&&i.jsx("option",{value:"",children:n}),r.map(l=>i.jsx("option",{value:l.value,children:l.label},l.value))]}),i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:i.jsx(li,{className:"w-5 h-5 text-gray-400"})})]})}const Rr="master-data",_t={categories:{getAll(e){return P(this,null,function*(){const t={};(e==null?void 0:e.active)!==void 0&&e.active!==null&&(t.active=e.active.toString()),e!=null&&e.search&&(t.search=e.search),(e==null?void 0:e.parent_id)!==void 0&&(t.parent_id=e.parent_id||"null"),e!=null&&e.order_by&&(t.order_by=e.order_by),(e==null?void 0:e.order_asc)!==void 0&&(t.order_asc=e.order_asc.toString()),e!=null&&e.page&&(t.page=e.page.toString()),e!=null&&e.limit&&(t.limit=e.limit.toString());const r=new URLSearchParams(t).toString(),n=r?`${Rr}/categories?${r}`:`${Rr}/categories`;return be(n,{method:"GET"})})},getById(e){return P(this,null,function*(){return be(`${Rr}/categories/${e}`,{method:"GET"})})},create(e){return P(this,null,function*(){return be(`${Rr}/categories`,{method:"POST",body:e})})},update(e,t){return P(this,null,function*(){return be(`${Rr}/categories/${e}`,{method:"PUT",body:t})})},delete(e){return P(this,null,function*(){return be(`${Rr}/categories/${e}`,{method:"DELETE"})})}},categoryAttributes:{getByCategory(e){return P(this,null,function*(){return be(`${Rr}/category-attributes?category_id=${e}`,{method:"GET"})})},create(e){return P(this,null,function*(){return be(`${Rr}/category-attributes`,{method:"POST",body:e})})},update(e,t){return P(this,null,function*(){return be(`${Rr}/category-attributes/${e}`,{method:"PUT",body:t})})},delete(e){return P(this,null,function*(){return be(`${Rr}/category-attributes/${e}`,{method:"DELETE"})})}}},LA="https://n8n.gisbrick.com/webhook/2255a095-c29f-47b4-82b6-15b16846cb74";function IA({register:e,watch:t,setValue:r,errors:n,productId:a}){const[s,o]=B.useState(!1),l=t("title"),c=t("handle"),h=t("product_url");if(!c&&l){const u=l.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").substring(0,100);r("handle",u,{shouldValidate:!1})}const p=()=>P(this,null,function*(){var k,S,N,E,T,C,D,z,V,G;const u={producto:l||"",html:h||""};if(!a)return null;const f=yield he.subcategoryProducts.getAll({product_id:a}),b=(Array.isArray(f)?f:(k=f==null?void 0:f.data)!=null?k:[])[0];if(!(b!=null&&b.subcategory_id))return null;const w=b.subcategory_id,[g,m,y,v]=yield Promise.all([he.subcategories.getById(w),he.subcategoryContent.getBySubcategoryId(w),he.subcategoryCriteria.getAll({subcategory_id:w}),he.categorySubcategories.getAll({subcategory_id:w})]),_=Array.isArray(y)?y:(S=y==null?void 0:y.data)!=null?S:[],O={nombre:(E=(N=g==null?void 0:g.title)!=null?N:g==null?void 0:g.name)!=null?E:"",lo_que_si_ayuda:(T=m==null?void 0:m.ayuda_html)!=null?T:"",aspectos_a_vigilar:(C=m==null?void 0:m.aspectos_html)!=null?C:""},A=Array.isArray(v)?v:(D=v==null?void 0:v.data)!=null?D:[],j=[];for(const U of A){const M=U==null?void 0:U.category_id;if(!M)continue;const R=yield _t.categories.getById(M),L=yield he.categoryContent.getByCategoryId(M);j.push({nombre:(z=R==null?void 0:R.name)!=null?z:"",lo_que_si_ayuda:(V=L==null?void 0:L.ayuda_html)!=null?V:"",aspectos_a_vigilar:(G=L==null?void 0:L.aspectos_html)!=null?G:""})}return{categorias:j,subcategoria:O,criterios:_.map(U=>{var M,R;return{nombre:(M=U.name)!=null?M:"",descripcion:(R=U.description)!=null?R:""}}),producto:u}}),d=()=>P(this,null,function*(){if(!(h!=null&&h.trim())){te.error("Indica la URL de ficha de producto para scrap antes de procesar.");return}if(window.confirm("Al procesar el producto, se borrar todo el contenido actual y se actualizar mediante IA en base al contenido de la pgina web configurada. Desea continuar?")){o(!0);try{const f=yield p();if(!f){te.error("Guarda el producto y asgnalo a una subcategora (pestaa Subcategoras) antes de procesar. El webhook necesita subcategora, criterios y categoras.");return}const x=yield fetch(LA,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!x.ok)throw new Error(`HTTP ${x.status}`);te.success("Producto enviado al proceso de scraping correctamente.")}catch(f){console.error(f),(f==null?void 0:f.name)==="TypeError"||/failed to fetch|network error|cors/i.test((f==null?void 0:f.message)||"")?te("La peticin de documentacin del producto se ha enviado. Vuelve en unos minutos y, si todo ha ido bien, vers la informacin del producto generada.",{icon:"",duration:6e3}):te.error(f.message||"Error al invocar el webhook de procesamiento.")}finally{o(!1)}}});return i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Informacin Bsica"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"rounded-lg border-2 border-amber-200 bg-amber-50/80 p-4 space-y-4",children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-amber-800/90",children:"Lo fundamental"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-amber-900 mb-1",children:"Ttulo del Producto *"}),i.jsx("input",de(X({},e("title",{required:"El ttulo es obligatorio"})),{className:"input-field bg-white border-amber-300 focus:border-amber-500 focus:ring-amber-500/20",placeholder:"Nombre del producto"})),i.jsx(Se,{text:"Nombre principal del producto que aparecer en la tienda."}),n.title&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.title.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-amber-900 mb-1",children:"URL de Ficha de Producto para scrap"}),i.jsxs("div",{className:"flex gap-2 items-start",children:[i.jsx("input",de(X({type:"url"},e("product_url")),{className:"input-field flex-1 bg-white border-amber-300 focus:border-amber-500 focus:ring-amber-500/20",placeholder:"https://ejemplo.com/producto"})),i.jsxs("button",{type:"button",onClick:d,disabled:s||!(h!=null&&h.trim())||!a,className:"btn-primary whitespace-nowrap flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:a?void 0:"Guarda el producto primero para poder procesarlo",children:[s?i.jsx(bd,{className:"w-4 h-4 animate-spin"}):null,"Procesar producto"]})]}),i.jsx(Se,{text:"URL de la ficha del producto para scraping. El botn enva categoras, subcategora, criterios y producto al webhook de n8n."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subttulo"}),i.jsx("input",de(X({},e("subtitle")),{className:"input-field",placeholder:"Subttulo opcional"})),i.jsx(Se,{text:"Texto complementario que aparecer debajo del ttulo."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin breve"}),i.jsx(Lt,{value:t("description_short")||"",onChange:u=>r("description_short",u),placeholder:"Descripcin breve en HTML para listados y resmenes..."}),i.jsx(Se,{text:"Descripcin corta en HTML para vistas resumidas y SEO. Recomendado contenido breve."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin extensa"}),i.jsx(Lt,{value:t("description_html")||"",onChange:u=>r("description_html",u),placeholder:"Descripcin detallada del producto en HTML..."}),i.jsx(Se,{text:"Descripcin completa del producto en formato HTML (ficha de producto)."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado *"}),i.jsx(bl,{value:t("status"),onChange:u=>r("status",u),options:[{value:"draft",label:"Borrador"},{value:"active",label:"Activo"},{value:"archived",label:"Archivado"}],placeholder:"Seleccionar estado"}),i.jsx(Se,{text:"Estado del producto: Borrador (no visible), Activo (visible en la tienda), Archivado (oculto)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marca"}),i.jsx("input",de(X({},e("vendor")),{className:"input-field",placeholder:"Marca del producto"})),i.jsx(Se,{text:"Marca o fabricante del producto (texto libre)."})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Shopify"}),i.jsx("input",de(X({type:"number"},e("shopify_product_id",{valueAsNumber:!0})),{className:"input-field",placeholder:"ID del producto en Shopify"})),i.jsx(Se,{text:"ID numrico del producto en Shopify (opcional)."})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Handle (URL amigable)"}),i.jsx("input",de(X({},e("handle")),{className:"input-field font-mono text-sm max-w-md",placeholder:"producto-ejemplo"})),i.jsx(Se,{text:"Slug para la URL. Se genera automticamente desde el ttulo si est vaco."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),i.jsx(wl,{tags:t("tags")||[],onTagsChange:u=>r("tags",u),placeholder:"Aadir tag (presiona Enter)"}),i.jsx(Se,{text:"Tags libres para organizar y filtrar productos."})]})]}),i.jsx("div",{className:"section-title mt-8",children:"Marketing y comunicacin"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Puntos clave de venta"}),i.jsx(wl,{tags:t("selling_points")||[],onTagsChange:u=>r("selling_points",u),placeholder:"Aadir punto de venta (Enter)"}),i.jsx(Se,{text:"Frases cortas que destacan las ventajas del producto."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Argumentos de venta (texto enriquecido)"}),i.jsx(Lt,{value:t("sales_arguments_rich")||"",onChange:u=>r("sales_arguments_rich",u),placeholder:"Argumentos de venta en HTML..."}),i.jsx(Se,{text:"Texto de venta detallado en formato HTML."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ngulos creativos / content hooks"}),i.jsx("textarea",de(X({},e("content_hooks")),{className:"input-field min-h-[80px]",placeholder:"Ideas de ngulos para contenido y redes..."})),i.jsx(Se,{text:"Ideas creativas para comunicar el producto."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hashtags sugeridos"}),i.jsx(wl,{tags:t("hashtags_sugeridos")||[],onTagsChange:u=>r("hashtags_sugeridos",u),placeholder:"Aadir hashtag (Enter)"}),i.jsx(Se,{text:"Hashtags recomendados para redes sociales."})]})]}),i.jsx("div",{className:"section-title mt-8",children:"Uso interno"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),i.jsx("textarea",de(X({},e("notes")),{className:"input-field min-h-[80px]",placeholder:"Notas internas sobre el producto..."}))]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags internos"}),i.jsx(wl,{tags:t("internal_tags")||[],onTagsChange:u=>r("internal_tags",u),placeholder:"Aadir tag interno (Enter)"}),i.jsx(Se,{text:"Etiquetas para organizacin interna (no visibles en tienda)."})]})]})]})}function wl({tags:e,onTagsChange:t,placeholder:r}){const[n,a]=B.useState(""),s=()=>{n.trim()&&!e.includes(n.trim())&&(t([...e,n.trim()]),a(""))},o=l=>{t(e.filter(c=>c!==l))};return i.jsxs("div",{children:[i.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map((l,c)=>i.jsxs("span",{className:"inline-flex items-center gap-1 bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm",children:[l,i.jsx("button",{type:"button",onClick:()=>o(l),className:"hover:text-red-600",children:""})]},c))}),i.jsx("input",{type:"text",value:n,onChange:l=>a(l.target.value),onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),s())},placeholder:r,className:"input-field"})]})}function DA({watch:e,setValue:t}){const r=e("options")||[],[n,a]=B.useState(0),s=()=>{const d={name:"",position:r.length,values:[]};t("options",[...r,d]),a(r.length)},o=(d,u,f)=>{const x=[...r];x[d]=de(X({},x[d]),{[u]:f}),t("options",x)},l=(d,u)=>{o(d,"values",u)},c=d=>{const u=r.filter((f,x)=>x!==d).map((f,x)=>de(X({},f),{position:x}));t("options",u),n===d?a(null):n!==null&&n>d&&a(n-1)},h=(d,u)=>{const f=r[d],x=(f==null?void 0:f.values)||[];!u.trim()||x.includes(u.trim())||l(d,[...x,u.trim()])},p=(d,u)=>{var x;const f=(((x=r[d])==null?void 0:x.values)||[]).filter(b=>b!==u);l(d,f)};return i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("div",{className:"section-title mb-0",children:"Opciones del producto"}),i.jsxs("button",{type:"button",onClick:s,className:"btn-secondary flex items-center gap-2 text-sm",children:[i.jsx(bt,{className:"w-4 h-4"}),"Aadir opcin"]})]}),i.jsx(Se,{text:"Las opciones definen las variaciones del producto (ej. Talla, Color). Cada opcin tiene un nombre y una lista de valores. Las variantes usan option1, option2, option3 para indicar el valor elegido.",className:"mb-4"}),r.length===0?i.jsx("div",{className:"text-center py-6 text-gray-500 text-sm",children:"No hay opciones. Aade al menos una (ej. Color con valores Plata, Negro) para definir variantes."}):i.jsx("div",{className:"space-y-3",children:r.map((d,u)=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[i.jsx("input",{type:"text",value:d.name||"",onChange:f=>o(u,"name",f.target.value),className:"input-field text-sm flex-1 max-w-[200px]",placeholder:"Nombre (ej: Color, Talla)"}),i.jsxs("span",{className:"text-xs text-gray-500",children:[Array.isArray(d.values)?d.values.length:0," valores"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>a(n===u?null:u),className:"p-1 text-gray-600 hover:bg-gray-100 rounded text-sm",children:n===u?"Ocultar":"Editar valores"}),i.jsx("button",{type:"button",onClick:()=>c(u),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:i.jsx(ht,{className:"w-4 h-4"})})]})]}),n===u&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Valores"}),i.jsx(MA,{values:d.values||[],onAdd:f=>h(u,f),onRemove:f=>p(u,f),placeholder:`Aadir valor para ${d.name||"esta opcin"} (Enter)`})]})]},u))})]})}function MA({values:e,onAdd:t,onRemove:r,placeholder:n}){const[a,s]=B.useState(""),o=()=>{a.trim()&&(t(a.trim()),s(""))};return i.jsxs("div",{children:[i.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map((l,c)=>i.jsxs("span",{className:"inline-flex items-center gap-1 bg-primary-50 text-primary-800 px-2 py-1 rounded text-sm",children:[l,i.jsx("button",{type:"button",onClick:()=>r(l),className:"hover:text-primary-600",children:""})]},c))}),i.jsx("input",{type:"text",value:a,onChange:l=>s(l.target.value),onKeyDown:l=>l.key==="Enter"&&(l.preventDefault(),o()),placeholder:n,className:"input-field text-sm"})]})}function $A({watch:e,setValue:t}){const r=e("variants")||[],[n,a]=B.useState(null),s=()=>{const h={title:"",sku:"",barcode:"",price:0,compare_at_price:void 0,inventory_quantity:0,inventory_policy:"deny",option1:"",option2:"",option3:"",weight:void 0,weight_unit:"kg",position:r.length,taxable:!0,requires_shipping:!0};t("variants",[...r,h]),a(r.length)},o=(h,p,d)=>{const u=[...r];u[h]=de(X({},u[h]),{[p]:d}),t("variants",u)},l=h=>{t("variants",r.filter((p,d)=>d!==h)),n===h&&a(null)},c=h=>{const g=r[h],{id:d,created_at:u,updated_at:f,product_id:x}=g,b=Lr(g,["id","created_at","updated_at","product_id"]),w=de(X({},b),{position:r.length,inventory_quantity:typeof b.inventory_quantity=="number"?b.inventory_quantity:0});t("variants",[...r,w]),a(r.length)};return i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("div",{className:"section-title mb-0",children:"Variantes del Producto"}),i.jsxs("button",{type:"button",onClick:s,className:"btn-secondary flex items-center gap-2 text-sm",children:[i.jsx(bt,{className:"w-4 h-4"}),"Aadir Variante"]})]}),i.jsx(Se,{text:"Las variantes permiten vender el mismo producto con diferentes opciones (talla, color, sabor, etc.). Cada variante puede tener su propio precio, SKU y stock.",className:"mb-4"}),r.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500",children:i.jsx("p",{children:'No hay variantes. Haz clic en "Aadir Variante" para crear una.'})}):i.jsx("div",{className:"space-y-4",children:r.map((h,p)=>{var d;return i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("h4",{className:"font-medium text-gray-900",children:["Variante ",p+1," ",h.title&&`- ${h.title}`]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>c(p),className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Duplicar variante",children:i.jsx(E_,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",onClick:()=>a(n===p?null:p),className:"p-1 text-primary-600 hover:bg-primary-50 rounded",title:"Editar",children:i.jsx(P_,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",onClick:()=>l(p),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Eliminar",children:i.jsx(ht,{className:"w-4 h-4"})})]})]}),n===p?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ttulo"}),i.jsx("input",{type:"text",value:h.title||"",onChange:u=>o(p,"title",u.target.value),className:"input-field text-sm",placeholder:"ej: Pequeo / Rojo"}),i.jsx(Se,{text:"Nombre descriptivo de la variante que combina las opciones.",className:"text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"SKU"}),i.jsx("input",{type:"text",value:h.sku||"",onChange:u=>o(p,"sku",u.target.value),className:"input-field text-sm"}),i.jsx(Se,{text:"Cdigo nico de identificacin del producto (Stock Keeping Unit).",className:"text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Cdigo de barras"}),i.jsx("input",{type:"text",value:h.barcode||"",onChange:u=>o(p,"barcode",u.target.value),className:"input-field text-sm",placeholder:"EAN, UPC..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Precio ()"}),i.jsx("input",{type:"number",step:"0.01",value:h.price||0,onChange:u=>o(p,"price",parseFloat(u.target.value)||0),className:"input-field text-sm"}),i.jsx(Se,{text:"Precio de venta de esta variante en euros.",className:"text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Precio Comparacin ()"}),i.jsx("input",{type:"number",step:"0.01",value:h.compare_at_price||0,onChange:u=>o(p,"compare_at_price",parseFloat(u.target.value)||0),className:"input-field text-sm"}),i.jsx(Se,{text:"Precio original (tachado) para mostrar descuentos. Djalo en 0 si no hay descuento.",className:"text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Stock"}),i.jsx("input",{type:"number",value:h.inventory_quantity||0,onChange:u=>o(p,"inventory_quantity",parseInt(u.target.value)||0),className:"input-field text-sm"}),i.jsx(Se,{text:"Cantidad disponible en inventario para esta variante.",className:"text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Poltica de Inventario"}),i.jsxs("select",{value:h.inventory_policy||"deny",onChange:u=>o(p,"inventory_policy",u.target.value),className:"input-field text-sm",children:[i.jsx("option",{value:"deny",children:"Denegar cuando no hay stock"}),i.jsx("option",{value:"continue",children:"Continuar vendiendo"})]}),i.jsx(Se,{text:"Denegar: no permite comprar sin stock. Continuar: permite comprar aunque no haya stock.",className:"text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Opcin 1"}),i.jsx("input",{type:"text",value:h.option1||"",onChange:u=>o(p,"option1",u.target.value),className:"input-field text-sm",placeholder:"ej: Talla"}),i.jsx(Se,{text:"Primera opcin de la variante (ej: Talla S, Color Rojo, Sabor Chocolate).",className:"text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Opcin 2"}),i.jsx("input",{type:"text",value:h.option2||"",onChange:u=>o(p,"option2",u.target.value),className:"input-field text-sm",placeholder:"ej: Color"}),i.jsx(Se,{text:"Segunda opcin de la variante (si aplica).",className:"text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Opcin 3"}),i.jsx("input",{type:"text",value:h.option3||"",onChange:u=>o(p,"option3",u.target.value),className:"input-field text-sm",placeholder:"ej: Material"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Peso"}),i.jsx("input",{type:"number",step:"0.01",value:(d=h.weight)!=null?d:"",onChange:u=>o(p,"weight",u.target.value?parseFloat(u.target.value):void 0),className:"input-field text-sm",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unidad de peso"}),i.jsxs("select",{value:h.weight_unit||"kg",onChange:u=>o(p,"weight_unit",u.target.value),className:"input-field text-sm",children:[i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"lb",children:"lb"}),i.jsx("option",{value:"oz",children:"oz"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("label",{className:"inline-flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:h.taxable!==!1,onChange:u=>o(p,"taxable",u.target.checked),className:"rounded border-gray-300"}),i.jsx("span",{className:"text-xs text-gray-700",children:"Sujeto a impuestos"})]}),i.jsxs("label",{className:"inline-flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:h.requires_shipping!==!1,onChange:u=>o(p,"requires_shipping",u.target.checked),className:"rounded border-gray-300"}),i.jsx("span",{className:"text-xs text-gray-700",children:"Requiere envo"})]})]})]}):i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[h.sku&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"SKU:"})," ",i.jsx("span",{className:"font-mono",children:h.sku})]}),h.price!==void 0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Precio:"})," ",i.jsxs("span",{className:"font-semibold",children:[h.price.toFixed(2)," "]})]}),h.inventory_quantity!==void 0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Stock:"})," ",i.jsx("span",{children:h.inventory_quantity})]})]})]},p)})})]})}function UA({watch:e,setValue:t}){const r=e("images")||[],n=e("variants")||[],a=()=>{const c={src:"",alt_text:"",position:r.length};t("images",[...r,c])},s=(c,h,p)=>{const d=[...r];d[c]=de(X({},d[c]),{[h]:p}),t("images",d)},o=c=>{t("images",r.filter((h,p)=>p!==c))},l=(c,h)=>{if(h==="up"&&c===0||h==="down"&&c===r.length-1)return;const p=h==="up"?c-1:c+1,d=[...r];[d[c],d[p]]=[d[p],d[c]],d[c].position=c,d[p].position=p,t("images",d)};return i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("div",{className:"section-title mb-0",children:"Imgenes del Producto"}),i.jsxs("button",{type:"button",onClick:a,className:"btn-secondary flex items-center gap-2 text-sm",children:[i.jsx(bt,{className:"w-4 h-4"}),"Aadir Imagen"]})]}),i.jsx(Se,{text:"Aade imgenes del producto usando URLs. La primera imagen ser la principal. Puedes reordenarlas con los botones  y .",className:"mb-4"}),r.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(Ig,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),i.jsx("p",{children:'No hay imgenes. Haz clic en "Aadir Imagen" para agregar una URL.'})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((c,h)=>{var p,d;return i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Imagen ",h+1]}),i.jsx("button",{type:"button",onClick:()=>o(h),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:i.jsx(ht,{className:"w-4 h-4"})})]}),c.src&&i.jsx("div",{className:"mb-3",children:i.jsx("img",{src:c.src,alt:c.alt_text||"Product image",className:"w-full h-32 object-cover rounded border border-gray-200",onError:u=>{u.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23ddd" width="100" height="100"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999"%3EImagen no disponible%3C/text%3E%3C/svg%3E'}})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"URL de la Imagen"}),i.jsx("input",{type:"url",value:c.src||"",onChange:u=>s(h,"src",u.target.value),className:"input-field text-sm",placeholder:"https://ejemplo.com/imagen.jpg"}),i.jsx(Se,{text:"URL completa de la imagen (debe ser accesible pblicamente).",className:"text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Texto Alternativo"}),i.jsx("input",{type:"text",value:c.alt_text||"",onChange:u=>s(h,"alt_text",u.target.value),className:"input-field text-sm",placeholder:"Descripcin de la imagen"}),i.jsx(Se,{text:"Descripcin de la imagen para accesibilidad y SEO. Describe el contenido visual.",className:"text-xs"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ancho (px)"}),i.jsx("input",{type:"number",value:(p=c.width)!=null?p:"",onChange:u=>s(h,"width",u.target.value?parseInt(u.target.value,10):void 0),className:"input-field text-sm",placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Alto (px)"}),i.jsx("input",{type:"number",value:(d=c.height)!=null?d:"",onChange:u=>s(h,"height",u.target.value?parseInt(u.target.value,10):void 0),className:"input-field text-sm",placeholder:""})]})]}),n.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Asociar a variante"}),i.jsxs("select",{value:c.variant_id||"",onChange:u=>s(h,"variant_id",u.target.value||void 0),className:"input-field text-sm",children:[i.jsx("option",{value:"",children:"Imagen del producto (todas las variantes)"}),n.map((u,f)=>i.jsxs("option",{value:u.id,children:[u.title||`Variante ${f+1}`," ",u.sku?`(${u.sku})`:""]},u.id||f))]}),i.jsx(Se,{text:"Si eliges una variante, esta imagen se mostrar solo para esa variante.",className:"text-xs"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>l(h,"up"),disabled:h===0,className:"flex-1 btn-secondary text-xs disabled:opacity-50",children:" Subir"}),i.jsx("button",{type:"button",onClick:()=>l(h,"down"),disabled:h===r.length-1,className:"flex-1 btn-secondary text-xs disabled:opacity-50",children:" Bajar"})]})]})]},h)})})]})}const Kd="rating",Gd="characteristic";function qA({watch:e,setValue:t}){const r=e("metafields")||[],n=r.filter(p=>p.namespace===Kd),a=r.filter(p=>p.namespace===Gd),s=p=>{t("metafields",p)},o=p=>{const d={namespace:p,key:"",value:"",value_type:"string"};s([...r,d])},l=(p,d,u)=>{const f=[...r],x=f[p];x&&(f[p]=de(X({},x),{[d]:u}),s(f))},c=p=>{s(r.filter((d,u)=>u!==p))},h=(p,d)=>{let u=0;for(let f=0;f<r.length;f++)if(r[f].namespace===p){if(u===d)return f;u++}return-1};return i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Criterios de valoracin y caractersticas tcnicas"}),i.jsx(Se,{text:"Los criterios de valoracin son puntuaciones (ej. 1-5) del producto. Las caractersticas tcnicas son datos descriptivos (dimensiones, especificaciones, etc.). Se guardan como metadatos del producto.",className:"mb-4"}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[i.jsx(Ga,{className:"w-4 h-4 text-amber-500"}),"Criterios de valoracin"]}),i.jsxs("button",{type:"button",onClick:()=>o(Kd),className:"btn-secondary text-xs flex items-center gap-1",children:[i.jsx(bt,{className:"w-3 h-3"}),"Aadir criterio"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Ej.: Precio, Nivel de ruido, Eficacia de filtracin. Valor tpico 1-5."}),n.length===0?i.jsx("div",{className:"text-sm text-gray-500 py-3 border border-dashed border-gray-200 rounded-lg text-center",children:"Ningn criterio. Aade uno para valorar el producto."}):i.jsx("div",{className:"space-y-2",children:n.map((p,d)=>{var f;const u=h(Kd,d);return i.jsxs("div",{className:"flex items-center gap-2 flex-wrap border border-gray-100 rounded-lg p-2",children:[i.jsx("input",{type:"text",value:p.key||"",onChange:x=>l(u,"key",x.target.value),className:"input-field text-sm flex-1 min-w-[140px]",placeholder:"Nombre del criterio"}),i.jsxs("select",{value:(f=p.value)!=null?f:"",onChange:x=>l(u,"value",x.target.value),className:"input-field text-sm w-20",children:[i.jsx("option",{value:"",children:""}),[1,2,3,4,5].map(x=>i.jsx("option",{value:String(x),children:x},x))]}),i.jsx("span",{className:"text-xs text-gray-400",children:"/ 5"}),i.jsx("button",{type:"button",onClick:()=>c(u),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:i.jsx(ht,{className:"w-4 h-4"})})]},u)})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[i.jsx(T_,{className:"w-4 h-4 text-blue-500"}),"Caractersticas tcnicas"]}),i.jsxs("button",{type:"button",onClick:()=>o(Gd),className:"btn-secondary text-xs flex items-center gap-1",children:[i.jsx(bt,{className:"w-3 h-3"}),"Aadir caracterstica"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Ej.: Potencia, Dimensiones, Peso, Fabricante, Garanta."}),a.length===0?i.jsx("div",{className:"text-sm text-gray-500 py-3 border border-dashed border-gray-200 rounded-lg text-center",children:"Ninguna caracterstica. Aade clave y valor."}):i.jsx("div",{className:"space-y-2",children:a.map((p,d)=>{const u=h(Gd,d);return i.jsxs("div",{className:"flex items-center gap-2 flex-wrap border border-gray-100 rounded-lg p-2",children:[i.jsx("input",{type:"text",value:p.key||"",onChange:f=>l(u,"key",f.target.value),className:"input-field text-sm flex-1 min-w-[160px]",placeholder:"Nombre (ej: Potencia mxima)"}),i.jsx("input",{type:"text",value:p.value||"",onChange:f=>l(u,"value",f.target.value),className:"input-field text-sm flex-1 min-w-[160px]",placeholder:"Valor (ej: 50 W)"}),i.jsx("button",{type:"button",onClick:()=>c(u),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:i.jsx(ht,{className:"w-4 h-4"})})]},u)})})]})]})}function BA({productId:e}){const[t,r]=B.useState([]),[n,a]=B.useState([]),[s,o]=B.useState(!0),[l,c]=B.useState(1),[h,p]=B.useState(1),[d,u]=B.useState(0),[f,x]=B.useState("");B.useEffect(()=>{const y=setTimeout(()=>{b()},300);return()=>clearTimeout(y)},[e,l,f]),B.useEffect(()=>{e?w():o(!1)},[e]);const b=()=>P(this,null,function*(){try{const y=yield he.subcategories.getAll({active:null,search:f||void 0,page:l,limit:20});let v=[];Array.isArray(y)?(v=y.sort((_,O)=>(_.title||"").localeCompare(O.title||"")),r(v),p(1),u(v.length)):y.data&&y.pagination?(v=y.data.sort((_,O)=>(_.title||"").localeCompare(O.title||"")),r(v),p(y.pagination.totalPages),u(y.pagination.total)):(r([]),p(1),u(0))}catch(y){console.error("Error al cargar subcategoras:",y),te.error("Error al cargar subcategoras"),r([]),p(1),u(0)}}),w=()=>P(this,null,function*(){if(e){o(!0);try{const y=yield he.subcategoryProducts.getAll({product_id:e});a(Array.isArray(y)?y:y.data||[])}catch(y){console.error("Error al cargar subcategoras asignadas:",y)}finally{o(!1)}}}),g=y=>P(this,null,function*(){if(!e){te.error("Debes guardar el producto primero para asignar subcategoras");return}const v=n.find(_=>_.subcategory_id===y);try{if(v)yield he.subcategoryProducts.delete(v.id),te.success("Subcategora desasignada correctamente"),yield w();else{const _=n.length;yield he.subcategoryProducts.create({subcategory_id:y,product_id:e,position:_}),te.success("Subcategora asignada correctamente"),yield w()}}catch(_){te.error("Error al actualizar subcategora: "+_.message)}}),m=new Set(n.map(y=>y.subcategory_id));return s&&!e?i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Subcategoras"}),i.jsx("div",{className:"text-center py-4",children:i.jsx("div",{className:"inline-block w-6 h-6 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})})]}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Subcategoras"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Asigna este producto a subcategoras. Los productos asignados a una subcategora se copiarn automticamente cuando esa subcategora se asigne a una categora."}),!e&&i.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:i.jsxs("p",{className:"text-sm text-yellow-800",children:[i.jsx("strong",{children:"Nota:"})," Debes guardar el producto primero para poder asignar subcategoras."]})}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Buscar subcategora por nombre...",value:f,onChange:y=>{x(y.target.value),c(1)},className:"input-field pl-10"})]})}),t.length===0?i.jsx("p",{className:"text-sm text-gray-500 italic",children:f?`No se encontraron subcategoras que coincidan con "${f}"`:"No hay subcategoras disponibles. Crea subcategoras desde el men de Catlogo."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-2",children:t.map(y=>{const v=m.has(y.id);return i.jsx("div",{className:`flex items-center justify-between p-4 border rounded-lg transition-colors ${v?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"} ${e?"":"opacity-50"}`,children:i.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[i.jsx("label",{className:"flex items-center cursor-pointer",children:i.jsx("input",{type:"checkbox",checked:v,onChange:()=>g(y.id),disabled:!e,className:"w-5 h-5 text-primary-600 rounded focus:ring-primary-500 cursor-pointer disabled:cursor-not-allowed"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900",children:y.title}),y.slug&&i.jsxs("div",{className:"text-xs text-gray-400 font-mono mt-1",children:["/",y.slug]}),y.description_html&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:[y.description_html.replace(/<[^>]*>/g,"").substring(0,80),"..."]})]})]})},y.id)})}),i.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[i.jsxs("button",{type:"button",onClick:y=>{y.preventDefault(),y.stopPropagation(),c(v=>Math.max(1,v-1))},disabled:l===1||h<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[i.jsx(S_,{className:"w-4 h-4"}),"Anterior"]}),i.jsxs("span",{className:"text-gray-600 text-sm",children:["Pgina ",l," de ",h," ",d>0&&`(${d} total)`]}),i.jsxs("button",{type:"button",onClick:y=>{y.preventDefault(),y.stopPropagation(),c(v=>Math.min(h,v+1))},disabled:l===h||h<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:["Siguiente",i.jsx(Go,{className:"w-4 h-4"})]})]})]})]})})}const as={syncGlobalWithProgress(e){return P(this,null,function*(){return md("shopify-sync",{method:"POST",body:{type:"global"}},e)})},syncGlobal(){return P(this,null,function*(){const e=yield this.syncGlobalWithProgress(()=>{});return e.type==="done"&&e.results?{ok:!0,results:e.results}:{ok:!1,error:"Traspaso sin resultado"}})},syncCategory(e){return P(this,null,function*(){return be("shopify-sync",{method:"POST",body:{type:"category",id:e}})})},syncCategoryTreeWithProgress(e,t){return P(this,null,function*(){return md("shopify-sync",{method:"POST",body:{type:"category-tree",id:e}},t)})},syncSubcategory(e){return P(this,null,function*(){return be("shopify-sync",{method:"POST",body:{type:"subcategory",id:e}})})},syncSubcategoryTreeWithProgress(e,t){return P(this,null,function*(){return md("shopify-sync",{method:"POST",body:{type:"subcategory-tree",id:e}},t)})},syncProduct(e){return P(this,null,function*(){return be("shopify-sync",{method:"POST",body:{type:"product",id:e}})})}};function _l({product:e,onSuccess:t,onCancel:r}){const[n,a]=B.useState(!1),[s,o]=B.useState(!1),[l,c]=B.useState(e==null?void 0:e.id),[h,p]=B.useState(e),d=l||(e==null?void 0:e.id),{register:u,handleSubmit:f,watch:x,setValue:b,formState:{errors:w}}=ol({defaultValues:e||{status:"draft",vendor:"alergIA-club",tags:[],selling_points:[],hashtags_sugeridos:[],internal_tags:[],variants:[],images:[],options:[],metafields:[]}}),g=y=>{var _,O,A,j;const v=X({},y);return(_=v.options)!=null&&_.length&&(v.options=v.options.map(k=>{var S;return{name:k.name,position:(S=k.position)!=null?S:0,values:Array.isArray(k.values)?k.values:[]}})),(O=v.variants)!=null&&O.length&&(v.variants=v.variants.map(k=>{const D=k,{id:S,created_at:N,updated_at:E,product_id:T}=D;return Lr(D,["id","created_at","updated_at","product_id"])})),(A=v.images)!=null&&A.length&&(v.images=v.images.map(k=>de(X({},k),{variant_id:k.variant_id&&String(k.variant_id).match(/^[0-9a-f-]{36}$/i)?k.variant_id:void 0}))),(j=v.metafields)!=null&&j.length&&(v.metafields=v.metafields.map(k=>{var S;return{namespace:k.namespace,key:k.key,value:(S=k.value)!=null?S:"",value_type:k.value_type||"string"}})),v},m=y=>P(this,null,function*(){a(!0);try{const v=g(y);let _;e!=null&&e.id?(_=yield wt.update(e.id,v),te.success("Producto actualizado correctamente"),c(e.id)):(_=yield wt.create(v),te.success("Producto creado correctamente"),c(_.id)),p(_),t(_)}catch(v){te.error(v.message||"Error al guardar el producto")}finally{a(!1)}});return i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:r,className:"btn-secondary flex items-center gap-2",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Volver"]}),i.jsxs("div",{className:"flex-1 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Editar Producto":"Nuevo Producto"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gestiona tu catlogo de productos"})]}),i.jsx("div",{className:"w-24"})," "]}),i.jsxs("form",{onSubmit:f(m),className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-end gap-4 pb-4 flex-wrap",children:[d&&i.jsxs("button",{type:"button",onClick:()=>P(this,null,function*(){o(!0);try{const y=yield as.syncProduct(d);y.ok?te.success(y.created?"Producto creado en Shopify":"Producto actualizado en Shopify"):te.error(y.error||"Error al traspasar")}catch(y){te.error(y.message||"Error al traspasar")}finally{o(!1)}}),disabled:s,className:"btn-secondary flex items-center gap-2",children:[s?i.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"}):i.jsx(ta,{className:"w-4 h-4"}),"Traspasar a Shopify"]}),i.jsx("button",{type:"button",onClick:r,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{type:"submit",disabled:n,className:"btn-primary flex items-center gap-2",children:[i.jsx(Bt,{className:"w-4 h-4"}),n?"Guardando...":e?"Actualizar":"Crear"," Producto"]})]}),i.jsx(IA,{register:u,watch:x,setValue:b,errors:w,productId:l||(e==null?void 0:e.id)}),i.jsx(DA,{watch:x,setValue:b}),i.jsx($A,{watch:x,setValue:b}),i.jsx(UA,{watch:x,setValue:b}),i.jsx(qA,{watch:x,setValue:b}),i.jsx(BA,{productId:l||(e==null?void 0:e.id),product:h||e}),i.jsxs("div",{className:"flex justify-end gap-4 pb-8 flex-wrap",children:[d&&i.jsxs("button",{type:"button",onClick:()=>P(this,null,function*(){o(!0);try{const y=yield as.syncProduct(d);y.ok?te.success(y.created?"Producto creado en Shopify":"Producto actualizado en Shopify"):te.error(y.error||"Error al traspasar")}catch(y){te.error(y.message||"Error al traspasar")}finally{o(!1)}}),disabled:s,className:"btn-secondary flex items-center gap-2",children:[s?i.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"}):i.jsx(ta,{className:"w-4 h-4"}),"Traspasar a Shopify"]}),i.jsx("button",{type:"button",onClick:r,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{type:"submit",disabled:n,className:"btn-primary flex items-center gap-2",children:[i.jsx(Bt,{className:"w-4 h-4"}),n?"Guardando...":e?"Actualizar":"Crear"," Producto"]})]})]})]})}function dv({isOpen:e,onClose:t,title:r,children:n,size:a="md",showCloseButton:s=!0}){if(B.useEffect(()=>{const l=c=>{c.key==="Escape"&&e&&t()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[e,t]),B.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const o={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl",full:"max-w-full mx-4"};return i.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),i.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:i.jsxs("div",{className:`relative bg-white rounded-lg shadow-xl w-full ${o[a]} transform transition-all`,onClick:l=>l.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r}),s&&i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:i.jsx(ir,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"p-6 max-h-[calc(100vh-200px)] overflow-y-auto",children:n})]})})]})}function rn({value:e,onChange:t,options:r,placeholder:n="Seleccionar...",multiple:a=!1,searchPlaceholder:s="Buscar...",emptyMessage:o="No se encontraron opciones",className:l="",disabled:c=!1}){var y;const[h,p]=B.useState(!1),[d,u]=B.useState(""),f=B.useRef(null);B.useEffect(()=>{const v=_=>{f.current&&!f.current.contains(_.target)&&(p(!1),u(""))};if(h)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[h]);const x=r.filter(v=>v.name.toLowerCase().includes(d.toLowerCase())),b=a?Array.isArray(e)?e:[]:e!=null?[e]:[],w=r.filter(v=>b.includes(v.id)),g=v=>{if(a){const _=Array.isArray(e)?e:[];_.includes(v)?t(_.filter(O=>O!==v)):t([..._,v])}else t(v),p(!1),u("")},m=(v,_)=>{if(_.stopPropagation(),a){const O=Array.isArray(e)?e:[];t(O.filter(A=>A!==v))}else t("")};return i.jsxs("div",{ref:f,className:`relative ${l}`,children:[i.jsxs("button",{type:"button",onClick:()=>!c&&p(!h),disabled:c,className:`w-full input-field flex items-center justify-between ${c?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[i.jsx("div",{className:"flex-1 flex flex-wrap gap-1 items-center min-h-[2rem]",children:w.length===0?i.jsx("span",{className:"text-gray-400",children:n}):a?w.map(v=>i.jsxs("span",{className:"inline-flex items-center gap-1 bg-primary-100 text-primary-800 px-2 py-1 rounded text-sm",children:[v.name,i.jsx("button",{type:"button",onClick:_=>m(v.id,_),className:"hover:text-primary-900",children:i.jsx(ir,{className:"w-3 h-3"})})]},v.id)):i.jsx("span",{className:"text-gray-900",children:(y=w[0])==null?void 0:y.name})}),i.jsx(li,{className:`w-5 h-5 text-gray-400 transition-transform ${h?"transform rotate-180":""}`})]}),h&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-64 overflow-hidden",children:[i.jsx("div",{className:"p-2 border-b border-gray-200",children:i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",value:d,onChange:v=>u(v.target.value),placeholder:s,className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none text-sm",autoFocus:!0})]})}),i.jsx("div",{className:"max-h-48 overflow-y-auto",children:x.length===0?i.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:o}):x.map(v=>{const _=b.includes(v.id);return i.jsxs("div",{onClick:()=>g(v.id),className:`px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between ${_?"bg-primary-50 text-primary-900":"text-gray-900"}`,children:[i.jsx("span",{className:"text-sm",children:v.name}),_&&i.jsx("span",{className:"text-primary-600 text-sm",children:""})]},v.id)})})]})]})}function FA(){const e=kt(),[t,r]=B.useState([]),[n,a]=B.useState(!0),[s,o]=B.useState(1),[l,c]=B.useState(1),[h,p]=B.useState(""),[d,u]=B.useState(""),[f,x]=B.useState(""),[b,w]=B.useState([]),[g,m]=B.useState(),[y,v]=B.useState(),[_,O]=B.useState(),[A,j]=B.useState(null),k=()=>P(this,null,function*(){a(!0);try{const C=yield wt.getAll(s,50,{search:h||void 0,status:d||void 0,subcategory_id:f||void 0});if(console.log(" Respuesta recibida:",C),console.log(" Estructura de respuesta:",{hasData:!!(C!=null&&C.data),hasPagination:!!(C!=null&&C.pagination),dataType:Array.isArray(C==null?void 0:C.data)?"array":typeof(C==null?void 0:C.data),dataLength:Array.isArray(C==null?void 0:C.data)?C.data.length:"N/A",pagination:C==null?void 0:C.pagination}),!C)throw new Error("La respuesta est vaca");if(Array.isArray(C))console.warn(" La respuesta es un array directo, ajustando estructura..."),r(C),c(1);else if(C.data&&C.pagination)r(Array.isArray(C.data)?C.data:[]),c(C.pagination.totalPages||1);else if(C.data)r(Array.isArray(C.data)?C.data:[]),c(1);else throw console.warn(" Estructura de respuesta inesperada:",C),new Error("Estructura de respuesta inesperada: "+JSON.stringify(C).substring(0,200))}catch(C){console.error(" Error al cargar productos:",C),console.error(" Detalles del error:",{message:C.message,stack:C.stack,response:C.response,name:C.name});const D=C.message||C.toString()||"Error desconocido";D.includes("sesin")||D.includes("Sesin")||D.includes("401")||D.includes("autenticacin")?(te.error("Error de autenticacin: "+D,{duration:1e4,id:"auth-error"}),console.error(" Error de autenticacin detectado. NO redirigiendo automticamente para permitir debugging.")):te.error("Error al cargar productos: "+D,{duration:1e4,id:"load-error"}),r([]),c(1)}finally{a(!1)}});B.useEffect(()=>{S()},[]),B.useEffect(()=>{const C=setTimeout(()=>{k()},100);return()=>clearTimeout(C)},[s,h,d,f]);const S=()=>P(this,null,function*(){var C;try{const D=yield he.subcategories.getAll({order_by:"title",order_asc:!0}),z=Array.isArray(D)?D:(C=D==null?void 0:D.data)!=null?C:[];w([...z].sort((V,G)=>(V.title||"").localeCompare(G.title||"","es")))}catch(D){console.error("Error cargando opciones de filtro:",D)}}),N=C=>P(this,null,function*(){if(confirm("Ests seguro de que quieres eliminar este producto?"))try{yield wt.delete(C),te.success("Producto eliminado correctamente"),yield k()}catch(D){te.error("Error al eliminar: "+D.message)}}),E=C=>{const D={active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",archived:"bg-gray-100 text-gray-800"},z={active:"Activo",draft:"Borrador",archived:"Archivado"};return i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D[C]||D.draft}`,children:z[C]||C})},T=C=>{C.id&&(j(C.id),wt.getById(C.id).then(D=>m(D)).catch(D=>{te.error("Error al cargar el producto: "+((D==null?void 0:D.message)||"Unknown"))}).finally(()=>j(null)))};return A?i.jsxs("div",{className:"flex flex-col items-center justify-center py-24",children:[i.jsx("div",{className:"w-10 h-10 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando producto..."})]}):g?i.jsxs(i.Fragment,{children:[i.jsx(ry,{product:g,onClose:()=>m(void 0),onEdit:()=>O(g)}),_&&i.jsx(dv,{isOpen:!0,onClose:()=>O(void 0),title:"Editar producto",size:"xl",children:i.jsx(_l,{product:_,onSuccess:C=>P(this,null,function*(){if(O(void 0),C!=null&&C.id)try{const D=yield wt.getById(C.id);m(D)}catch(D){m(C)}}),onCancel:()=>O(void 0)})})]}):y?(e(`/products/${y.id}/edit`),null):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Productos"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona tu catlogo de productos"})]}),i.jsxs("button",{onClick:()=>{e("/products/new")},className:"btn-primary flex items-center gap-2",children:[i.jsx(bt,{className:"w-5 h-5"}),"Nuevo Producto"]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Buscar por ttulo o descripcin...",value:h,onChange:C=>{p(C.target.value),o(1)},className:"input-field pl-10"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsx(bl,{value:d,onChange:C=>{u(C),o(1)},options:[{value:"",label:"Todos los estados"},{value:"active",label:"Activo"},{value:"draft",label:"Borrador"},{value:"archived",label:"Archivado"}],placeholder:"Todos los estados",icon:i.jsx(vd,{className:"w-4 h-4 text-gray-400"})})}),i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsx(rn,{value:f,onChange:C=>{const D=C!=null?C:"";x(D),o(1)},options:[{id:"",name:"Todos"},...b.map(C=>({id:C.id,name:C.title}))],placeholder:"Filtrar por subcategora...",searchPlaceholder:"Buscar subcategora..."})})]}),(d||f)&&i.jsxs("button",{onClick:()=>{u(""),x(""),o(1)},className:"btn-secondary text-sm flex items-center gap-2",children:[i.jsx(jd,{className:"w-4 h-4"}),"Limpiar filtros"]})]})]})}),n?i.jsxs("div",{className:"card text-center py-12",children:[i.jsx("div",{className:"inline-block w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando productos..."})]}):t.length===0?i.jsxs("div",{className:"card text-center py-12",children:[i.jsx(Pt,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"No se encontraron productos"}),i.jsx("button",{onClick:()=>{e("/products/new")},className:"btn-primary",children:"Crear primer producto"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(C=>i.jsxs("div",{className:"card hover:shadow-lg transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 flex-1",children:C.title}),E(C.status)]}),C.subtitle&&i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:C.subtitle}),C.description_html&&i.jsxs("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:[C.description_html.replace(/<[^>]*>/g,"").substring(0,100),"..."]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[C.vendor&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Vendor:"}),i.jsx("span",{className:"text-gray-900",children:C.vendor})]}),C.variants&&C.variants.length>0&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Variantes:"}),i.jsx("span",{className:"text-gray-900",children:C.variants.length})]})]}),C.tags&&C.tags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[C.tags.slice(0,3).map((D,z)=>i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:D},z)),C.tags.length>3&&i.jsxs("span",{className:"px-2 py-1 text-gray-500 text-xs",children:["+",C.tags.length-3]})]}),i.jsx("div",{className:"text-xs text-gray-500 mb-4",children:C.created_at?Zr(new Date(C.created_at),"dd MMM yyyy"):""}),i.jsxs("div",{className:"flex flex-col gap-2 pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>T(C),disabled:!!A,className:"flex-1 btn-secondary flex items-center justify-center gap-2 text-sm disabled:opacity-50",children:[i.jsx(Jo,{className:"w-4 h-4"}),"Ver"]}),i.jsxs("button",{onClick:()=>v(C),className:"flex-1 btn-primary flex items-center justify-center gap-2 text-sm",children:[i.jsx(yr,{className:"w-4 h-4"}),"Editar"]}),i.jsx("button",{onClick:()=>C.id&&N(C.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx(ht,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("button",{onClick:()=>e(`/catalog/product-content/${C.id}`),className:"flex-1 btn-secondary flex items-center justify-center gap-1 text-xs py-1.5",title:"Gestionar contenido",children:[i.jsx(Yo,{className:"w-3 h-3"}),"Contenido"]})})]})]},C.id))}),i.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[i.jsx("button",{onClick:()=>o(C=>Math.max(1,C-1)),disabled:s===1||l<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),i.jsxs("span",{className:"text-gray-600",children:["Pgina ",s," de ",l," ",t.length>0&&`(${t.length} en esta pgina)`]}),i.jsx("button",{onClick:()=>o(C=>Math.min(l,C+1)),disabled:s===l||l<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})]})}function zA({category:e,onClose:t,onEdit:r}){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e.name}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:r,className:"btn-primary flex items-center gap-2",children:[i.jsx(yr,{className:"w-5 h-5"}),"Editar"]}),i.jsxs("button",{onClick:t,className:"btn-secondary flex items-center gap-2",children:[i.jsx(ir,{className:"w-5 h-5"}),"Cerrar"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"card",children:[i.jsx("h2",{className:"section-title",children:"Informacin bsica"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Nombre"}),i.jsx("p",{className:"text-gray-900",children:e.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Slug"}),i.jsxs("p",{className:"text-gray-900 font-mono",children:["/",e.slug]})]}),e.description&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Descripcin"}),i.jsx("p",{className:"text-gray-900",children:e.description})]}),e.parent&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Categora Padre"}),i.jsx("p",{className:"text-gray-900",children:e.parent.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Estado"}),i.jsx("p",{className:"text-gray-900",children:e.active?i.jsx("span",{className:"text-green-600 font-medium",children:"Activa"}):i.jsx("span",{className:"text-gray-500",children:"Inactiva"})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Posicin"}),i.jsx("p",{className:"text-gray-900",children:e.position})]})]})]}),i.jsxs("div",{className:"card",children:[i.jsx("h2",{className:"section-title",children:"Metadatos"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-gray-600",children:"Creado"}),i.jsx("p",{className:"text-gray-900",children:Zr(new Date(e.created_at),"dd MMM yyyy HH:mm")})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-gray-600",children:"Actualizado"}),i.jsx("p",{className:"text-gray-900",children:Zr(new Date(e.updated_at),"dd MMM yyyy HH:mm")})]}),e.notes&&i.jsxs("div",{children:[i.jsx("label",{className:"text-gray-600",children:"Notas"}),i.jsx("p",{className:"text-gray-900",children:e.notes})]})]})]})]})]})}function Jd(e){var O,A;const{categoryId:t}=kr(),r=kt(),n=(O=e==null?void 0:e.categoryIdProp)!=null?O:t,a=!!(e!=null&&e.onClose),[s,o]=B.useState(!1),[l,c]=B.useState(null),[h,p]=B.useState({aspectos_html:"",ayuda_html:"",videos_explicativos:[],videos_experiencias:[],videos_producto:[]}),[d,u]=B.useState([]);B.useEffect(()=>{f(),n&&(x(n),b(n))},[n]);const f=()=>P(this,null,function*(){try{const j=yield _t.categories.getAll({active:!0});u(Array.isArray(j)?j:[])}catch(j){console.error("Error al cargar categoras:",j)}}),x=j=>P(this,null,function*(){try{const k=yield _t.categories.getById(j);c(k)}catch(k){te.error("Error al cargar categora: "+k.message)}}),b=j=>P(this,null,function*(){try{const k=yield he.categoryContent.getByCategoryId(j);k&&p({aspectos_html:k.aspectos_html||"",ayuda_html:k.ayuda_html||"",videos_explicativos:k.videos_explicativos||[],videos_experiencias:k.videos_experiencias||[],videos_producto:k.videos_producto||[]})}catch(k){console.error("Error al cargar contenido:",k)}}),w=j=>{const k={url:"",title:"",description:""};p(S=>de(X({},S),{[`videos_${j}`]:[...S[`videos_${j}`]||[],k]}))},g=(j,k,S,N)=>{const T=[...h[`videos_${j}`]||[]];T[k]=de(X({},T[k]),{[S]:N}),p(C=>de(X({},C),{[`videos_${j}`]:T}))},m=(j,k)=>{const S=h[`videos_${j}`]||[];p(N=>de(X({},N),{[`videos_${j}`]:S.filter((E,T)=>T!==k)}))},y=()=>P(this,null,function*(){if(!(l!=null&&l.id)){te.error("Debes seleccionar una categora");return}o(!0);try{(yield he.categoryContent.getByCategoryId(l.id))?(yield he.categoryContent.updateByCategoryId(l.id,de(X({},h),{category_id:l.id})),te.success("Contenido actualizado correctamente")):(yield he.categoryContent.create(de(X({},h),{category_id:l.id})),te.success("Contenido creado correctamente")),a&&(e!=null&&e.onClose)?e.onClose():r("/master-data/categories")}catch(j){te.error("Error al guardar: "+j.message)}finally{o(!1)}}),v=(j,k)=>{const S=h[`videos_${j}`]||[];return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:k}),i.jsxs("button",{type:"button",onClick:()=>w(j),className:"btn-secondary flex items-center gap-1 text-sm",children:[i.jsx(bt,{className:"w-4 h-4"}),"Aadir vdeo"]})]}),S.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay vdeos aadidos"}):i.jsx("div",{className:"space-y-2",children:S.map((N,E)=>i.jsx("div",{className:"border rounded-lg p-3 bg-gray-50",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(_d,{className:"w-5 h-5 text-gray-400 mt-1"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("input",{type:"url",value:N.url||"",onChange:T=>g(j,E,"url",T.target.value),placeholder:"URL del vdeo",className:"input-field text-sm"}),i.jsx("input",{type:"text",value:N.title||"",onChange:T=>g(j,E,"title",T.target.value),placeholder:"Ttulo del vdeo",className:"input-field text-sm"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Descripcin"}),i.jsx(Lt,{value:N.description||"",onChange:T=>g(j,E,"description",T),placeholder:"Descripcin del vdeo..."})]})]}),i.jsx("button",{type:"button",onClick:()=>m(j,E),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx(ht,{className:"w-4 h-4"})})]})},E))})]})},_=()=>a&&(e!=null&&e.onClose)?e.onClose():r("/master-data/categories");return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[!a&&i.jsxs("button",{onClick:()=>r("/master-data/categories"),className:"btn-secondary flex items-center gap-2 mb-4",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Volver a categoras"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Contenido de categora"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona el contenido exclusivo de la categora"})]}),i.jsxs("button",{onClick:_,className:"btn-secondary flex items-center gap-2",children:[i.jsx(ir,{className:"w-5 h-5"}),a?"Cerrar":"Cancelar"]})]}),i.jsx("div",{className:"card bg-indigo-50 border-indigo-200",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-indigo-900",children:"Contenido exclusivo por categora"}),i.jsx("p",{className:"text-sm text-indigo-800 leading-relaxed",children:"Cada categora puede tener contenido exclusivo: aspectos a vigilar, informacin de ayuda, y vdeos explicativos, de experiencias o especficos del producto. Este contenido se mostrar a los usuarios cuando naveguen por esta categora."})]})}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Seleccin de categora"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora *"}),a&&n?i.jsx("div",{className:"input-field bg-gray-50 cursor-default",children:(A=l==null?void 0:l.name)!=null?A:"Cargando..."}):i.jsx(rn,{value:(l==null?void 0:l.id)||n,onChange:j=>{const k=d.find(S=>S.id===j);c(k||null),k&&b(k.id)},options:d.map(j=>({id:j.id,name:j.name})),placeholder:"Seleccionar categora...",disabled:!!n})]})]}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:_,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{onClick:y,disabled:s,className:"btn-primary flex items-center gap-2",children:[s?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),"Guardar contenido"]})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Aspectos a vigilar"}),i.jsx(Lt,{value:h.aspectos_html||"",onChange:j=>p(k=>de(X({},k),{aspectos_html:j})),placeholder:"Informacin sobre aspectos a vigilar en esta categora..."})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Lo que s ayuda"}),i.jsx(Lt,{value:h.ayuda_html||"",onChange:j=>p(k=>de(X({},k),{ayuda_html:j})),placeholder:"Informacin sobre lo que s ayuda en esta categora..."})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Vdeos"}),i.jsxs("div",{className:"space-y-6",children:[v("explicativos","Vdeos explicativos"),v("experiencias","Vdeos de experiencias"),v("producto","Vdeos de producto")]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:_,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{onClick:y,disabled:s,className:"btn-primary flex items-center gap-2",children:[s?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),"Guardar contenido"]})]})]})]})}function Yd(e){var O,A;const{subcategoryId:t}=kr(),r=kt(),n=(O=e==null?void 0:e.subcategoryIdProp)!=null?O:t,a=!!(e!=null&&e.onClose),[s,o]=B.useState(!1),[l,c]=B.useState(null),[h,p]=B.useState({aspectos_html:"",ayuda_html:"",videos_explicativos:[],videos_experiencias:[],videos_producto:[]}),[d,u]=B.useState([]);B.useEffect(()=>{f(),n&&(x(n),b(n))},[n]);const f=()=>P(this,null,function*(){try{const j=yield he.subcategories.getAll({active:!0});u(Array.isArray(j)?j:[])}catch(j){console.error("Error al cargar subcategoras:",j)}}),x=j=>P(this,null,function*(){try{const k=yield he.subcategories.getById(j);c(k)}catch(k){te.error("Error al cargar subcategora: "+k.message)}}),b=j=>P(this,null,function*(){try{const k=yield he.subcategoryContent.getBySubcategoryId(j);k&&p({aspectos_html:k.aspectos_html||"",ayuda_html:k.ayuda_html||"",videos_explicativos:k.videos_explicativos||[],videos_experiencias:k.videos_experiencias||[],videos_producto:k.videos_producto||[]})}catch(k){console.error("Error al cargar contenido:",k)}}),w=j=>{const k={url:"",title:"",description:""};p(S=>de(X({},S),{[`videos_${j}`]:[...S[`videos_${j}`]||[],k]}))},g=(j,k,S,N)=>{const T=[...h[`videos_${j}`]||[]];T[k]=de(X({},T[k]),{[S]:N}),p(C=>de(X({},C),{[`videos_${j}`]:T}))},m=(j,k)=>{const S=h[`videos_${j}`]||[];p(N=>de(X({},N),{[`videos_${j}`]:S.filter((E,T)=>T!==k)}))},y=()=>P(this,null,function*(){if(!(l!=null&&l.id)){te.error("Debes seleccionar una subcategora");return}o(!0);try{(yield he.subcategoryContent.getBySubcategoryId(l.id))?(yield he.subcategoryContent.updateBySubcategoryId(l.id,de(X({},h),{subcategory_id:l.id})),te.success("Contenido actualizado correctamente")):(yield he.subcategoryContent.create(de(X({},h),{subcategory_id:l.id})),te.success("Contenido creado correctamente")),a&&(e!=null&&e.onClose)?e.onClose():r("/catalog/subcategories")}catch(j){te.error("Error al guardar: "+j.message)}finally{o(!1)}}),v=(j,k)=>{const S=h[`videos_${j}`]||[];return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:k}),i.jsxs("button",{type:"button",onClick:()=>w(j),className:"btn-secondary flex items-center gap-1 text-sm",children:[i.jsx(bt,{className:"w-4 h-4"}),"Aadir vdeo"]})]}),S.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay vdeos aadidos"}):i.jsx("div",{className:"space-y-2",children:S.map((N,E)=>i.jsx("div",{className:"border rounded-lg p-3 bg-gray-50",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(_d,{className:"w-5 h-5 text-gray-400 mt-1"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("input",{type:"url",value:N.url||"",onChange:T=>g(j,E,"url",T.target.value),placeholder:"URL del vdeo",className:"input-field text-sm"}),i.jsx("input",{type:"text",value:N.title||"",onChange:T=>g(j,E,"title",T.target.value),placeholder:"Ttulo del vdeo",className:"input-field text-sm"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Descripcin"}),i.jsx(Lt,{value:N.description||"",onChange:T=>g(j,E,"description",T),placeholder:"Descripcin del vdeo..."})]})]}),i.jsx("button",{type:"button",onClick:()=>m(j,E),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx(ht,{className:"w-4 h-4"})})]})},E))})]})},_=()=>a&&(e!=null&&e.onClose)?e.onClose():r("/catalog/subcategories");return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[!a&&i.jsxs("button",{onClick:()=>r("/catalog/subcategories"),className:"btn-secondary flex items-center gap-2 mb-4",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Volver a subcategoras"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Contenido de subcategora"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona el contenido exclusivo de la subcategora"})]}),i.jsxs("button",{onClick:_,className:"btn-secondary flex items-center gap-2",children:[i.jsx(ir,{className:"w-5 h-5"}),a?"Cerrar":"Cancelar"]})]}),i.jsx("div",{className:"card bg-purple-50 border-purple-200",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-purple-900",children:"Contenido exclusivo por subcategora"}),i.jsx("p",{className:"text-sm text-purple-800 leading-relaxed",children:"Cada subcategora puede tener contenido exclusivo: aspectos a vigilar, informacin de ayuda, y vdeos explicativos, de experiencias o especficos del producto."})]})}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Seleccin de subcategora"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategora *"}),a&&n?i.jsx("div",{className:"input-field bg-gray-50 cursor-default",children:(A=l==null?void 0:l.title)!=null?A:"Cargando..."}):i.jsx(rn,{value:(l==null?void 0:l.id)||n,onChange:j=>{const k=d.find(S=>S.id===j);c(k||null),k&&b(k.id)},options:d.map(j=>({id:j.id,name:j.title})),placeholder:"Seleccionar subcategora...",disabled:!!n})]})]}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:_,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{onClick:y,disabled:s,className:"btn-primary flex items-center gap-2",children:[s?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),"Guardar contenido"]})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Aspectos a vigilar"}),i.jsx(Lt,{value:h.aspectos_html||"",onChange:j=>p(k=>de(X({},k),{aspectos_html:j})),placeholder:"Informacin sobre aspectos a vigilar en esta subcategora..."})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Lo que s ayuda"}),i.jsx(Lt,{value:h.ayuda_html||"",onChange:j=>p(k=>de(X({},k),{ayuda_html:j})),placeholder:"Informacin sobre lo que s ayuda en esta subcategora..."})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Vdeos"}),i.jsxs("div",{className:"space-y-6",children:[v("explicativos","Vdeos explicativos"),v("experiencias","Vdeos de experiencias"),v("producto","Vdeos de producto")]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:_,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{onClick:y,disabled:s,className:"btn-primary flex items-center gap-2",children:[s?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),"Guardar contenido"]})]})]})]})}function VA({criterion:e,subcategoryId:t,onSuccess:r,onCancel:n}){const[a,s]=B.useState(!1),{register:o,handleSubmit:l,formState:{errors:c},watch:h,setValue:p}=ol({defaultValues:e||{subcategory_id:t,name:"",description:"",position:0}}),d=u=>P(this,null,function*(){s(!0);try{const f=u,{id:x,created_at:b,updated_at:w}=f,g=Lr(f,["id","created_at","updated_at"]);e!=null&&e.id?(yield he.subcategoryCriteria.update(e.id,g),te.success("Criterio actualizado correctamente")):(yield he.subcategoryCriteria.create(de(X({},g),{subcategory_id:t})),te.success("Criterio creado correctamente")),r()}catch(x){te.error("Error al guardar: "+x.message)}finally{s(!1)}});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e?"Editar criterio":"Nuevo criterio"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Define un criterio de valoracin (1-5) para productos"})]}),i.jsxs("button",{onClick:n,className:"btn-secondary flex items-center gap-2",children:[i.jsx(ir,{className:"w-5 h-5"}),"Cancelar"]})]}),i.jsx("div",{className:"card bg-yellow-50 border-yellow-200",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-yellow-900",children:"Qu es un criterio de valoracin?"}),i.jsxs("p",{className:"text-sm text-yellow-800 leading-relaxed",children:["Los ",i.jsx("strong",{children:"criterios de valoracin"}),' son caractersticas especficas que se evalan en los productos dentro de una subcategora. Cada criterio permite valorar productos con una escala del 1 al 5. Por ejemplo, para una subcategora "Sin Gluten", los criterios podran ser: "Sabor", "Textura", "Valor Nutricional", etc. Los productos se valoran en cada criterio, lo que permite comparar y clasificar productos de manera objetiva.']})]})}),i.jsxs("form",{onSubmit:l(d),className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-end gap-4 pb-4",children:[i.jsx("button",{type:"button",onClick:n,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{type:"submit",disabled:a,className:"btn-primary flex items-center gap-2",children:[a?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),e?"Actualizar":"Crear"," criterio"]})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Informacin del criterio"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del criterio *"}),i.jsx("input",de(X({},o("name",{required:"El nombre es obligatorio"})),{className:"input-field",placeholder:"Ej: Sabor, Textura, Valor Nutricional..."})),i.jsx(Se,{text:"Nombre descriptivo del criterio. Ejemplos: 'Sabor', 'Textura', 'Valor Nutricional', 'Calidad-Precio'."}),c.name&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.name.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),i.jsx(Lt,{value:h("description")||"",onChange:u=>p("description",u),placeholder:"Descripcin opcional del criterio..."}),i.jsx(Se,{text:"Explica qu se evala en este criterio y cmo se debe valorar. Puedes usar formato HTML."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Posicin"}),i.jsx("input",de(X({},o("position",{valueAsNumber:!0})),{type:"number",className:"input-field",placeholder:"0"})),i.jsx(Se,{text:"Orden de visualizacin (menor nmero = primero)."})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:n,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{type:"submit",disabled:a,className:"btn-primary flex items-center gap-2",children:[a?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),e?"Actualizar":"Crear"," criterio"]})]})]})]})}function Qd({subcategoryIdProp:e,embedded:t=!1,onClose:r}={}){var A;const n=kr().subcategoryId,a=(A=e!=null?e:n)!=null?A:"",s=kt(),[o,l]=B.useState([]),[c,h]=B.useState(!0),[p,d]=B.useState(1),[u,f]=B.useState(1),[x,b]=B.useState(0),[w,g]=B.useState(),[m,y]=B.useState("");B.useEffect(()=>{a&&(_(),v())},[a,p]);const v=()=>P(this,null,function*(){if(a)try{const j=yield he.subcategories.getById(a);y(j.title)}catch(j){console.error("Error al cargar subcategora:",j)}}),_=()=>P(this,null,function*(){if(a){h(!0);try{const j=yield he.subcategoryCriteria.getAll({subcategory_id:a,page:p,limit:20});Array.isArray(j)?(l(j),f(1),b(j.length)):j.data&&j.pagination?(l(j.data),f(j.pagination.totalPages),b(j.pagination.total)):(l([]),f(1),b(0))}catch(j){te.error("Error al cargar criterios: "+j.message),l([]),f(1),b(0)}finally{h(!1)}}}),O=j=>P(this,null,function*(){if(confirm("Ests seguro de que quieres eliminar este criterio?"))try{yield he.subcategoryCriteria.delete(j),te.success("Criterio eliminado correctamente"),yield _()}catch(k){te.error("Error al eliminar: "+k.message)}});return w?i.jsx(VA,{criterion:w,subcategoryId:a,onSuccess:()=>{g(void 0),_()},onCancel:()=>g(void 0)}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[t&&r?i.jsxs("button",{onClick:r,className:"btn-secondary flex items-center gap-2 mb-4",children:[i.jsx(ir,{className:"w-4 h-4"}),"Cerrar"]}):i.jsxs("button",{onClick:()=>s("/catalog/subcategories"),className:"btn-secondary flex items-center gap-2 mb-4",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Volver a subcategoras"]}),i.jsx("h1",{className:t?"text-xl font-bold text-gray-900":"text-3xl font-bold text-gray-900",children:"Criterios de valoracin"}),i.jsx("p",{className:"text-gray-600 mt-1",children:m&&`Subcategora: ${m}`})]}),a&&i.jsxs("button",{onClick:()=>g({subcategory_id:a,name:"",description:"",position:o.length}),className:"btn-primary flex items-center gap-2",children:[i.jsx(bt,{className:"w-5 h-5"}),"Nuevo criterio"]})]}),c?i.jsxs("div",{className:"card text-center py-12",children:[i.jsx("div",{className:"inline-block w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando criterios..."})]}):o.length===0?i.jsxs("div",{className:"card text-center py-12",children:[i.jsx(Ga,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"No hay criterios definidos para esta subcategora"}),a&&i.jsx("button",{onClick:()=>g({subcategory_id:a,name:"",description:"",position:0}),className:"btn-primary",children:"Crear primer criterio"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-3",children:o.map(j=>i.jsx("div",{className:"card hover:shadow-lg transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.name}),i.jsxs("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:["Posicin: ",j.position]})]}),j.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:j.description}),i.jsx("p",{className:"text-xs text-gray-500",children:"Los productos se valorarn de 1 a 5 en este criterio"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>g(j),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg",children:i.jsx(yr,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>O(j.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx(ht,{className:"w-4 h-4"})})]})]})},j.id))}),i.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[i.jsx("button",{onClick:()=>d(j=>Math.max(1,j-1)),disabled:p===1||u<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),i.jsxs("span",{className:"text-gray-600",children:["Pgina ",p," de ",u," ",x>0&&`(${x} total)`]}),i.jsx("button",{onClick:()=>d(j=>Math.min(u,j+1)),disabled:p===u||u<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})]})}function HA(){const e=kt(),[t,r]=B.useState([]),[n,a]=B.useState([]),[s,o]=B.useState([]),[l,c]=B.useState({}),[h,p]=B.useState(!0),[d,u]=B.useState(1),[f,x]=B.useState(1),[b,w]=B.useState(0),[g,m]=B.useState(""),[y,v]=B.useState(null),[_,O]=B.useState(),[A,j]=B.useState(),[k,S]=B.useState(null),[N,E]=B.useState(!1);B.useEffect(()=>{if(N){const H=document.body.style.cursor;return document.body.style.cursor="wait",()=>{document.body.style.cursor=H}}},[N]);const T=(H=!1)=>P(this,null,function*(){var J,Z;H||p(!0);try{const[ee,ue,oe,le]=yield Promise.all([_t.categories.getAll({active:y,search:g||void 0,order_by:"position",order_asc:!0,page:!g&&y===null?d:void 0,limit:!g&&y===null?500:void 0}),he.categorySubcategories.getAll(void 0),he.categorySubcategoryProducts.getAll(void 0),he.subcategoryProducts.getAll(void 0)]);Array.isArray(ee)?(r(ee),x(1),w(ee.length)):ee.data&&ee.pagination?(r(ee.data),x(ee.pagination.totalPages),w(ee.pagination.total)):(r([]),x(1),w(0)),a(Array.isArray(ue)?ue:[]),o(Array.isArray(oe)?oe:[]);const ge=Array.isArray(le)?le:(J=le==null?void 0:le.data)!=null?J:[],ke={};for(const Ae of ge)Ae.subcategory_id&&(ke[Ae.subcategory_id]=((Z=ke[Ae.subcategory_id])!=null?Z:0)+1);c(ke)}catch(ee){const ue=ee instanceof Error?ee.message:"Error al cargar";te.error("Error al cargar: "+ue),r([]),a([]),o([]),c({}),x(1),w(0)}finally{H||p(!1)}});B.useEffect(()=>{const H=setTimeout(()=>T(),300);return()=>clearTimeout(H)},[g,y,d]);const C=H=>P(this,null,function*(){if(confirm("Ests seguro de que quieres eliminar esta categora?"))try{yield _t.categories.delete(H),te.success("Categora eliminada correctamente"),yield T(!0)}catch(J){te.error("Error al eliminar: "+(J instanceof Error?J.message:""))}}),D=H=>P(this,null,function*(){if(confirm("Desvincular esta subcategora de la categora? La subcategora no se borrar."))try{yield he.categorySubcategories.delete(H),te.success("Subcategora desvinculada"),yield T(!0)}catch(J){te.error("Error: "+(J instanceof Error?J.message:""))}}),z=H=>P(this,null,function*(){if(confirm("Desvincular este producto de la categora-subcategora? El producto no se borrar."))try{yield he.categorySubcategoryProducts.delete(H),te.success("Producto desvinculado"),yield T(!0)}catch(J){te.error("Error: "+(J instanceof Error?J.message:""))}}),V=(H,J,Z)=>P(this,null,function*(){try{const ee=s.filter(oe=>oe.category_id===H&&oe.subcategory_id===J),ue=ee.length>0?Math.max(...ee.map(oe=>oe.position),0)+1:0;yield he.categorySubcategoryProducts.create({category_id:H,subcategory_id:J,product_id:Z,position:ue}),te.success("Producto vinculado"),yield T(!0)}catch(ee){te.error("Error al vincular: "+(ee instanceof Error?ee.message:""))}}),G=(H,J,Z)=>P(this,null,function*(){if(Z.length!==0)try{const ee=s.filter(oe=>oe.category_id===H&&oe.subcategory_id===J);let ue=ee.length>0?Math.max(...ee.map(oe=>oe.position),0)+1:0;for(const oe of Z)yield he.categorySubcategoryProducts.create({category_id:H,subcategory_id:J,product_id:oe,position:ue++});te.success(Z.length===1?"Producto vinculado":`${Z.length} productos vinculados`),yield T(!0)}catch(ee){te.error("Error al vincular: "+(ee instanceof Error?ee.message:""))}}),U=t,M=U.filter(H=>!H.parent_id).sort((H,J)=>{var Z,ee;return((Z=H.position)!=null?Z:0)-((ee=J.position)!=null?ee:0)||(H.name||"").localeCompare(J.name||"","es")}),R=H=>H==null||H===""?[...M]:U.filter(J=>J.parent_id===H).sort((J,Z)=>{var ee,ue;return((ee=J.position)!=null?ee:0)-((ue=Z.position)!=null?ue:0)||(J.name||"").localeCompare(Z.name||"","es")}),L=(H,J)=>P(this,null,function*(){const Z=R(J),ee=Z.findIndex(oe=>oe.id===H);if(ee<=0)return;const ue=Z[ee-1];E(!0);try{yield _t.categories.update(H,{position:ee-1}),yield _t.categories.update(ue.id,{position:ee}),r(oe=>oe.map(le=>le.id===H?de(X({},le),{position:ee-1}):le.id===ue.id?de(X({},le),{position:ee}):le)),te.success("Orden actualizado")}catch(oe){te.error("Error al cambiar orden")}finally{E(!1)}}),$=(H,J)=>P(this,null,function*(){const Z=R(J),ee=Z.findIndex(oe=>oe.id===H);if(ee<0||ee>=Z.length-1)return;const ue=Z[ee+1];E(!0);try{yield _t.categories.update(H,{position:ee+1}),yield _t.categories.update(ue.id,{position:ee}),r(oe=>oe.map(le=>le.id===H?de(X({},le),{position:ee+1}):le.id===ue.id?de(X({},le),{position:ee}):le)),te.success("Orden actualizado")}catch(oe){te.error("Error al cambiar orden")}finally{E(!1)}}),Q=(H,J)=>P(this,null,function*(){const Z=n.filter(oe=>oe.category_id===H).sort((oe,le)=>{var ge,ke;return((ge=oe.position)!=null?ge:0)-((ke=le.position)!=null?ke:0)}),ee=Z.findIndex(oe=>oe.id===J);if(ee<=0)return;const ue=Z[ee-1];E(!0);try{yield he.categorySubcategories.update(J,{position:ee-1}),yield he.categorySubcategories.update(ue.id,{position:ee}),a(oe=>oe.map(le=>le.category_id!==H?le:le.id===J?de(X({},le),{position:ee-1}):le.id===ue.id?de(X({},le),{position:ee}):le)),te.success("Orden actualizado")}catch(oe){te.error("Error al cambiar orden")}finally{E(!1)}}),Y=(H,J)=>P(this,null,function*(){const Z=n.filter(oe=>oe.category_id===H).sort((oe,le)=>{var ge,ke;return((ge=oe.position)!=null?ge:0)-((ke=le.position)!=null?ke:0)}),ee=Z.findIndex(oe=>oe.id===J);if(ee<0||ee>=Z.length-1)return;const ue=Z[ee+1];E(!0);try{yield he.categorySubcategories.update(J,{position:ee+1}),yield he.categorySubcategories.update(ue.id,{position:ee}),a(oe=>oe.map(le=>le.category_id!==H?le:le.id===J?de(X({},le),{position:ee+1}):le.id===ue.id?de(X({},le),{position:ee}):le)),te.success("Orden actualizado")}catch(oe){te.error("Error al cambiar orden")}finally{E(!1)}}),q=(H,J,Z)=>P(this,null,function*(){const ee=s.filter(le=>le.category_id===H&&le.subcategory_id===J).sort((le,ge)=>{var ke,Ae;return((ke=le.position)!=null?ke:0)-((Ae=ge.position)!=null?Ae:0)}),ue=ee.findIndex(le=>le.id===Z);if(ue<=0)return;const oe=ee[ue-1];E(!0);try{yield he.categorySubcategoryProducts.update(Z,{position:ue-1}),yield he.categorySubcategoryProducts.update(oe.id,{position:ue}),o(le=>le.map(ge=>ge.category_id!==H||ge.subcategory_id!==J?ge:ge.id===Z?de(X({},ge),{position:ue-1}):ge.id===oe.id?de(X({},ge),{position:ue}):ge)),te.success("Orden actualizado")}catch(le){te.error("Error al cambiar orden")}finally{E(!1)}}),K=(H,J,Z)=>P(this,null,function*(){const ee=s.filter(le=>le.category_id===H&&le.subcategory_id===J).sort((le,ge)=>{var ke,Ae;return((ke=le.position)!=null?ke:0)-((Ae=ge.position)!=null?Ae:0)}),ue=ee.findIndex(le=>le.id===Z);if(ue<0||ue>=ee.length-1)return;const oe=ee[ue+1];E(!0);try{yield he.categorySubcategoryProducts.update(Z,{position:ue+1}),yield he.categorySubcategoryProducts.update(oe.id,{position:ue}),o(le=>le.map(ge=>ge.category_id!==H||ge.subcategory_id!==J?ge:ge.id===Z?de(X({},ge),{position:ue+1}):ge.id===oe.id?de(X({},ge),{position:ue}):ge)),te.success("Orden actualizado")}catch(le){te.error("Error al cambiar orden")}finally{E(!1)}});return _?i.jsx(zA,{category:_,onClose:()=>O(void 0),onEdit:()=>{j(_),O(void 0)}}):A?(e(`/master-data/categories/${A.id}/edit`),null):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Categoras"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"rbol: categoras  subcategoras asignadas  productos"})]}),i.jsxs("button",{onClick:()=>e("/master-data/categories/new"),className:"btn-primary flex items-center gap-2",children:[i.jsx(bt,{className:"w-5 h-5"}),"Nueva categora"]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Buscar por nombre o slug...",value:g,onChange:H=>{m(H.target.value),u(1)},className:"input-field pl-10"})]}),i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsx(bl,{value:y===null?"all":y?"true":"false",onChange:H=>{v(H==="all"?null:H==="true"),u(1)},options:[{value:"all",label:"Todos"},{value:"true",label:"Solo activos"},{value:"false",label:"Solo inactivos"}],placeholder:"Estado",icon:i.jsx(vd,{className:"w-4 h-4 text-gray-400"})})}),(g||y!==null)&&i.jsxs("button",{onClick:()=>{m(""),v(null),u(1)},className:"btn-secondary flex items-center gap-1 px-3",title:"Limpiar filtros",children:[i.jsx(jd,{className:"w-4 h-4"}),"Limpiar"]})]})]})}),h?i.jsxs("div",{className:"card text-center py-12",children:[i.jsx("div",{className:"inline-block w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando rbol..."})]}):M.length===0?i.jsxs("div",{className:"card text-center py-12",children:[i.jsx(Lg,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-gray-600 mb-4",children:g?"No se encontraron categoras":"No hay categoras creadas"}),!g&&i.jsx("button",{onClick:()=>e("/master-data/categories/new"),className:"btn-primary",children:"Crear primera categora"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-2",children:M.map((H,J)=>i.jsx(hv,{category:H,allCategories:U,categorySubcategories:n,categorySubcategoryProducts:s,subcategoryProductCounts:l,onViewCategory:O,onEditCategory:j,onDeleteCategory:C,onUnlinkSubcategory:D,onUnlinkProduct:z,onLinkProduct:V,onLinkProducts:G,onRefresh:()=>T(!0),onOpenCategoryContentModal:Z=>S({type:"category-content",categoryId:Z}),onOpenSubcategoryContentModal:Z=>S({type:"subcategory-content",subcategoryId:Z}),onOpenSubcategoryCriteriaModal:Z=>S({type:"subcategory-criteria",subcategoryId:Z}),onOpenProductModal:(Z,ee)=>S(Z==="view"?{type:"product-view",productId:ee}:{type:"product-edit",productId:ee}),level:0,categoryIndex:J,totalCategories:M.length,onMoveCategoryUp:L,onMoveCategoryDown:$,onMoveSubcategoryUp:Q,onMoveSubcategoryDown:Y,onMoveProductUp:q,onMoveProductDown:K},H.id))}),i.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[i.jsx("button",{onClick:()=>u(H=>Math.max(1,H-1)),disabled:d===1||f<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),i.jsxs("span",{className:"text-gray-600",children:["Pgina ",d," de ",f," ",b>0&&`(${b} total)`]}),i.jsx("button",{onClick:()=>u(H=>Math.min(f,H+1)),disabled:d===f||f<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]}),k&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>S(null),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:H=>H.stopPropagation(),children:[i.jsx("div",{className:"flex justify-end p-2 border-b shrink-0",children:i.jsx("button",{type:"button",onClick:()=>S(null),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg text-xl leading-none",children:""})}),i.jsxs("div",{className:"overflow-y-auto flex-1 p-4",children:[k.type==="category-content"&&i.jsx(Jd,{categoryIdProp:k.categoryId,onClose:()=>S(null)}),k.type==="subcategory-content"&&i.jsx(Yd,{subcategoryIdProp:k.subcategoryId,onClose:()=>S(null)}),k.type==="subcategory-criteria"&&i.jsx(Qd,{subcategoryIdProp:k.subcategoryId,embedded:!0,onClose:()=>S(null)}),k.type==="product-view"&&i.jsx(fv,{mode:"view",productId:k.productId,onClose:()=>S(null)}),k.type==="product-edit"&&i.jsx(fv,{mode:"edit",productId:k.productId,onClose:()=>S(null)})]})]})})]})}function fv({mode:e,productId:t,onClose:r}){const[n,a]=B.useState(e),[s,o]=B.useState(null),[l,c]=B.useState(!0);return B.useEffect(()=>{let h=!1;return wt.getById(t).then(p=>{h||o(p)}).catch(()=>{h||te.error("Error al cargar producto")}).finally(()=>{h||c(!1)}),()=>{h=!0}},[t]),B.useEffect(()=>{a(e)},[e]),l?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):s?n==="view"?i.jsx(ry,{product:s,onClose:r,onEdit:()=>a("edit")}):i.jsx(_l,{product:s,onSuccess:()=>{te.success("Producto actualizado"),r()},onCancel:r}):i.jsx("p",{className:"text-gray-500",children:"Producto no encontrado"})}function hv({category:e,allCategories:t,categorySubcategories:r,categorySubcategoryProducts:n,subcategoryProductCounts:a,onViewCategory:s,onEditCategory:o,onDeleteCategory:l,onUnlinkSubcategory:c,onUnlinkProduct:h,onLinkProduct:p,onLinkProducts:d,onRefresh:u,onOpenCategoryContentModal:f,onOpenSubcategoryContentModal:x,onOpenSubcategoryCriteriaModal:b,onOpenProductModal:w,level:g,categoryIndex:m,totalCategories:y,onMoveCategoryUp:v,onMoveCategoryDown:_,onMoveSubcategoryUp:O,onMoveSubcategoryDown:A,onMoveProductUp:j,onMoveProductDown:k}){const S=kt(),[N,E]=B.useState(!1),T=t.filter(U=>U.parent_id===e.id).sort((U,M)=>{var R,L;return((R=U.position)!=null?R:0)-((L=M.position)!=null?L:0)||(U.name||"").localeCompare(M.name||"","es")}),C=r.filter(U=>U.category_id===e.id).sort((U,M)=>{var R,L;return((R=U.position)!=null?R:0)-((L=M.position)!=null?L:0)}),D=C.length>0||T.length>0,z=g*24,V=m>0,G=m<y-1;return i.jsxs("div",{children:[i.jsx("div",{className:"card hover:shadow-lg transition-shadow bg-sky-50/80 border border-sky-100/80",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 flex items-start gap-3",style:{paddingLeft:`${z}px`},children:[i.jsxs("div",{className:"flex flex-col gap-0 shrink-0",children:[i.jsx("button",{type:"button",disabled:!V,onClick:()=>v(e.id,e.parent_id),className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Subir",children:i.jsx(yd,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",disabled:!G,onClick:()=>_(e.id,e.parent_id),className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Bajar",children:i.jsx(gd,{className:"w-4 h-4"})})]}),D?i.jsx("button",{onClick:()=>E(!N),className:"mt-1 p-0.5 text-blue-600 hover:text-blue-800 transition-colors rounded",title:N?"Contraer":"Expandir",children:N?i.jsx(li,{className:"w-5 h-5"}):i.jsx(Go,{className:"w-5 h-5"})}):i.jsx("div",{className:"w-4"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Lg,{className:`w-4 h-4 ${g===0?"text-primary-600":"text-gray-400"}`}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),!e.active&&i.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:"Inactiva"}),(T.length>0||C.length>0)&&i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs",children:[T.length>0&&`${T.length} categora(s)`,C.length>0&&`${C.length} subcategora(s)`].filter(Boolean).join(", ")})]}),e.slug&&i.jsxs("p",{className:"text-sm text-gray-500 font-mono mb-2",children:["/",e.slug]}),e.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:e.description}),i.jsx("div",{className:"text-xs text-gray-500",children:Zr(new Date(e.created_at),"dd MMM yyyy")})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.jsx("button",{onClick:()=>S(`/catalog/category-subcategory-assignment/${e.id}`),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Asignar subcategoras",children:i.jsx(xd,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>S(`/catalog/category-subcategory-products/${e.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Asignar productos a subcategoras",children:i.jsx(Pt,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>f(e.id),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg",title:"Gestionar contenido",children:i.jsx(Yo,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>s(e),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg",title:"Ver",children:i.jsx(Jo,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>o(e),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg",title:"Editar",children:i.jsx(yr,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>l(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Eliminar",children:i.jsx(ht,{className:"w-4 h-4"})})]})]})}),N&&D&&i.jsxs("div",{className:"mt-2 ml-4 space-y-2",children:[T.map((U,M)=>i.jsx(hv,{category:U,allCategories:t,categorySubcategories:r,categorySubcategoryProducts:n,subcategoryProductCounts:a,onViewCategory:s,onEditCategory:o,onDeleteCategory:l,onUnlinkSubcategory:c,onUnlinkProduct:h,onLinkProduct:p,onLinkProducts:d,onRefresh:u,onOpenCategoryContentModal:f,onOpenSubcategoryContentModal:x,onOpenSubcategoryCriteriaModal:b,onOpenProductModal:w,level:g+1,categoryIndex:M,totalCategories:T.length,onMoveCategoryUp:v,onMoveCategoryDown:_,onMoveSubcategoryUp:O,onMoveSubcategoryDown:A,onMoveProductUp:j,onMoveProductDown:k},U.id)),C.map((U,M)=>{var R;return i.jsx(WA,{categorySubcategory:U,products:n.filter(L=>L.category_id===e.id&&L.subcategory_id===U.subcategory_id).sort((L,$)=>{var Q,Y;return((Q=L.position)!=null?Q:0)-((Y=$.position)!=null?Y:0)}),totalInSubcategory:(R=a[U.subcategory_id])!=null?R:0,onUnlinkSubcategory:c,onUnlinkProduct:h,onLinkProduct:p,onLinkProducts:d,onRefresh:u,onOpenSubcategoryContentModal:x,onOpenSubcategoryCriteriaModal:b,onOpenProductModal:w,categoryId:e.id,subcategoryIndex:M,totalSubcategories:C.length,onMoveSubcategoryUp:O,onMoveSubcategoryDown:A,onMoveProductUp:j,onMoveProductDown:k},U.id)})]})]})}function WA({categorySubcategory:e,products:t,totalInSubcategory:r,onUnlinkSubcategory:n,onUnlinkProduct:a,onLinkProduct:s,onLinkProducts:o,onRefresh:l,onOpenSubcategoryContentModal:c,onOpenSubcategoryCriteriaModal:h,onOpenProductModal:p,categoryId:d,subcategoryIndex:u,totalSubcategories:f,onMoveSubcategoryUp:x,onMoveSubcategoryDown:b,onMoveProductUp:w,onMoveProductDown:g}){var N;const[m,y]=B.useState(!1),[v,_]=B.useState(!1),O=e.subcategory,A=(N=O==null?void 0:O.title)!=null?N:"Subcategora",j=t.length>0,k=u>0,S=u<f-1;return i.jsxs("div",{children:[i.jsx("div",{className:"card bg-amber-50/80 hover:shadow transition-shadow border border-amber-100/80",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 flex items-start gap-3",style:{paddingLeft:"24px"},children:[i.jsxs("div",{className:"flex flex-col gap-0 shrink-0",children:[i.jsx("button",{type:"button",disabled:!k,onClick:()=>x(d,e.id),className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Subir",children:i.jsx(yd,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",disabled:!S,onClick:()=>b(d,e.id),className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Bajar",children:i.jsx(gd,{className:"w-4 h-4"})})]}),i.jsx("button",{onClick:()=>y(!m),className:"mt-1 p-0.5 text-blue-600 hover:text-blue-800 transition-colors rounded",title:m?"Contraer":"Expandir",children:m?i.jsx(li,{className:"w-5 h-5"}):i.jsx(Go,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(k_,{className:"w-4 h-4 text-gray-500"}),i.jsx("span",{className:"font-medium text-gray-800",children:A}),i.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 rounded-full text-xs",children:r>0?`${t.length} ${t.length===1?"producto asociado":"productos asociados"} de ${r} en la subcategora`:t.length>0?`${t.length} ${t.length===1?"producto asociado":"productos asociados"}`:"Esta subcategora an no tiene productos"})]}),(O==null?void 0:O.slug)&&i.jsxs("p",{className:"text-sm text-gray-500 font-mono",children:["/",O.slug]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.jsx("button",{onClick:()=>_(!0),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Vincular productos",children:i.jsx(O_,{className:"w-4 h-4"})}),(O==null?void 0:O.id)&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>h(O.id),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded-lg",title:"Gestionar criterios",children:i.jsx(Ga,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>c(O.id),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg",title:"Contenido subcategora",children:i.jsx(Yo,{className:"w-4 h-4"})})]}),i.jsx("button",{onClick:()=>n(e.id),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg",title:"Desvincular subcategora de esta categora",children:i.jsx(Dg,{className:"w-4 h-4"})})]})]})}),m&&(j||v)&&i.jsx("div",{className:"mt-2 ml-8 space-y-1",children:t.map((E,T)=>i.jsx(KA,{csp:E,categoryId:d,subcategoryId:e.subcategory_id,productIndex:T,totalProducts:t.length,onUnlink:a,onRefresh:l,onOpenProductModal:p,onMoveUp:w,onMoveDown:g},E.id))}),v&&i.jsx(GA,{categoryId:d,subcategoryId:e.subcategory_id,linkedProductIds:t.map(E=>E.product_id),onLinkBatch:o,onClose:()=>_(!1),onSuccess:()=>{_(!1),l()}})]})}function KA({csp:e,categoryId:t,subcategoryId:r,productIndex:n,totalProducts:a,onUnlink:s,onRefresh:o,onOpenProductModal:l,onMoveUp:c,onMoveDown:h}){var x;const p=e.product,d=(x=p==null?void 0:p.title)!=null?x:"Producto",u=n>0,f=n<a-1;return i.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded-lg bg-slate-50/90 border border-slate-100 hover:border-slate-200",children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[i.jsxs("div",{className:"flex flex-col gap-0 shrink-0",children:[i.jsx("button",{type:"button",disabled:!u,onClick:()=>c(t,r,e.id),className:"p-0.5 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Subir",children:i.jsx(yd,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",disabled:!f,onClick:()=>h(t,r,e.id),className:"p-0.5 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Bajar",children:i.jsx(gd,{className:"w-4 h-4"})})]}),i.jsx(Pt,{className:"w-4 h-4 text-gray-400 shrink-0"}),i.jsx("span",{className:"text-sm font-medium text-gray-800 truncate",children:d}),(p==null?void 0:p.handle)&&i.jsxs("span",{className:"text-xs text-gray-400 font-mono truncate",children:["/",p.handle]})]}),i.jsxs("div",{className:"flex gap-1 shrink-0",children:[(p==null?void 0:p.id)!=null&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>l("view",p.id),className:"p-1.5 text-primary-600 hover:bg-primary-50 rounded",title:"Ver producto",children:i.jsx(Jo,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>l("edit",p.id),className:"p-1.5 text-primary-600 hover:bg-primary-50 rounded",title:"Editar producto",children:i.jsx(yr,{className:"w-4 h-4"})})]}),i.jsx("button",{onClick:()=>s(e.id),className:"p-1.5 text-orange-600 hover:bg-orange-50 rounded",title:"Desvincular de esta categora-subcategora",children:i.jsx(Dg,{className:"w-4 h-4"})})]})]})}function GA({categoryId:e,subcategoryId:t,linkedProductIds:r,onLinkBatch:n,onClose:a,onSuccess:s}){const[o,l]=B.useState([]),[c,h]=B.useState(!0),[p,d]=B.useState(!1),[u,f]=B.useState(new Set);B.useEffect(()=>{let y=!1;function v(){return P(this,null,function*(){var _;h(!0);try{const O=yield he.subcategoryProducts.getAll({subcategory_id:t}),j=(Array.isArray(O)?O:(_=O.data)!=null?_:[]).filter(k=>k.product_id&&!r.includes(k.product_id)).map(k=>k.product).filter(k=>k!=null);y||(l(j),f(new Set))}catch(O){y||l([])}finally{y||h(!1)}})}return v(),()=>{y=!0}},[t,r.join(",")]);const x=y=>{f(v=>{const _=new Set(v);return _.has(y)?_.delete(y):_.add(y),_})},b=()=>f(new Set(o.filter(y=>y.id!=null).map(y=>y.id))),w=()=>f(new Set),g=()=>P(this,null,function*(){const y=Array.from(u);if(y.length!==0){d(!0);try{yield n(e,t,y),s()}finally{d(!1)}}}),m=u.size;return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:a,children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col m-4",onClick:y=>y.stopPropagation(),children:[i.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Vincular productos a esta categora-subcategora"}),i.jsx("button",{type:"button",onClick:a,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:""})]}),i.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:c?i.jsx("p",{className:"text-gray-500",children:"Cargando productos de la subcategora..."}):o.length===0?i.jsx("p",{className:"text-gray-500",children:"No hay ms productos en esta subcategora para vincular (o ya estn todos vinculados)."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm text-gray-600",children:[i.jsx("button",{type:"button",onClick:b,className:"text-primary-600 hover:underline",children:"Seleccionar todos"}),i.jsx("span",{children:""}),i.jsx("button",{type:"button",onClick:w,className:"text-primary-600 hover:underline",children:"Quitar seleccin"}),m>0&&i.jsxs("span",{className:"ml-auto font-medium text-gray-800",children:[m," seleccionado",m!==1?"s":""]})]}),i.jsx("ul",{className:"space-y-2",children:o.filter(y=>y.id!=null).map(y=>i.jsx("li",{className:"flex items-center gap-3 py-2 px-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1 min-w-0",children:[i.jsx("input",{type:"checkbox",checked:u.has(y.id),onChange:()=>x(y.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),i.jsx("span",{className:"font-medium text-gray-800 truncate",children:y.title})]})},y.id))})]})}),i.jsxs("div",{className:"p-4 border-t flex flex-wrap items-center gap-2",children:[o.length>0&&i.jsx("button",{type:"button",disabled:p||m===0,onClick:g,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:p?`Vinculando ${m}`:`Vincular seleccionados${m>0?` (${m})`:""}`}),i.jsx("button",{type:"button",onClick:a,className:"btn-secondary",children:"Cerrar"})]})]})})}function JA(e){const t=Math.floor(e/1e3),r=Math.floor(t/60);return r>0?`${r} min ${t%60} s`:`${t} s`}function Xd({syncing:e,progress:t,lastResult:r,onClose:n,showResult:a=!0}){var c,h;const s=(c=t==null?void 0:t.totalItems)!=null?c:0,o=(h=t==null?void 0:t.done)!=null?h:0,l=s>0?Math.round(o/s*100):0;return i.jsxs(i.Fragment,{children:[e&&t&&i.jsxs("div",{className:"card border-2 border-blue-200 bg-blue-50/50",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[i.jsx(bd,{className:"w-5 h-5 animate-spin text-blue-600"}),"Progreso del traspaso"]}),i.jsx("p",{className:"text-sm text-gray-700 mb-2",children:t.message}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:i.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${l}%`}})}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[i.jsxs("span",{children:["Paso: ",i.jsx("strong",{children:t.step==="categories"?"Categoras":t.step==="subcategories"?"Subcategoras":"Productos"})]}),i.jsxs("span",{children:["Completados: ",i.jsx("strong",{children:o})," / ",s]}),i.jsxs("span",{children:["Tiempo: ",i.jsx("strong",{children:JA(t.elapsedMs)})]}),t.errors>0&&i.jsxs("span",{className:"text-amber-700",children:["Errores: ",i.jsx("strong",{children:t.errors})]})]}),s>0&&i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Aproximadamente ",Math.max(0,s-o)," solicitudes restantes (rate limit: ~1 cada 300 ms)."]})]}),a&&r&&!e&&i.jsxs("div",{className:"card",children:[i.jsxs("h3",{className:"font-medium text-gray-900 mb-2 flex items-center gap-2",children:[i.jsx(N_,{className:"w-5 h-5 text-green-600"}),"Resultado del traspaso"]}),i.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[i.jsxs("li",{children:["Categoras: ",r.categories]}),i.jsxs("li",{children:["Subcategoras: ",r.subcategories]}),i.jsxs("li",{children:["Productos: ",r.products]})]}),r.errors.length>0&&i.jsxs("div",{className:"mt-4 p-3 bg-red-50 rounded-lg border border-red-200",children:[i.jsx("p",{className:"text-sm font-medium text-red-800 mb-2",children:"Errores:"}),i.jsx("ul",{className:"text-sm text-red-700 list-disc list-inside space-y-1",children:r.errors.map((p,d)=>i.jsx("li",{children:p},d))})]}),n&&i.jsx("button",{type:"button",onClick:n,className:"btn-secondary mt-4",children:"Cerrar"})]})]})}function YA({category:e,onSuccess:t,onCancel:r}){const[n,a]=B.useState(!1),[s,o]=B.useState([]),[l,c]=B.useState([]),[h,p]=B.useState([]),[d,u]=B.useState({}),[f,x]=B.useState(!1),[b,w]=B.useState(""),[g,m]=B.useState(!1),[y,v]=B.useState(""),[_,O]=B.useState(1),[A,j]=B.useState(1),[k,S]=B.useState(0),[N,E]=B.useState(1),[T,C]=B.useState(!1),[D,z]=B.useState(null),[V,G]=B.useState(null),[U,M]=B.useState(!1),{register:R,handleSubmit:L,formState:{errors:$},watch:Q,setValue:Y}=ol({defaultValues:e||{name:"",slug:"",description:"",parent_id:void 0,position:0,active:!0,notes:""}});B.useEffect(()=>{q(),e!=null&&e.id&&J()},[e==null?void 0:e.id]),B.useEffect(()=>{H()},[_,y]);const q=()=>P(this,null,function*(){try{const I=yield _t.categories.getAll(),W=Array.isArray(I)?I:I.data||[],ae=e?K(W,e.id):W;o(ae)}catch(I){console.error("Error cargando categoras padre:",I)}}),K=(I,W)=>{const ae=ie=>{const pe=I.filter(je=>je.parent_id===ie),ye=pe.map(je=>je.id);return pe.forEach(je=>{ye.push(...ae(je.id))}),ye},ne=new Set([W,...ae(W)]);return I.filter(ie=>!ne.has(ie.id))},H=()=>P(this,null,function*(){try{const I=yield he.subcategories.getAll({active:null,search:y||void 0,page:_,limit:20});Array.isArray(I)?(c(I),j(1),S(I.length)):I.data&&I.pagination?(c(I.data),j(I.pagination.totalPages),S(I.pagination.total)):(c([]),j(1),S(0))}catch(I){console.error("Error cargando subcategoras:",I),c([]),j(1),S(0)}}),J=()=>P(this,null,function*(){if(e!=null&&e.id)try{const I=yield he.categorySubcategories.getAll({category_id:e.id});p(Array.isArray(I)?I:[]);const W={};for(const ae of I)try{const ne=yield he.subcategoryProducts.getAll({subcategory_id:ae.subcategory_id});W[ae.subcategory_id]=Array.isArray(ne)?ne.length:0}catch(ne){W[ae.subcategory_id]=0}u(W)}catch(I){console.error("Error cargando subcategoras asignadas:",I)}}),Z=I=>P(this,null,function*(){if(!(e!=null&&e.id)){te.error("Debes guardar la categora primero");return}if(h.find(ae=>ae.subcategory_id===I)){te.error("Esta subcategora ya est vinculada");return}try{yield he.categorySubcategories.create({category_id:e.id,subcategory_id:I,position:h.length,active:!0}),te.success("Subcategora vinculada correctamente"),yield J(),yield H()}catch(ae){te.error("Error al vincular subcategora: "+ae.message)}}),ee=I=>P(this,null,function*(){if(confirm("Ests seguro de que quieres desvincular esta subcategora?"))try{yield he.categorySubcategories.delete(I),te.success("Subcategora desvinculada correctamente"),yield J()}catch(W){te.error("Error al desvincular subcategora: "+W.message)}}),ue=()=>P(this,null,function*(){if(!b.trim()){te.error("El ttulo de la subcategora es obligatorio");return}if(!(e!=null&&e.id)){te.error("Debes guardar la categora primero");return}m(!0);try{const I=yield he.subcategories.create({title:b.trim(),active:!0,position:0});yield he.categorySubcategories.create({category_id:e.id,subcategory_id:I.id,position:h.length,active:!0}),te.success("Subcategora creada y vinculada correctamente"),w(""),x(!1),yield H(),yield J()}catch(I){te.error("Error al crear subcategora: "+I.message)}finally{m(!1)}}),oe=Q("name");B.useEffect(()=>{if(!e&&oe){const I=oe.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");Y("slug",I)}},[oe,e,Y]);const le=I=>P(this,null,function*(){a(!0);try{!e&&(I.active===void 0||I.active===null)&&(I.active=!0);let W;e?(W=yield _t.categories.update(e.id,I),te.success("Categora actualizada correctamente"),yield J()):(W=yield _t.categories.create(I),te.success("Categora creada correctamente")),t(W)}catch(W){te.error("Error al guardar: "+W.message)}finally{a(!1)}}),ge=l.filter(I=>!h.some(W=>W.subcategory_id===I.id)),ke=h.filter(I=>{var ne,ie;if(!y)return!0;const W=l.find(pe=>pe.id===I.subcategory_id);if(!W)return!1;const ae=y.toLowerCase();return((ne=W.title)==null?void 0:ne.toLowerCase().includes(ae))||((ie=W.slug)==null?void 0:ie.toLowerCase().includes(ae))||W.description_html&&W.description_html.replace(/<[^>]*>/g,"").toLowerCase().includes(ae)}),Ae=10,re=(N-1)*Ae,se=re+Ae,fe=ke.slice(re,se),F=Math.ceil(ke.length/Ae);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e?"Editar categora":"Nueva categora"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Organiza productos por categoras jerrquicas"})]}),i.jsxs("button",{onClick:r,className:"btn-secondary flex items-center gap-2",children:[i.jsx(ir,{className:"w-5 h-5"}),"Cancelar"]})]}),i.jsx("div",{className:"card bg-green-50 border-green-200",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-green-900",children:"Qu es una Categora en Shopify?"}),i.jsxs("p",{className:"text-sm text-green-800 leading-relaxed",children:["Las ",i.jsx("strong",{children:"categoras"}),' son una forma estructurada y jerrquica de clasificar productos en tu tienda. A diferencia de las colecciones (que son ms flexibles y orientadas a marketing), las categoras proporcionan una taxonoma estable y organizada. Pueden tener una estructura de rbol (categoras padre e hijas), lo que permite crear jerarquas como "Alimentos"  "Sin Gluten"  "Panadera". En Shopify, las categoras ayudan a organizar el inventario, facilitan la bsqueda y filtrado de productos, y pueden usarse para crear reglas de colecciones automticas. Tambin permiten definir ',i.jsx("strong",{children:"atributos especficos"}),' por categora (por ejemplo, "Nivel de protena" para suplementos), lo que estandariza la informacin de productos similares y mejora la experiencia de bsqueda del cliente.']})]})}),i.jsxs("form",{onSubmit:L(le),className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-end gap-4 pb-4",children:[i.jsx("button",{type:"button",onClick:r,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{type:"submit",disabled:n,className:"btn-primary flex items-center gap-2",children:[n?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),e?"Actualizar":"Crear"," categora"]})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Informacin bsica"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),i.jsx("input",de(X({},R("name",{required:"El nombre es obligatorio"})),{className:"input-field",placeholder:"Nombre de la categora"})),i.jsx(Se,{text:"Nombre de la categora que aparecer en la tienda. Ejemplos: 'Alimentos sin gluten', 'Suplementos vitamnicos'."}),$.name&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.name.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug (URL) *"}),i.jsx("input",de(X({},R("slug",{required:"El slug es obligatorio"})),{className:"input-field font-mono",placeholder:"alimentos-sin-gluten"})),i.jsx(Se,{text:"URL amigable para la categora (se genera automticamente desde el nombre). Solo letras, nmeros y guiones."}),$.slug&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.slug.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora Padre (opcional)"}),i.jsx(rn,{value:Q("parent_id"),onChange:I=>Y("parent_id",I||void 0),options:s.map(I=>{const W=s.find(ne=>ne.id===I.parent_id),ae=W?`${W.name}  ${I.name}`:I.name;return{id:I.id,name:ae}}),placeholder:"Sin categora padre (categora raz)",searchPlaceholder:"Buscar categora padre...",emptyMessage:"No se encontraron categoras disponibles"}),i.jsx(Se,{text:"Selecciona una categora padre para crear una jerarqua. Djalo vaco para crear una categora raz. No puedes seleccionar la categora actual ni sus descendientes."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),i.jsx(Lt,{value:Q("description")||"",onChange:I=>Y("description",I),placeholder:"Descripcin de la categora..."}),i.jsx(Se,{text:"Descripcin opcional de la categora para uso interno. Puedes usar formato HTML."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Posicin"}),i.jsx("input",de(X({},R("position",{valueAsNumber:!0})),{type:"number",className:"input-field",placeholder:"0"})),i.jsx(Se,{text:"Orden de visualizacin (menor nmero = primero)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),i.jsxs("select",de(X({},R("active",{setValueAs:I=>I==="true"})),{className:"input-field",children:[i.jsx("option",{value:"true",children:"Activa"}),i.jsx("option",{value:"false",children:"Inactiva"})]})),i.jsx(Se,{text:"Las categoras inactivas no aparecern en los selects, pero se conservan en la base de datos."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),i.jsx("textarea",de(X({},R("notes")),{rows:2,className:"input-field",placeholder:"Notas internas sobre esta categora..."})),i.jsx(Se,{text:"Notas internas para uso administrativo."})]})]})]}),e!=null&&e.id?i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Subcategoras Vinculadas"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Gestiona las subcategoras de esta categora. Al vincular una subcategora, todos sus productos se copiarn automticamente."}),h.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsxs("h3",{className:"text-sm font-medium text-gray-700",children:["Subcategoras vinculadas (",h.length,")"]})}),i.jsxs("div",{className:"mb-3 relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",value:y,onChange:I=>{v(I.target.value),O(1),E(1)},placeholder:"Buscar subcategoras vinculadas...",className:"input-field pl-10"})]}),i.jsx("div",{className:"space-y-2",children:ke.length===0?i.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:y?"No se encontraron subcategoras con ese criterio":"No hay subcategoras vinculadas"}):i.jsxs(i.Fragment,{children:[fe.map(I=>{const W=l.find(ae=>ae.id===I.subcategory_id);return W?i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[i.jsx(xd,{className:"w-4 h-4 text-primary-600 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"font-medium text-gray-900",children:W.title}),!W.active&&i.jsx("span",{className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded-full text-xs",children:"Inactiva"})]}),W.description_html&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:[W.description_html.replace(/<[^>]*>/g,"").substring(0,60),"..."]}),i.jsx("div",{className:"flex items-center gap-3 mt-1",children:i.jsx("p",{className:"text-xs text-primary-600",children:d[W.id]!==void 0?`${d[W.id]} producto(s) se copiarn automticamente`:"Los productos se copiarn automticamente"})})]})]}),i.jsx("button",{onClick:()=>ee(I.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg flex-shrink-0",title:"Desvincular subcategora",children:i.jsx(ht,{className:"w-4 h-4"})})]},I.id):null}),F>1&&i.jsxs("div",{className:"flex justify-center items-center gap-4 mt-3",children:[i.jsx("button",{type:"button",onClick:()=>E(I=>Math.max(1,I-1)),disabled:N===1,className:"btn-secondary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),i.jsxs("span",{className:"text-xs text-gray-600",children:["Pgina ",N," de ",F," (",ke.length," total)"]}),i.jsx("button",{type:"button",onClick:()=>E(I=>Math.min(F,I+1)),disabled:N===F,className:"btn-secondary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Vincular subcategora existente"}),ge.length===0?i.jsx("p",{className:"text-sm text-gray-500 py-2",children:"Todas las subcategoras disponibles ya estn vinculadas."}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",value:y,onChange:I=>{v(I.target.value),O(1)},placeholder:"Buscar subcategoras disponibles...",className:"input-field pl-10"})]}),ge.length===0?i.jsx("p",{className:"text-sm text-gray-500 py-2 text-center",children:y?"No se encontraron subcategoras con ese criterio":"No hay subcategoras disponibles"}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto",children:ge.map(I=>i.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-gray-900",children:I.title}),I.description_html&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:[I.description_html.replace(/<[^>]*>/g,"").substring(0,60),"..."]}),I.slug&&i.jsxs("p",{className:"text-xs text-gray-500 font-mono mt-1",children:["/",I.slug]})]}),i.jsx("button",{type:"button",onClick:()=>Z(I.id),className:"btn-primary text-sm ml-3 flex-shrink-0",children:"Vincular"})]},I.id))}),A>1&&i.jsxs("div",{className:"flex justify-center items-center gap-4 mt-3",children:[i.jsx("button",{type:"button",onClick:()=>O(I=>Math.max(1,I-1)),disabled:_===1,className:"btn-secondary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),i.jsxs("span",{className:"text-xs text-gray-600",children:["Pgina ",_," de ",A," ",k>0&&`(${k} total)`]}),i.jsx("button",{type:"button",onClick:()=>O(I=>Math.min(A,I+1)),disabled:_===A,className:"btn-secondary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Crear nueva subcategora"}),f?i.jsxs("div",{className:"space-y-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo de la nueva subcategora *"}),i.jsx("input",{type:"text",value:b,onChange:I=>w(I.target.value),className:"input-field",placeholder:"Ej: Sin Gluten, Sin Lactosa...",onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),ue())}})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{type:"button",onClick:ue,disabled:g||!b.trim(),className:"btn-primary flex items-center gap-2",children:[g?i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(bt,{className:"w-4 h-4"}),"Crear y vincular"]}),i.jsx("button",{type:"button",onClick:()=>{x(!1),w("")},className:"btn-secondary",children:"Cancelar"})]})]}):i.jsxs("button",{type:"button",onClick:()=>x(!0),className:"btn-secondary flex items-center gap-2",children:[i.jsx(bt,{className:"w-4 h-4"}),"Crear y vincular nueva subcategora"]})]})]}):i.jsx("div",{className:"card bg-yellow-50 border-yellow-200",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-semibold text-yellow-900",children:" Consejo"}),i.jsx("p",{className:"text-sm text-yellow-800",children:"Guarda la categora primero para poder vincular subcategoras y gestionar sus productos."})]})}),i.jsxs("div",{className:"flex justify-end gap-4 flex-wrap",children:[(e==null?void 0:e.id)&&i.jsxs("button",{type:"button",onClick:()=>P(this,null,function*(){M(!0),C(!0),z(null),G(null);try{const I=yield as.syncCategoryTreeWithProgress(e.id,W=>{var ae,ne,ie,pe,ye,je,Ne,Ze;W.type==="progress"?z({step:(ae=W.step)!=null?ae:"categories",current:(ne=W.current)!=null?ne:0,total:(ie=W.total)!=null?ie:0,totalItems:(pe=W.totalItems)!=null?pe:0,message:(ye=W.message)!=null?ye:"",elapsedMs:(je=W.elapsedMs)!=null?je:0,done:(Ne=W.done)!=null?Ne:0,errors:(Ze=W.errors)!=null?Ze:0}):W.type==="done"&&W.results&&(G(W.results),z(null),te.success(`Traspaso completado: ${W.results.categories} categoras, ${W.results.subcategories} subcategoras, ${W.results.products} productos.`),W.results.errors.length>0&&te.error(`${W.results.errors.length} error(es). Ver detalles en el resultado.`))});I.type==="done"&&I.results&&!V&&G(I.results)}catch(I){te.error(I instanceof Error?I.message:"Error al traspasar")}finally{C(!1),z(null)}}),disabled:T,className:"btn-secondary flex items-center gap-2",children:[T?i.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"}):i.jsx(ta,{className:"w-4 h-4"}),"Traspasar a Shopify (categora + hijas + subcategoras + productos)"]}),i.jsx("button",{type:"button",onClick:r,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{type:"submit",disabled:n,className:"btn-primary flex items-center gap-2",children:[n?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),e?"Actualizar":"Crear"," categora"]})]})]}),U&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>!T&&M(!1),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto p-4",onClick:I=>I.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Traspaso a Shopify"}),!T&&i.jsx("button",{type:"button",onClick:()=>M(!1),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:""})]}),i.jsx(Xd,{syncing:T,progress:D,lastResult:V,onClose:()=>M(!1),showResult:!0})]})})]})}function QA({subcategory:e,onClose:t,onEdit:r}){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e.title}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Detalles de la subcategora"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:r,className:"btn-primary flex items-center gap-2",children:[i.jsx(yr,{className:"w-5 h-5"}),"Editar"]}),i.jsxs("button",{onClick:t,className:"btn-secondary flex items-center gap-2",children:[i.jsx(ir,{className:"w-5 h-5"}),"Cerrar"]})]})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Informacin bsica"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo"}),i.jsx("p",{className:"text-gray-900",children:e.title})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),i.jsxs("p",{className:"text-gray-900 font-mono",children:["/",e.slug]})]}),e.description_html&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),i.jsx("div",{className:"text-gray-900 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e.description_html}})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Posicin"}),i.jsx("p",{className:"text-gray-900",children:e.position})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.active?"Activa":"Inactiva"})]})]}),e.notes&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),i.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:e.notes})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Creado"}),i.jsx("p",{className:"text-gray-900 text-sm",children:Zr(new Date(e.created_at),"dd MMM yyyy HH:mm")})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Actualizado"}),i.jsx("p",{className:"text-gray-900 text-sm",children:Zr(new Date(e.updated_at),"dd MMM yyyy HH:mm")})]})]})]})]})]})}function XA(){const e=kt(),[t,r]=B.useState([]),[n,a]=B.useState(!0),[s,o]=B.useState(1),[l,c]=B.useState(1),[h,p]=B.useState(0),[d,u]=B.useState(""),[f,x]=B.useState(null),[b,w]=B.useState(),[g,m]=B.useState(),[y,v]=B.useState(null),[_,O]=B.useState({}),[A,j]=B.useState({}),k=()=>P(this,null,function*(){var N,E;a(!0);try{const T=yield he.subcategories.getAll({active:f,search:d||void 0,order_by:"title",order_asc:!0,page:s,limit:20});let C=[];Array.isArray(T)?(C=T,r(T),c(1),p(T.length)):T.data&&T.pagination?(C=T.data,r(T.data),c(T.pagination.totalPages),p(T.pagination.total)):(r([]),c(1),p(0));try{const[D,z]=yield Promise.all([he.subcategoryProducts.getAll(void 0),he.subcategoryCriteria.getAll(void 0)]),V=Array.isArray(D)?D:(N=D==null?void 0:D.data)!=null?N:[],G=Array.isArray(z)?z:(E=z==null?void 0:z.data)!=null?E:[],U={},M={};for(const R of C)U[R.id]=0,M[R.id]=0;for(const R of V)R.subcategory_id&&U[R.subcategory_id]!==void 0&&(U[R.subcategory_id]+=1);for(const R of G)R.subcategory_id&&M[R.subcategory_id]!==void 0&&(M[R.subcategory_id]+=1);O(U),j(M)}catch(D){O({}),j({})}}catch(T){te.error("Error al cargar subcategoras: "+T.message),r([]),c(1),p(0),O({}),j({})}finally{a(!1)}});B.useEffect(()=>{const N=setTimeout(()=>{k()},300);return()=>clearTimeout(N)},[d,f,s]);const S=N=>P(this,null,function*(){if(confirm("Ests seguro de que quieres eliminar esta subcategora?"))try{yield he.subcategories.delete(N),te.success("Subcategora eliminada correctamente"),yield k()}catch(E){te.error("Error al eliminar: "+E.message)}});return b?i.jsx(QA,{subcategory:b,onClose:()=>w(void 0),onEdit:()=>{m(b),w(void 0)}}):g?(e(`/catalog/subcategories/${g.id}/edit`),null):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Subcategoras"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona las subcategoras reutilizables"})]}),i.jsxs("button",{onClick:()=>e("/catalog/subcategories/new"),className:"btn-primary flex items-center gap-2",children:[i.jsx(bt,{className:"w-5 h-5"}),"Nueva subcategora"]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Buscar por ttulo o slug...",value:d,onChange:N=>{u(N.target.value),o(1)},className:"input-field pl-10"})]}),i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsx(bl,{value:f===null?"all":f?"true":"false",onChange:N=>{x(N==="all"?null:N==="true"),o(1)},options:[{value:"all",label:"Todos"},{value:"true",label:"Solo activos"},{value:"false",label:"Solo inactivos"}],placeholder:"Estado",icon:i.jsx(vd,{className:"w-4 h-4 text-gray-400"})})}),(d||f!==null)&&i.jsxs("button",{onClick:()=>{u(""),x(null),o(1)},className:"btn-secondary flex items-center gap-1 px-3",title:"Limpiar filtros",children:[i.jsx(jd,{className:"w-4 h-4"}),"Limpiar"]})]})]})}),n?i.jsxs("div",{className:"card text-center py-12",children:[i.jsx("div",{className:"inline-block w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando subcategoras..."})]}):t.length===0?i.jsxs("div",{className:"card text-center py-12",children:[i.jsx(wd,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-gray-600 mb-4",children:d?"No se encontraron subcategoras":"No hay subcategoras creadas"}),!d&&i.jsx("button",{onClick:()=>e("/catalog/subcategories/new"),className:"btn-primary",children:"Crear primera subcategora"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-3",children:t.map(N=>i.jsx("div",{className:"card hover:shadow-lg transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.title}),!N.active&&i.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:"Inactiva"}),_[N.id]!==void 0&&i.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:[_[N.id]," ",_[N.id]===1?"producto":"productos"]}),A[N.id]!==void 0&&i.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:[A[N.id]," ",A[N.id]===1?"criterio":"criterios"]})]}),N.slug&&i.jsxs("p",{className:"text-sm text-gray-500 font-mono mb-2",children:["/",N.slug]}),N.description_html&&i.jsx("div",{className:"text-sm text-gray-600 mb-2 line-clamp-2",dangerouslySetInnerHTML:{__html:N.description_html}}),i.jsx("div",{className:"text-xs text-gray-500",children:Zr(new Date(N.created_at),"dd MMM yyyy")})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>e(`/catalog/subcategories/${N.id}/products`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Gestionar productos",children:i.jsx(Pt,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>v(N.id),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded-lg",title:"Gestionar criterios",children:i.jsx(Ga,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>e(`/catalog/subcategory-content/${N.id}`),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg",title:"Gestionar contenido",children:i.jsx(Yo,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>w(N),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg",children:i.jsx(Jo,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>m(N),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg",children:i.jsx(yr,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>S(N.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx(ht,{className:"w-4 h-4"})})]})]})},N.id))}),i.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[i.jsx("button",{onClick:()=>o(N=>Math.max(1,N-1)),disabled:s===1||l<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),i.jsxs("span",{className:"text-gray-600",children:["Pgina ",s," de ",l," ",h>0&&`(${h} total)`]}),i.jsx("button",{onClick:()=>o(N=>Math.min(l,N+1)),disabled:s===l||l<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]}),y&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>v(null),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:N=>N.stopPropagation(),children:[i.jsx("div",{className:"flex justify-end p-2 border-b shrink-0",children:i.jsx("button",{type:"button",onClick:()=>v(null),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg text-xl leading-none",children:""})}),i.jsx("div",{className:"overflow-y-auto flex-1 p-4",children:i.jsx(Qd,{subcategoryIdProp:y,embedded:!0,onClose:()=>v(null)})})]})})]})}function ZA({subcategory:e,onSuccess:t,onCancel:r}){const[n,a]=B.useState(!1),[s,o]=B.useState(null),[l,c]=B.useState([]),[h,p]=B.useState([]),[d,u]=B.useState(!1),[f,x]=B.useState(!1),[b,w]=B.useState(void 0),[g,m]=B.useState(!1),[y,v]=B.useState(null),[_,O]=B.useState(null),[A,j]=B.useState(!1),{register:k,handleSubmit:S,formState:{errors:N},watch:E,setValue:T}=ol({defaultValues:e||{title:"",slug:"",description_html:"",active:!0,position:0,notes:""}});B.useEffect(()=>{e!=null&&e.id&&(D(),z())},[e==null?void 0:e.id]);const C=E("title");B.useEffect(()=>{if(!e&&C){const L=C.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");T("slug",L)}},[C,e,T]);const D=()=>P(this,null,function*(){if(e!=null&&e.id){u(!0);try{const L=yield he.subcategoryProducts.getAll({subcategory_id:e.id});c(Array.isArray(L)?L:[])}catch(L){console.error("Error cargando productos asignados:",L)}finally{u(!1)}}}),z=()=>P(this,null,function*(){try{const L=yield wt.getAll(1,100),$=Array.isArray(L)?L:L.data||[];p($)}catch(L){console.error("Error cargando productos:",L)}}),V=L=>P(this,null,function*(){if(confirm("Ests seguro de que quieres desasignar este producto?"))try{yield he.subcategoryProducts.delete(L),te.success("Producto desasignado correctamente"),yield D()}catch($){te.error("Error al desasignar producto: "+$.message)}}),G=L=>P(this,null,function*(){a(!0);try{let $;e?($=yield he.subcategories.update(e.id,L),te.success("Subcategora actualizada correctamente")):($=yield he.subcategories.create(L),te.success("Subcategora creada correctamente")),!e&&$.id&&(yield D(),yield z()),t($)}catch($){te.error("Error al guardar: "+$.message)}finally{a(!1)}}),U=L=>P(this,null,function*(){if(L!=null&&L.id){if(e!=null&&e.id)try{l.some(Q=>Q.product_id===L.id)?te.success("Producto actualizado correctamente"):(yield he.subcategoryProducts.create({subcategory_id:e.id,product_id:L.id,position:l.length}),te.success("Producto creado y asignado correctamente"),yield D()),yield z()}catch($){te.error("Error al asignar producto: "+$.message)}else te.success(b?"Producto actualizado correctamente":"Producto creado correctamente");w(L)}}),M=()=>{x(!1),w(void 0)},R=L=>P(this,null,function*(){o(L);try{const $=yield wt.getById(L);w($),x(!0)}catch($){te.error("Error al cargar el producto: "+($.message||"Unknown"))}finally{o(null)}});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e?"Editar subcategora":"Nueva subcategora"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Subcategoras reutilizables para mltiples categoras"})]}),i.jsxs("button",{onClick:r,className:"btn-secondary flex items-center gap-2",children:[i.jsx(ir,{className:"w-5 h-5"}),"Cancelar"]})]}),i.jsx("div",{className:"card bg-purple-50 border-purple-200",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-purple-900",children:"Qu es una subcategora?"}),i.jsxs("p",{className:"text-sm text-purple-800 leading-relaxed",children:["Las ",i.jsx("strong",{children:"subcategoras"}),' son elementos reutilizables que pueden pertenecer a mltiples categoras. A diferencia de las categoras (que son jerrquicas), las subcategoras permiten una organizacin ms flexible del catlogo. Por ejemplo, una subcategora "Sin Gluten" puede estar presente en varias categoras como "Alimentos", "Bebidas" o "Suplementos". Cada subcategora puede tener sus propios ',i.jsx("strong",{children:"criterios de valoracin"}),"y ",i.jsx("strong",{children:"contenido exclusivo"})," (aspectos a vigilar, ayuda, vdeos)."]})]})}),i.jsxs("form",{onSubmit:S(G),className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-end gap-4 pb-4 flex-wrap",children:[(e==null?void 0:e.id)&&i.jsxs("button",{type:"button",onClick:()=>P(this,null,function*(){if(e!=null&&e.id){j(!0),m(!0),v(null),O(null);try{const L=yield as.syncSubcategoryTreeWithProgress(e.id,$=>{var Q,Y,q,K,H,J,Z,ee;$.type==="progress"?v({step:(Q=$.step)!=null?Q:"subcategories",current:(Y=$.current)!=null?Y:0,total:(q=$.total)!=null?q:0,totalItems:(K=$.totalItems)!=null?K:0,message:(H=$.message)!=null?H:"",elapsedMs:(J=$.elapsedMs)!=null?J:0,done:(Z=$.done)!=null?Z:0,errors:(ee=$.errors)!=null?ee:0}):$.type==="done"&&$.results&&(O($.results),v(null),te.success(`Traspaso completado: ${$.results.subcategories} subcategora(s), ${$.results.products} productos.`),$.results.errors.length>0&&te.error(`${$.results.errors.length} error(es). Ver detalles en el resultado.`))});L.type==="done"&&L.results&&!_&&O(L.results)}catch(L){te.error(L instanceof Error?L.message:"Error al traspasar")}finally{m(!1),v(null)}}}),disabled:g,className:"btn-secondary flex items-center gap-2",children:[g?i.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"}):i.jsx(ta,{className:"w-4 h-4"}),"Traspasar a Shopify (subcategora + productos)"]}),i.jsx("button",{type:"button",onClick:r,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{type:"submit",disabled:n,className:"btn-primary flex items-center gap-2",children:[n?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),e?"Actualizar":"Crear"," subcategora"]})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Informacin bsica"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo *"}),i.jsx("input",de(X({},k("title",{required:"El ttulo es obligatorio"})),{className:"input-field",placeholder:"Ttulo de la subcategora"})),i.jsx(Se,{text:"Ttulo de la subcategora. Ejemplos: 'Sin Gluten', 'Sin Lactosa', 'Vegano'."}),N.title&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.title.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug (URL) *"}),i.jsx("input",de(X({},k("slug",{required:"El slug es obligatorio"})),{className:"input-field font-mono",placeholder:"sin-gluten"})),i.jsx(Se,{text:"URL amigable para la subcategora (se genera automticamente desde el ttulo)."}),N.slug&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.slug.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin HTML"}),i.jsx(Lt,{value:E("description_html")||"",onChange:L=>T("description_html",L),placeholder:"Descripcin de la subcategora..."}),i.jsx(Se,{text:"Descripcin opcional de la subcategora con formato HTML."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Posicin"}),i.jsx("input",de(X({},k("position",{valueAsNumber:!0})),{type:"number",className:"input-field",placeholder:"0"})),i.jsx(Se,{text:"Orden de visualizacin (menor nmero = primero)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),i.jsxs("select",de(X({},k("active",{setValueAs:L=>L==="true"})),{className:"input-field",children:[i.jsx("option",{value:"true",children:"Activa"}),i.jsx("option",{value:"false",children:"Inactiva"})]})),i.jsx(Se,{text:"Las subcategoras inactivas no aparecern en los selects."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),i.jsx("textarea",de(X({},k("notes")),{rows:2,className:"input-field",placeholder:"Notas internas sobre esta subcategora..."})),i.jsx(Se,{text:"Notas internas para uso administrativo."})]})]})]}),e!=null&&e.id?i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Productos Asignados"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Gestiona los productos de esta subcategora. Estos productos se copiarn automticamente cuando la subcategora se asigne a una categora."}),d?i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"inline-block w-6 h-6 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Cargando productos..."})]}):l.length>0?i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Productos asignados (",l.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.sort((L,$)=>L.position-$.position).map(L=>{const $=h.find(Q=>Q.id===L.product_id);return $?i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx(Pt,{className:"w-4 h-4 text-primary-600 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-gray-900 truncate",children:$.title}),$.vendor&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Marca: ",$.vendor]}),$.status&&i.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-xs ${$.status==="active"?"bg-green-100 text-green-800":$.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:$.status==="active"?"Activo":$.status==="draft"?"Borrador":"Archivado"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsxs("button",{type:"button",onClick:()=>$.id&&R($.id),disabled:s===$.id,className:"btn-secondary flex items-center gap-1 px-3 py-2 text-sm disabled:opacity-70",title:"Editar producto",children:[s===$.id?i.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"}):i.jsx(yr,{className:"w-4 h-4"}),"Editar"]}),i.jsx("button",{type:"button",onClick:()=>V(L.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg border border-red-200",title:"Desasignar producto",children:i.jsx(ht,{className:"w-4 h-4"})})]})]},L.id):null})})]}):i.jsxs("div",{className:"mb-6 text-center py-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsx(Pt,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),i.jsx("p",{className:"text-sm text-gray-500",children:"No hay productos asignados a esta subcategora"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Crear nuevo producto"}),i.jsxs("button",{type:"button",onClick:()=>x(!0),className:"btn-primary flex items-center gap-2",children:[i.jsx(bt,{className:"w-4 h-4"}),"Crear nuevo producto"]})]})]}):i.jsx("div",{className:"card bg-yellow-50 border-yellow-200",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-semibold text-yellow-900",children:" Consejo"}),i.jsx("p",{className:"text-sm text-yellow-800",children:"Guarda la subcategora primero para poder asignar productos."})]})}),i.jsxs("div",{className:"flex justify-end gap-4 flex-wrap",children:[(e==null?void 0:e.id)&&i.jsxs("button",{type:"button",onClick:()=>P(this,null,function*(){if(e!=null&&e.id){j(!0),m(!0),v(null),O(null);try{const L=yield as.syncSubcategoryTreeWithProgress(e.id,$=>{var Q,Y,q,K,H,J,Z,ee;$.type==="progress"?v({step:(Q=$.step)!=null?Q:"subcategories",current:(Y=$.current)!=null?Y:0,total:(q=$.total)!=null?q:0,totalItems:(K=$.totalItems)!=null?K:0,message:(H=$.message)!=null?H:"",elapsedMs:(J=$.elapsedMs)!=null?J:0,done:(Z=$.done)!=null?Z:0,errors:(ee=$.errors)!=null?ee:0}):$.type==="done"&&$.results&&(O($.results),v(null),te.success(`Traspaso completado: ${$.results.subcategories} subcategora(s), ${$.results.products} productos.`),$.results.errors.length>0&&te.error(`${$.results.errors.length} error(es). Ver detalles en el resultado.`))});L.type==="done"&&L.results&&!_&&O(L.results)}catch(L){te.error(L instanceof Error?L.message:"Error al traspasar")}finally{m(!1),v(null)}}}),disabled:g,className:"btn-secondary flex items-center gap-2",children:[g?i.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"}):i.jsx(ta,{className:"w-4 h-4"}),"Traspasar a Shopify (subcategora + productos)"]}),i.jsx("button",{type:"button",onClick:r,className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{type:"submit",disabled:n,className:"btn-primary flex items-center gap-2",children:[n?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),e?"Actualizar":"Crear"," subcategora"]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>!g&&j(!1),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto p-4",onClick:L=>L.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Traspaso a Shopify"}),!g&&i.jsx("button",{type:"button",onClick:()=>j(!1),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:""})]}),i.jsx(Xd,{syncing:g,progress:y,lastResult:_,onClose:()=>j(!1),showResult:!0})]})}),i.jsx(dv,{isOpen:f,onClose:M,title:b?"Editar producto":"Crear nuevo producto",size:"xl",children:i.jsx(_l,{product:b,onSuccess:U,onCancel:M})})]})}function eC(){const{subcategoryId:e}=kr(),t=kt(),[r,n]=B.useState(!0),[a,s]=B.useState([]),[o,l]=B.useState([]),[c,h]=B.useState(1),[p,d]=B.useState(1),[u,f]=B.useState(0);B.useEffect(()=>{e&&(x(),b())},[e,c]);const x=()=>P(this,null,function*(){if(e){n(!0);try{const y=yield he.subcategoryProducts.getAll({subcategory_id:e,page:c,limit:20});Array.isArray(y)?(s(y),d(1),f(y.length)):y.data&&y.pagination?(s(y.data),d(y.pagination.totalPages),f(y.pagination.total)):(s([]),d(1),f(0))}catch(y){te.error("Error al cargar productos: "+y.message),s([]),d(1),f(0)}finally{n(!1)}}}),b=()=>P(this,null,function*(){try{const y=yield wt.getAll(1,1e3),v=Array.isArray(y)?y:y.data||[];l(v)}catch(y){console.error("Error al cargar todos los productos:",y)}}),w=y=>P(this,null,function*(){if(!e)return;if(a.find(_=>_.product_id===y)){te.error("Este producto ya est asignado");return}try{yield he.subcategoryProducts.create({subcategory_id:e,product_id:y,position:a.length}),te.success("Producto asignado correctamente"),yield x()}catch(_){te.error("Error al asignar producto: "+_.message)}}),g=y=>P(this,null,function*(){if(confirm("Ests seguro de que quieres desasignar este producto?"))try{yield he.subcategoryProducts.delete(y),te.success("Producto desasignado correctamente"),yield x()}catch(v){te.error("Error al desasignar: "+v.message)}}),m=()=>{const y=new Set(a.map(v=>v.product_id));return o.filter(v=>v.id!=null&&!y.has(v.id))};return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>t("/catalog/subcategories"),className:"btn-secondary flex items-center gap-2 mb-4",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Volver a subcategoras"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Productos de la subcategora"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona los productos asociados a esta subcategora. Estos productos se copiarn automticamente cuando asignes esta subcategora a una categora."})]})}),i.jsx("div",{className:"card bg-blue-50 border-blue-200",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:"Informacin importante"}),i.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:"Los productos que asignes aqu se copiarn automticamente cuando asignes esta subcategora a una categora. Luego podrs eliminar productos especficos por categora si no aplican."})]})}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Productos asignados"}),a.length===0?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay productos asignados"}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-2",children:a.map(y=>{const _=y.product||o.find(O=>O.id===y.product_id);return _?i.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-3 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Pt,{className:"w-5 h-5 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:_.title}),_.vendor&&i.jsx("p",{className:"text-sm text-gray-500",children:_.vendor})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>t(`/products/${_.id}/edit`),className:"btn-secondary flex items-center gap-1 px-3 py-2 text-sm",title:"Editar producto",children:[i.jsx(yr,{className:"w-4 h-4"}),"Editar"]}),i.jsx("button",{type:"button",onClick:()=>g(y.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg border border-red-200 transition-colors",title:"Desasignar producto",children:i.jsx(ht,{className:"w-4 h-4"})})]})]},y.id):i.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-3 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Pt,{className:"w-5 h-5 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Cargando producto..."}),i.jsx("p",{className:"text-xs text-gray-400",children:y.product_id})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>t(`/products/${y.product_id}/edit`),className:"btn-secondary flex items-center gap-1 px-3 py-2 text-sm",title:"Editar producto",children:[i.jsx(yr,{className:"w-4 h-4"}),"Editar"]}),i.jsx("button",{type:"button",onClick:()=>g(y.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg border border-red-200",title:"Desasignar producto",children:i.jsx(ht,{className:"w-4 h-4"})})]})]},y.id)})}),i.jsxs("div",{className:"flex justify-center items-center gap-4 mt-4",children:[i.jsx("button",{onClick:()=>h(y=>Math.max(1,y-1)),disabled:c===1||p<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),i.jsxs("span",{className:"text-gray-600",children:["Pgina ",c," de ",p," ",u>0&&`(${u} total)`]}),i.jsx("button",{onClick:()=>h(y=>Math.min(p,y+1)),disabled:c===p||p<=1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Aadir producto"}),m().length===0?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"Todos los productos disponibles ya estn asignados"}):i.jsx(rn,{options:m().filter(y=>y.id).map(y=>({id:y.id,name:`${y.title}${y.vendor?` - ${y.vendor}`:""}`})),value:"",onChange:y=>{y&&typeof y=="string"&&w(y)},placeholder:"Selecciona un producto para agregar...",searchPlaceholder:"Buscar producto..."})]})]})}const ia="catalog";function pv(){const{productId:e}=kr(),t=kt(),[r,n]=B.useState(!1),[a,s]=B.useState(null),[o,l]=B.useState([]),[c,h]=B.useState(""),[p,d]=B.useState(""),[u,f]=B.useState([]),[x,b]=B.useState([]),[w,g]=B.useState([]);B.useEffect(()=>{m(),e&&(y(e),v(e))},[e]);const m=()=>P(this,null,function*(){try{const S=yield wt.getAll(1,100),N=Array.isArray(S)?S:S.data||[];l(N)}catch(S){console.error("Error al cargar productos:",S)}}),y=S=>P(this,null,function*(){try{const N=yield wt.getById(S);s(N)}catch(N){te.error("Error al cargar producto: "+N.message)}}),v=S=>P(this,null,function*(){try{const T=((yield wt.getById(S)).metafields||[]).filter(U=>U.namespace===ia),C=T.find(U=>U.key==="aspectos_html"),D=T.find(U=>U.key==="ayuda_html"),z=T.find(U=>U.key==="videos_explicativos"),V=T.find(U=>U.key==="videos_experiencias"),G=T.find(U=>U.key==="videos_producto");if(C&&h(C.value||""),D&&d(D.value||""),z){const U=z.value_type==="json"&&z.value_json?z.value_json:z.value?JSON.parse(z.value):[];f(Array.isArray(U)?U:[])}if(V){const U=V.value_type==="json"&&V.value_json?V.value_json:V.value?JSON.parse(V.value):[];b(Array.isArray(U)?U:[])}if(G){const U=G.value_type==="json"&&G.value_json?G.value_json:G.value?JSON.parse(G.value):[];g(Array.isArray(U)?U:[])}}catch(N){console.error("Error al cargar contenido:",N)}}),_=S=>{const N={url:"",title:"",description:""};S==="explicativos"?f([...u,N]):S==="experiencias"?b([...x,N]):g([...w,N])},O=(S,N,E,T)=>{const D=[...S==="explicativos"?u:S==="experiencias"?x:w];D[N]=de(X({},D[N]),{[E]:T}),S==="explicativos"?f(D):S==="experiencias"?b(D):g(D)},A=(S,N)=>{S==="explicativos"?f(u.filter((E,T)=>T!==N)):S==="experiencias"?b(x.filter((E,T)=>T!==N)):g(w.filter((E,T)=>T!==N))},j=()=>P(this,null,function*(){if(!(a!=null&&a.id)){te.error("Debes seleccionar un producto");return}n(!0);try{const T=[...((yield wt.getById(a.id)).metafields||[]).filter(C=>C.namespace!==ia)];c&&T.push({product_id:a.id,namespace:ia,key:"aspectos_html",value:c,value_type:"string"}),p&&T.push({product_id:a.id,namespace:ia,key:"ayuda_html",value:p,value_type:"string"}),u.length>0&&T.push({product_id:a.id,namespace:ia,key:"videos_explicativos",value_type:"json",value_json:u}),x.length>0&&T.push({product_id:a.id,namespace:ia,key:"videos_experiencias",value_type:"json",value_json:x}),w.length>0&&T.push({product_id:a.id,namespace:ia,key:"videos_producto",value_type:"json",value_json:w}),yield wt.update(a.id,{metafields:T}),te.success("Contenido guardado correctamente"),t("/products")}catch(S){te.error("Error al guardar: "+S.message)}finally{n(!1)}}),k=(S,N)=>{const E=S==="explicativos"?u:S==="experiencias"?x:w;return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:N}),i.jsxs("button",{type:"button",onClick:()=>_(S),className:"btn-secondary flex items-center gap-1 text-sm",children:[i.jsx(bt,{className:"w-4 h-4"}),"Aadir vdeo"]})]}),E.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay vdeos aadidos"}):i.jsx("div",{className:"space-y-2",children:E.map((T,C)=>i.jsx("div",{className:"border rounded-lg p-3 bg-gray-50",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(_d,{className:"w-5 h-5 text-gray-400 mt-1"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("input",{type:"url",value:T.url||"",onChange:D=>O(S,C,"url",D.target.value),placeholder:"URL del vdeo",className:"input-field text-sm"}),i.jsx("input",{type:"text",value:T.title||"",onChange:D=>O(S,C,"title",D.target.value),placeholder:"Ttulo del vdeo",className:"input-field text-sm"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Descripcin"}),i.jsx(Lt,{value:T.description||"",onChange:D=>O(S,C,"description",D),placeholder:"Descripcin del vdeo..."})]})]}),i.jsx("button",{type:"button",onClick:()=>A(S,C),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx(ht,{className:"w-4 h-4"})})]})},C))})]})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>t("/products"),className:"btn-secondary flex items-center gap-2 mb-4",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Volver a productos"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Contenido de producto"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona el contenido exclusivo del producto"})]}),i.jsxs("button",{onClick:()=>t("/products"),className:"btn-secondary flex items-center gap-2",children:[i.jsx(ir,{className:"w-5 h-5"}),"Cancelar"]})]}),i.jsx("div",{className:"card bg-blue-50 border-blue-200",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:"Contenido exclusivo por producto"}),i.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:'Cada producto puede tener contenido exclusivo almacenado en metafields. Este contenido se guarda con el namespace "catalog" y puede incluir aspectos a vigilar, informacin de ayuda, y vdeos explicativos, de experiencias o especficos del producto.'})]})}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Seleccin de producto"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Producto *"}),i.jsx(rn,{value:(a==null?void 0:a.id)||e,onChange:S=>{const N=o.find(E=>E.id===S);s(N||null),N!=null&&N.id&&v(N.id)},options:o.filter(S=>S.id).map(S=>({id:S.id,name:S.title})),placeholder:"Seleccionar producto...",searchPlaceholder:"Buscar producto...",disabled:!!e})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>t("/products"),className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{onClick:j,disabled:r,className:"btn-primary flex items-center gap-2",children:[r?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),"Guardar contenido"]})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Aspectos a vigilar"}),i.jsx(Lt,{value:c,onChange:h,placeholder:"Informacin sobre aspectos a vigilar en este producto..."})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Lo que s ayuda"}),i.jsx(Lt,{value:p,onChange:d,placeholder:"Informacin sobre lo que s ayuda en este producto..."})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Vdeos"}),i.jsxs("div",{className:"space-y-6",children:[k("explicativos","Vdeos explicativos"),k("experiencias","Vdeos de experiencias"),k("producto","Vdeos de producto")]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>t("/products"),className:"btn-secondary",children:"Cancelar"}),i.jsxs("button",{onClick:j,disabled:r,className:"btn-primary flex items-center gap-2",children:[r?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Bt,{className:"w-5 h-5"}),"Guardar contenido"]})]})]})]})}function mv(){const{categoryId:e}=kr(),t=kt(),[r,n]=B.useState(!0),[a,s]=B.useState(null),[o,l]=B.useState([]),[c,h]=B.useState([]),[p,d]=B.useState(""),[u,f]=B.useState([]);B.useEffect(()=>{P(this,null,function*(){n(!0),yield Promise.all([x(),b()]),e&&(yield w(e),yield g(e)),n(!1)})},[e]);const x=()=>P(this,null,function*(){try{const j=yield _t.categories.getAll({active:!0});f(Array.isArray(j)?j:[])}catch(j){console.error("Error al cargar categoras:",j)}}),b=()=>P(this,null,function*(){try{const j=yield he.subcategories.getAll({active:null});l(Array.isArray(j)?j:[]),console.log("Subcategoras cargadas:",j)}catch(j){console.error("Error al cargar subcategoras:",j),te.error("Error al cargar subcategoras")}}),w=j=>P(this,null,function*(){try{const k=yield _t.categories.getById(j);s(k)}catch(k){te.error("Error al cargar categora: "+k.message)}}),g=j=>P(this,null,function*(){try{const k=yield he.categorySubcategories.getAll({category_id:j});h(Array.isArray(k)?k:[]),console.log("Asignaciones cargadas para categora",j,":",k)}catch(k){console.error("Error al cargar asignaciones:",k),te.error("Error al cargar asignaciones: "+k.message)}}),m=j=>P(this,null,function*(){if(!(a!=null&&a.id)){te.error("Debes seleccionar una categora");return}if(c.find(S=>S.subcategory_id===j)){te.error("Esta subcategora ya est asignada");return}try{yield he.categorySubcategories.create({category_id:a.id,subcategory_id:j,position:c.length,active:!0}),te.success("Subcategora asignada correctamente"),yield g(a.id)}catch(S){te.error("Error al asignar: "+S.message)}}),y=j=>P(this,null,function*(){if(confirm("Ests seguro de que quieres desasignar esta subcategora?"))try{yield he.categorySubcategories.delete(j),te.success("Subcategora desasignada correctamente"),a!=null&&a.id&&(yield g(a.id))}catch(k){te.error("Error al desasignar: "+k.message)}}),v=(j,k)=>P(this,null,function*(){try{yield he.categorySubcategories.update(j,{position:k}),a!=null&&a.id&&(yield g(a.id))}catch(S){te.error("Error al actualizar posicin: "+S.message)}}),_=o.filter(j=>!c.find(k=>k.subcategory_id===j.id)),O=_.filter(j=>{var S,N;if(!p)return!0;const k=p.toLowerCase();return((S=j.title)==null?void 0:S.toLowerCase().includes(k))||((N=j.slug)==null?void 0:N.toLowerCase().includes(k))||j.description_html&&j.description_html.replace(/<[^>]*>/g,"").toLowerCase().includes(k)}),A=c.map(j=>{const k=o.find(S=>S.id===j.subcategory_id);return{assignment:j,subcat:k}}).filter(({subcat:j})=>{var S,N;if(!p||!j)return!0;const k=p.toLowerCase();return((S=j.title)==null?void 0:S.toLowerCase().includes(k))||((N=j.slug)==null?void 0:N.toLowerCase().includes(k))||j.description_html&&j.description_html.replace(/<[^>]*>/g,"").toLowerCase().includes(k)});return console.log("Estado actual:",{selectedCategory:a==null?void 0:a.name,availableSubcategories:o.length,assignedSubcategories:c.length,unassignedSubcategories:_.length,categoryId:e}),r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>t("/master-data/categories"),className:"btn-secondary flex items-center gap-2 mb-4",children:[i.jsx(Yr,{className:"w-4 h-4"}),"Volver a categoras"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Asignar subcategoras"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Asigna subcategoras a una categora"})]}),i.jsxs("button",{onClick:()=>t("/master-data/categories"),className:"btn-secondary flex items-center gap-2",children:[i.jsx(ir,{className:"w-5 h-5"}),"Cancelar"]})]}),i.jsx("div",{className:"card bg-green-50 border-green-200",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-green-900",children:"Asignacin categora  subcategora"}),i.jsxs("p",{className:"text-sm text-green-800 leading-relaxed",children:["Las subcategoras son reutilizables y pueden pertenecer a mltiples categoras. Cuando asignes una subcategora a esta categora, ",i.jsx("strong",{children:"todos los productos asociados a la subcategora se copiarn automticamente"}),". Luego podrs eliminar productos especficos si no aplican para esta categora."]})]})}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"section-title",children:"Seleccin de categora"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora *"}),i.jsx(rn,{value:(a==null?void 0:a.id)||e||"",onChange:j=>{const k=u.find(S=>S.id===j);s(k||null),k&&(t(`/catalog/category-subcategory-assignment/${k.id}`),g(k.id))},options:a&&!u.some(j=>j.id===a.id)?[{id:a.id,name:a.name||"Sin nombre"},...u.map(j=>({id:j.id,name:j.name}))]:u.map(j=>({id:j.id,name:j.name})),placeholder:"Seleccionar categora...",searchPlaceholder:"Buscar categora...",disabled:!!e})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"section-title",children:["Subcategoras asignadas (",c.length,")"]}),c.length>0&&i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",value:p,onChange:j=>d(j.target.value),placeholder:"Buscar subcategoras asignadas...",className:"input-field pl-10"})]})}),c.length===0?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay subcategoras asignadas"}):A.length===0?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No se encontraron subcategoras con ese criterio"}):i.jsx("div",{className:"space-y-2",children:A.sort((j,k)=>j.assignment.position-k.assignment.position).map(({assignment:j,subcat:k})=>i.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(xd,{className:"w-5 h-5 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:(k==null?void 0:k.title)||"Subcategora"}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Posicin: ",j.position]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:j.position,onChange:S=>v(j.id,parseInt(S.target.value)||0),className:"w-20 input-field text-sm",min:"0"}),i.jsx("button",{onClick:()=>y(j.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx(ht,{className:"w-4 h-4"})})]})]},j.id))})]}),i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"section-title",children:["Aadir subcategora",i.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",_.length," disponible",_.length!==1?"s":"",")"]})]}),o.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-gray-500 mb-4",children:"No hay subcategoras disponibles."}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Primero debes crear subcategoras para poder asignarlas a esta categora."}),i.jsxs("button",{onClick:()=>t("/catalog/subcategories/new"),className:"btn-primary flex items-center gap-2 mx-auto",children:[i.jsx(bt,{className:"w-4 h-4"}),"Crear subcategora"]})]}):_.length===0?i.jsxs("div",{className:"text-center py-4",children:[i.jsx("p",{className:"text-gray-500",children:"Todas las subcategoras disponibles estn asignadas a esta categora."}),i.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Puedes crear ms subcategoras desde"," ",i.jsx("button",{onClick:()=>t("/catalog/subcategories/new"),className:"text-primary-600 hover:text-primary-700 underline",children:"aqu"})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",value:p,onChange:j=>d(j.target.value),placeholder:"Buscar subcategoras disponibles...",className:"input-field pl-10"})]}),O.length===0?i.jsx("p",{className:"text-gray-500 text-center py-4",children:p?"No se encontraron subcategoras con ese criterio":"No hay subcategoras disponibles"}):i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:O.map(j=>i.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-3 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-gray-900",children:j.title}),j.description_html&&i.jsx("p",{className:"text-sm text-gray-600 line-clamp-1 mt-1",dangerouslySetInnerHTML:{__html:j.description_html}}),j.slug&&i.jsxs("p",{className:"text-xs text-gray-500 font-mono mt-1",children:["/",j.slug]})]}),i.jsxs("button",{onClick:()=>m(j.id),className:"btn-primary flex items-center gap-2 text-sm ml-4",children:[i.jsx(bt,{className:"w-4 h-4"}),"Asignar"]})]},j.id))})]})]})]})]})}function gv(){const{categoryId:e}=kr(),t=kt(),[r,n]=B.useState(!0),[a,s]=B.useState(null),[o,l]=B.useState([]),[c,h]=B.useState({}),[p,d]=B.useState(new Set),[u,f]=B.useState({}),[x,b]=B.useState([]),[w,g]=B.useState([]);B.useEffect(()=>{P(this,null,function*(){n(!0),yield Promise.all([m(),y()]),e&&(yield v(e),yield _(e)),n(!1)})},[e]);const m=()=>P(this,null,function*(){try{const E=yield _t.categories.getAll({active:!0});b(Array.isArray(E)?E:[])}catch(E){console.error("Error al cargar categoras:",E)}}),y=()=>P(this,null,function*(){try{const E=yield wt.getAll(1,1e3),T=Array.isArray(E)?E:E.data||[];g(T)}catch(E){console.error("Error al cargar productos:",E)}}),v=E=>P(this,null,function*(){try{const T=yield _t.categories.getById(E);s(T)}catch(T){te.error("Error al cargar categora: "+T.message)}}),_=E=>P(this,null,function*(){n(!0);try{const T=yield he.categorySubcategories.getAll({category_id:E}),C=Array.isArray(T)?T:[];l(C);const D={};for(const z of C)if(z.subcategory_id){const V=yield he.categorySubcategoryProducts.getAll({category_id:E,subcategory_id:z.subcategory_id});D[z.subcategory_id]=Array.isArray(V)?V:[]}h(D)}catch(T){te.error("Error al cargar subcategoras: "+T.message)}finally{n(!1)}}),O=E=>P(this,null,function*(){s(E),E?(t(`/catalog/category-subcategory-products/${E.id}`),yield _(E.id)):(l([]),h({}))}),A=E=>{const T=new Set(p);T.has(E)?T.delete(E):T.add(E),d(T)},j=(E,T)=>P(this,null,function*(){var D,z;if(!(a!=null&&a.id)){te.error("Debes seleccionar una categora");return}if((D=c[E])==null?void 0:D.find(V=>V.product_id===T)){te.error("Este producto ya est asignado a esta subcategora");return}try{yield he.categorySubcategoryProducts.create({category_id:a.id,subcategory_id:E,product_id:T,position:((z=c[E])==null?void 0:z.length)||0}),te.success("Producto asignado correctamente"),yield _(a.id)}catch(V){te.error("Error al asignar producto: "+V.message)}}),k=E=>P(this,null,function*(){if(confirm("Ests seguro de que quieres desasignar este producto?"))try{yield he.categorySubcategoryProducts.delete(E),te.success("Producto desasignado correctamente"),a!=null&&a.id&&(yield _(a.id))}catch(T){te.error("Error al desasignar: "+T.message)}}),S=E=>{var z,V;const T=new Set(((z=c[E])==null?void 0:z.map(G=>G.product_id))||[]),C=w.filter(G=>G.id!=null&&!T.has(G.id)),D=((V=u[E])==null?void 0:V.toLowerCase())||"";return D?C.filter(G=>{var U,M,R;return((U=G.title)==null?void 0:U.toLowerCase().includes(D))||((M=G.vendor)==null?void 0:M.toLowerCase().includes(D))||((R=G.subtitle)==null?void 0:R.toLowerCase().includes(D))}):C},N=E=>{var D;const T=c[E]||[],C=((D=u[E])==null?void 0:D.toLowerCase())||"";return C?T.filter(z=>{var G,U,M;const V=w.find(R=>R.id===z.product_id);return V?((G=V.title)==null?void 0:G.toLowerCase().includes(C))||((U=V.vendor)==null?void 0:U.toLowerCase().includes(C))||((M=V.subtitle)==null?void 0:M.toLowerCase().includes(C)):!1}):T};return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("button",{onClick:()=>t("/master-data/categories"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[i.jsx(Yr,{className:"w-5 h-5"}),"Volver a categoras"]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Asignacin Productos  Subcategora  Categora"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Gestiona qu productos pertenecen a cada subcategora dentro del contexto de una categora especfica"})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[i.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["1. Categora",a&&i.jsxs("span",{className:"ml-2 text-base font-normal text-gray-600",children:["- ",a.name]})]}),e?i.jsx("div",{className:"input-field bg-gray-50 cursor-not-allowed",children:i.jsx("span",{className:"text-gray-900",children:(a==null?void 0:a.name)||"Cargando..."})}):i.jsx(rn,{options:x.map(E=>({id:E.id,name:E.name})),value:(a==null?void 0:a.id)||"",onChange:E=>{const T=x.find(C=>C.id===E);O(T||null)},placeholder:"Selecciona una categora...",searchPlaceholder:"Buscar categora..."}),e&&i.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:['Has accedido desde la categora "',a==null?void 0:a.name,'".',i.jsx("button",{onClick:()=>t("/master-data/categories"),className:"ml-1 text-primary-600 hover:text-primary-700 underline",children:"Cambiar categora"})]})]}),a&&i.jsxs("div",{className:"bg-white rounded-lg shadow",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:['2. Subcategoras de "',a.name,'" y sus Productos']}),i.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[o.length," subcategora(s) asignada(s)"]})]}),o.length===0?i.jsxs("div",{className:"p-8 text-center text-gray-500",children:[i.jsx(Pt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),i.jsx("p",{children:"No hay subcategoras asignadas a esta categora."}),i.jsxs("p",{className:"mt-2 text-sm",children:["Primero debes asignar subcategoras a esta categora desde"," ",i.jsx("button",{onClick:()=>t(`/catalog/category-subcategory-assignment/${a.id}`),className:"text-primary-600 hover:text-primary-700 underline",children:"Asignacin Cat-Subcat"})]})]}):i.jsx("div",{className:"divide-y divide-gray-200",children:o.map(E=>{var G;const T=E.subcategory;if(!T)return null;const C=N(T.id),D=p.has(T.id),z=S(T.id),V=u[T.id]||"";return i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("button",{onClick:()=>A(T.id),className:"flex items-center gap-2 text-left flex-1 hover:text-primary-600",children:[D?i.jsx(li,{className:"w-5 h-5"}):i.jsx(Go,{className:"w-5 h-5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:T.title}),i.jsxs("p",{className:"text-sm text-gray-500",children:[((G=c[T.id])==null?void 0:G.length)||0," producto(s) asignado(s)",V&&` (${C.length} mostrado${C.length!==1?"s":""})`]})]})]})}),D&&i.jsxs("div",{className:"ml-7 space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",value:V,onChange:U=>f(de(X({},u),{[T.id]:U.target.value})),placeholder:"Buscar productos por ttulo, marca o subttulo...",className:"input-field pl-10"})]}),C.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Productos asignados (",C.length,")"]}),i.jsx("div",{className:"space-y-2",children:C.map(U=>{const M=U.product;return M?i.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Pt,{className:"w-5 h-5 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:M.title}),M.vendor&&i.jsx("p",{className:"text-sm text-gray-500",children:M.vendor})]})]}),i.jsx("button",{onClick:()=>k(U.id),className:"text-red-600 hover:text-red-700 p-2",title:"Desasignar producto",children:i.jsx(ht,{className:"w-5 h-5"})})]},U.id):null})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Agregar producto:"}),z.length===0?i.jsx("p",{className:"text-sm text-gray-500 italic",children:V?"No se encontraron productos con ese criterio":"Todos los productos disponibles ya estn asignados"}):i.jsx("div",{className:"space-y-2",children:i.jsx(rn,{options:z.filter(U=>U.id).map(U=>({id:U.id,name:`${U.title}${U.vendor?` - ${U.vendor}`:""}`})),value:"",onChange:U=>{U&&typeof U=="string"&&j(T.id,U)},placeholder:"Selecciona un producto para agregar...",searchPlaceholder:"Buscar producto..."})})]})]})]},E.id)})})]}),a&&i.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Pt,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Flujo de trabajo simplificado"}),i.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"1. Asigna productos a subcategoras"})," desde la gestin de subcategoras."]}),i.jsxs("p",{className:"mt-1",children:[i.jsx("strong",{children:"2. Al asignar una subcategora a una categora"}),", todos sus productos se copian automticamente."]}),i.jsxs("p",{className:"mt-1",children:[i.jsx("strong",{children:"3. Elimina productos especficos"})," aqu si no aplican para esta categora."]})]})]})]})})]})})}function tC(){const[e,t]=B.useState(!1),[r,n]=B.useState(null),[a,s]=B.useState(null),o=()=>P(this,null,function*(){t(!0),n(null),s(null);try{const l=yield as.syncGlobalWithProgress(c=>{var h,p,d,u,f,x,b,w;c.type==="progress"?s({step:(h=c.step)!=null?h:"categories",current:(p=c.current)!=null?p:0,total:(d=c.total)!=null?d:0,totalItems:(u=c.totalItems)!=null?u:0,message:(f=c.message)!=null?f:"",elapsedMs:(x=c.elapsedMs)!=null?x:0,done:(b=c.done)!=null?b:0,errors:(w=c.errors)!=null?w:0}):c.type==="done"&&c.results&&(n(c.results),s(null),te.success(`Traspaso completado: ${c.results.categories} categoras, ${c.results.subcategories} subcategoras, ${c.results.products} productos.`),c.results.errors.length>0&&te.error(`${c.results.errors.length} error(es). Ver detalles abajo.`))});l.type==="done"&&l.results&&!r&&n(l.results)}catch(l){const c=l instanceof Error?l.message:"Error al conectar con el servidor";te.error(c)}finally{t(!1),s(null)}});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Traspaso a Shopify"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Sincroniza categoras, subcategoras y productos con tu tienda Shopify. Si no existe en Shopify se crea y se guarda el ID; si ya existe se actualiza."})]}),i.jsxs("div",{className:"card bg-blue-50 border-blue-200",children:[i.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Traspaso global"}),i.jsx("p",{className:"text-sm text-blue-800 mb-4",children:"Enva todas las categoras (con contenido: Aspectos a vigilar, Lo que s ayuda, vdeos), todas las subcategoras con su contenido, y todos los productos con variantes, imgenes y metafields."}),i.jsxs("button",{onClick:o,disabled:e,className:"btn-primary flex items-center gap-2",children:[e?i.jsx(bd,{className:"w-5 h-5 animate-spin"}):i.jsx(ta,{className:"w-5 h-5"}),e?"Traspasando...":"Traspasar todo a Shopify"]})]}),i.jsx(Xd,{syncing:e,progress:a,lastResult:r,showResult:!0}),i.jsxs("div",{className:"card bg-gray-50 border-gray-200",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Traspaso individual"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Desde la ficha de cada ",i.jsx("strong",{children:"categora"})," se traspasa la categora, sus hijas, subcategoras asignadas y productos vinculados. Desde cada ",i.jsx("strong",{children:"subcategora"})," se traspasa la subcategora y todos sus productos. En ambos casos se muestra la barra de progreso."]})]})]})}function Xe({children:e}){const{user:t,loading:r}=Ko();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):t?i.jsx(i.Fragment,{children:e}):i.jsx(Bm,{to:"/",replace:!0})}function yv(){const{id:e}=kr(),t=kt(),[r,n]=B.useState(),[a,s]=B.useState(!0);B.useEffect(()=>{e&&e!=="new"?o():s(!1)},[e]);const o=()=>P(this,null,function*(){if(e)try{const l=yield wt.getById(e);n(l)}catch(l){te.error("Error al cargar producto: "+l.message)}finally{s(!1)}});return a?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):i.jsx(_l,{product:r,onSuccess:l=>{(!e||e==="new")&&(l!=null&&l.id)?t(`/products/${l.id}/edit`):t("/products")},onCancel:()=>{t("/products")}})}function yC(){return window.console.log(" ConfigError - Componente renderizado "),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:i.jsx("div",{className:"max-w-md w-full card",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Configuracin Incompleta"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Faltan las variables de entorno necesarias para conectar con Supabase."}),i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-left",children:[i.jsx("p",{className:"text-sm text-red-800 font-semibold mb-2",children:"Variables requeridas:"}),i.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[i.jsx("li",{children:" VITE_SUPABASE_URL"}),i.jsx("li",{children:" VITE_SUPABASE_ANON_KEY"})]})]}),i.jsx("p",{className:"text-sm text-gray-500 mt-6",children:"Por favor, configura estas variables antes de usar la aplicacin."})]})})})}function rC(){console.log(" AppRoutes() - INICIO");try{console.log(" AppRoutes() - Llamando useAuth()...");const{user:e,loading:t}=Ko();console.log(" AppRoutes() - useAuth() completado:",{hasUser:!!e,loading:t});const r="https://cfyjnmuwvidzkyqwsrev.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmeWpubXV3dmlkemt5cXdzcmV2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4NDgyOTAsImV4cCI6MjA4MzQyNDI5MH0.q72KxHICEc1F1pxw94jwgcHM6h-zD9aqQfp1CsBomSE";return console.log(" AppRoutes() - Variables de entorno:",{hasSupabaseUrl:!!r,hasSupabaseAnonKey:!!n}),t?(console.log(" AppRoutes() - Cargando sesin..."),i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})})):(console.log(" AppRoutes() - Renderizando rutas. Usuario:",e?e.email:"No autenticado"),i.jsxs(qb,{children:[i.jsx(Fe,{path:"/",element:e?i.jsx(Bm,{to:"/products",replace:!0}):i.jsx(jj,{})}),i.jsx(Fe,{path:"/products",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(FA,{})})})}),i.jsx(Fe,{path:"/products/new",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(yv,{})})})}),i.jsx(Fe,{path:"/products/:id/edit",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(yv,{})})})}),i.jsx(Fe,{path:"/master-data/categories",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(HA,{})})})}),i.jsx(Fe,{path:"/master-data/categories/new",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(vv,{})})})}),i.jsx(Fe,{path:"/master-data/categories/:id/edit",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(vv,{})})})}),i.jsx(Fe,{path:"/catalog/subcategories",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(XA,{})})})}),i.jsx(Fe,{path:"/catalog/subcategories/new",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(xv,{})})})}),i.jsx(Fe,{path:"/catalog/subcategories/:id/edit",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(xv,{})})})}),i.jsx(Fe,{path:"/shopify-sync",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(tC,{})})})}),i.jsx(Fe,{path:"/catalog/subcategories/:subcategoryId/products",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(eC,{})})})}),i.jsx(Fe,{path:"/catalog/subcategories/:subcategoryId/criteria",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(Qd,{})})})}),i.jsx(Fe,{path:"/catalog/category-content",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(Jd,{})})})}),i.jsx(Fe,{path:"/catalog/category-content/:categoryId",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(Jd,{})})})}),i.jsx(Fe,{path:"/catalog/subcategory-content",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(Yd,{})})})}),i.jsx(Fe,{path:"/catalog/subcategory-content/:subcategoryId",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(Yd,{})})})}),i.jsx(Fe,{path:"/catalog/product-content",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(pv,{})})})}),i.jsx(Fe,{path:"/catalog/product-content/:productId",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(pv,{})})})}),i.jsx(Fe,{path:"/catalog/category-subcategory-assignment",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(mv,{})})})}),i.jsx(Fe,{path:"/catalog/category-subcategory-assignment/:categoryId",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(mv,{})})})}),i.jsx(Fe,{path:"/catalog/category-subcategory-products",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(gv,{})})})}),i.jsx(Fe,{path:"/catalog/category-subcategory-products/:categoryId",element:i.jsx(Xe,{children:i.jsx(Qe,{children:i.jsx(gv,{})})})})]}))}catch(e){throw console.error(" AppRoutes() - Error:",e),e}}function vv(){const{id:e}=kr(),t=kt(),[r,n]=B.useState(),[a,s]=B.useState(!0);B.useEffect(()=>{e&&e!=="new"?o():s(!1)},[e]);const o=()=>P(this,null,function*(){if(e)try{const l=yield _t.categories.getById(e);n(l)}catch(l){te.error("Error al cargar categora: "+l.message)}finally{s(!1)}});return a?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):i.jsx(YA,{category:r,onSuccess:l=>{(!e||e==="new")&&(l!=null&&l.id)?t(`/master-data/categories/${l.id}/edit`):t("/master-data/categories")},onCancel:()=>{t("/master-data/categories")}})}function xv(){const{id:e}=kr(),t=kt(),[r,n]=B.useState(),[a,s]=B.useState(!0);B.useEffect(()=>{e&&e!=="new"?o():s(!1)},[e]);const o=()=>P(this,null,function*(){if(e)try{const l=yield he.subcategories.getById(e);n(l)}catch(l){te.error("Error al cargar subcategora: "+l.message)}finally{s(!1)}});return a?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):i.jsx(ZA,{subcategory:r,onSuccess:l=>{(!e||e==="new")&&(l!=null&&l.id)?t(`/catalog/subcategories/${l.id}/edit`):t("/catalog/subcategories")},onCancel:()=>{t("/catalog/subcategories")}})}function nC(){console.log(" App() - INICIO");try{const e=window.location.pathname;let t="",r=e.replace(/\/$/,"").replace(/\/index\.html$/,"");const n=r.split("/").filter(Boolean);return n.length>0&&n[0]!=="index.html"&&(t="/"+n[0]),console.log(" App() - Deteccin de basename:",{pathname:e,normalizedPath:r,segments:n,basename:t}),console.log(" App() - Renderizando BrowserRouter con basename:",t),i.jsx(Fb,{basename:t,children:i.jsx(w_,{children:i.jsx(rC,{})})})}catch(e){throw console.error(" App() - Error:",e),e}}class aC extends B.Component{constructor(){super(...arguments);Nv(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error(" Error capturado por ErrorBoundary:",r,n)}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:i.jsx("div",{className:"max-w-md w-full card",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error en la Aplicacin"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Ha ocurrido un error inesperado. Por favor, recarga la pgina."}),this.state.error&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-left mb-4",children:[i.jsx("p",{className:"text-sm text-red-800 font-semibold mb-2",children:"Detalles del error:"}),i.jsx("p",{className:"text-xs text-red-700 font-mono break-all",children:this.state.error.message})]}),i.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Recargar Pgina"})]})})}):this.props.children}}console.log(" main.tsx - INICIO"),console.log(" Pathname:",window.location.pathname),console.log(" URL completa:",window.location.href);function Zd(){const e=document.getElementById("root");if(!e){console.error(" No se encontr el elemento root"),setTimeout(Zd,100);return}console.log(" Root encontrado, renderizando React...");try{Al.createRoot(e).render(i.jsx(pt.StrictMode,{children:i.jsxs(aC,{children:[i.jsx(nC,{}),i.jsx(_j,{position:"top-right"})]})})),console.log(" React renderizado correctamente")}catch(t){throw console.error(" Error al renderizar React:",t),t}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Zd):Zd()})();
